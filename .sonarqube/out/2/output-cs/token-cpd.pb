»r
aC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Pages\SignIn.xaml.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
Pages  %
{ 
public 

partial 
class 
SignIn 
:  !
Page" &
{ 
public 
SignIn 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
private 
async 
void  
OnCreateAccountClick /
(/ 0
object0 6
sender7 =
,= >
RoutedEventArgs? N
eO P
)P Q
{ 	
SingInServiceClient 
client  &
=' (
null) -
;- .
Button 
btn 
= 
sender 
as  "
Button# )
;) *
LoadingWindow 
loadingWindow '
=( )
null* .
;. /
try 
{   
if!! 
(!! 
btn!! 
!=!! 
null!! 
)!!  
{"" 
btn## 
.## 
	IsEnabled## !
=##" #
false##$ )
;##) *
}$$ 
if)) 
()) 
string)) 
.)) 
IsNullOrWhiteSpace)) -
())- .
txtFirstName)). :
.)): ;
Text)); ?
)))? @
||))A C
string** 
.** 
IsNullOrWhiteSpace** -
(**- .
txtLastName**. 9
.**9 :
Text**: >
)**> ?
||**@ B
string++ 
.++ 
IsNullOrWhiteSpace++ -
(++- .
txtEmail++. 6
.++6 7
Text++7 ;
)++; <
||++= ?
string,, 
.,, 
IsNullOrWhiteSpace,, -
(,,- .
txtUsername,,. 9
.,,9 :
Text,,: >
),,> ?
||,,@ B
string-- 
.-- 
IsNullOrWhiteSpace-- -
(--- .
txtPassword--. 9
.--9 :
Password--: B
)--B C
||--D F
string.. 
... 
IsNullOrWhiteSpace.. -
(..- .
txtConfirmPassword... @
...@ A
Password..A I
)..I J
)..J K
{// 
MessageHelper00 !
.00! "
	ShowPopup00" +
(00+ ,
MessageTranslator11 )
.11) *
GetLocalizedMessage11* =
(11= >
$str11> T
)11T U
,11U V
$str22 !
)33 
;33 
return44 
;44 
}55 
if77 
(77 
txtPassword77 
.77  
Password77  (
!=77) +
txtConfirmPassword77, >
.77> ?
Password77? G
)77G H
{88 
MessageHelper99 !
.99! "
	ShowPopup99" +
(99+ ,
MessageTranslator:: )
.::) *
GetLocalizedMessage::* =
(::= >
$str::> V
)::V W
,::W X
$str;; !
)<< 
;<< 
return== 
;== 
}>> 
if@@ 
(@@ 
!@@ 
ValidatePassword@@ %
(@@% &
)@@& '
)@@' (
{AA 
MessageHelperBB !
.BB! "
	ShowPopupBB" +
(BB+ ,
MessageTranslatorCC )
.CC) *
GetLocalizedMessageCC* =
(CC= >
$strCC> S
)CCS T
,CCT U
$strDD !
)EE 
;EE 
returnFF 
;FF 
}GG 
loadingWindowLL 
=LL 
newLL  #
LoadingWindowLL$ 1
{MM 
OwnerNN 
=NN 
ApplicationNN '
.NN' (
CurrentNN( /
.NN/ 0

MainWindowNN0 :
}OO 
;OO 
loadingWindowPP 
.PP 
ShowPP "
(PP" #
)PP# $
;PP$ %
clientUU 
=UU 
newUU 
SingInServiceClientUU 0
(UU0 1
)UU1 2
;UU2 3
varVV 
userDtoVV 
=VV 
GetUserFromInputsVV /
(VV/ 0
)VV0 1
;VV1 2
varWW 
resultWW 
=WW 
awaitWW "
TaskWW# '
.WW' (
RunWW( +
(WW+ ,
(WW, -
)WW- .
=>WW/ 1
clientWW2 8
.WW8 9

CreateUserWW9 C
(WWC D
userDtoWWD K
)WWK L
)WWL M
;WWM N
ifYY 
(YY 
resultYY 
?YY 
.YY 
SuccessYY #
!=YY$ &
trueYY' +
)YY+ ,
{ZZ 
await\\ 
loadingWindow\\ '
.\\' (
WaitMinimumAsync\\( 8
(\\8 9
)\\9 :
;\\: ;
loadingWindow]] !
.]]! "
Close]]" '
(]]' (
)]]( )
;]]) *
string__ 
msg__ 
=__  
MessageTranslator__! 2
.__2 3
GetLocalizedMessage__3 F
(__F G
result__G M
.__M N
Code__N R
)__R S
;__S T
MessageHelper`` !
.``! "
	ShowPopup``" +
(``+ ,
msg``, /
,``/ 0
$str``1 8
)``8 9
;``9 :
returnaa 
;aa 
}bb 
awaitee 
loadingWindowee #
.ee# $
WaitMinimumAsyncee$ 4
(ee4 5
)ee5 6
;ee6 7
loadingWindowff 
.ff 
Closeff #
(ff# $
)ff$ %
;ff% &
varhh 
popuphh 
=hh 
newhh "
VerificationCodeWindowhh  6
{ii 
Ownerjj 
=jj 
Applicationjj '
.jj' (
Currentjj( /
.jj/ 0

MainWindowjj0 :
}kk 
;kk 
popupll 
.ll 

ShowDialogll  
(ll  !
)ll! "
;ll" #
}mm 
catchnn 
(nn 
	Exceptionnn 
exnn 
)nn  
{oo 
Debugpp 
.pp 
	WriteLinepp 
(pp  
$"pp  "
$strpp" @
{pp@ A
exppA C
.ppC D
MessageppD K
}ppK L
"ppL M
)ppM N
;ppN O
ifrr 
(rr 
loadingWindowrr !
!=rr" $
nullrr% )
)rr) *
{ss 
awaittt 
loadingWindowtt '
.tt' (
WaitMinimumAsynctt( 8
(tt8 9
)tt9 :
;tt: ;
ifvv 
(vv 
loadingWindowvv %
.vv% &
	IsVisiblevv& /
)vv/ 0
{ww 
loadingWindowxx %
.xx% &
Closexx& +
(xx+ ,
)xx, -
;xx- .
}yy 
}zz 
MessageHelper|| 
.|| 
	ShowPopup|| '
(||' (
MessageTranslator}} %
.}}% &
GetLocalizedMessage}}& 9
(}}9 :
$str}}: L
)}}L M
,}}M N
$str~~ 
) 
; 
}
ÄÄ 
finally
ÅÅ 
{
ÇÇ 
if
ÉÉ 
(
ÉÉ 
btn
ÉÉ 
!=
ÉÉ 
null
ÉÉ 
)
ÉÉ  
{
ÑÑ 
btn
ÖÖ 
.
ÖÖ 
	IsEnabled
ÖÖ !
=
ÖÖ" #
true
ÖÖ$ (
;
ÖÖ( )
}
ÜÜ 
ServiceHelper
àà 
.
àà 
	SafeClose
àà '
(
àà' (
client
àà( .
)
àà. /
;
àà/ 0
}
ââ 
}
ää 	
private
ìì 
bool
ìì 
ValidatePassword
ìì %
(
ìì% &
)
ìì& '
{
îî 	
try
ïï 
{
ññ 
	Validator
óó 
.
óó 
ValidatePassword
óó *
(
óó* +
txtPassword
óó+ 6
.
óó6 7
Password
óó7 ?
)
óó? @
;
óó@ A
return
òò 
true
òò 
;
òò 
}
ôô 
catch
öö 
{
õõ 
return
úú 
false
úú 
;
úú 
}
ùù 
}
ûû 	
private
†† 
UserDto
†† 
GetUserFromInputs
†† )
(
††) *
)
††* +
{
°° 	
return
¢¢ 
new
¢¢ 
UserDto
¢¢ 
{
££ 
Name
§§ 
=
§§ 
txtFirstName
§§ #
.
§§# $
Text
§§$ (
.
§§( )
Trim
§§) -
(
§§- .
)
§§. /
,
§§/ 0
LastName
•• 
=
•• 
txtLastName
•• &
.
••& '
Text
••' +
.
••+ ,
Trim
••, 0
(
••0 1
)
••1 2
,
••2 3
Email
¶¶ 
=
¶¶ 
txtEmail
¶¶  
.
¶¶  !
Text
¶¶! %
.
¶¶% &
Trim
¶¶& *
(
¶¶* +
)
¶¶+ ,
,
¶¶, -
Username
ßß 
=
ßß 
txtUsername
ßß &
.
ßß& '
Text
ßß' +
.
ßß+ ,
Trim
ßß, 0
(
ßß0 1
)
ßß1 2
,
ßß2 3
Password
®® 
=
®® 
Hasher
®® !
.
®®! "
HashPassword
®®" .
(
®®. /
txtPassword
®®/ :
.
®®: ;
Password
®®; C
.
®®C D
Trim
®®D H
(
®®H I
)
®®I J
)
®®J K
}
©© 
;
©© 
}
™™ 	
private
¨¨ 
void
¨¨ 
ClearInputs
¨¨  
(
¨¨  !
)
¨¨! "
{
≠≠ 	
txtFirstName
ÆÆ 
.
ÆÆ 
Clear
ÆÆ 
(
ÆÆ 
)
ÆÆ  
;
ÆÆ  !
txtLastName
ØØ 
.
ØØ 
Clear
ØØ 
(
ØØ 
)
ØØ 
;
ØØ  
txtEmail
∞∞ 
.
∞∞ 
Clear
∞∞ 
(
∞∞ 
)
∞∞ 
;
∞∞ 
txtUsername
±± 
.
±± 
Clear
±± 
(
±± 
)
±± 
;
±±  
txtPassword
≤≤ 
.
≤≤ 
Clear
≤≤ 
(
≤≤ 
)
≤≤ 
;
≤≤   
txtConfirmPassword
≥≥ 
.
≥≥ 
Clear
≥≥ $
(
≥≥$ %
)
≥≥% &
;
≥≥& '
}
¥¥ 	
private
∫∫ 
void
∫∫ 
OnBackClick
∫∫  
(
∫∫  !
object
∫∫! '
sender
∫∫( .
,
∫∫. /
RoutedEventArgs
∫∫0 ?
e
∫∫@ A
)
∫∫A B
{
ªª 	
try
ºº 
{
ΩΩ 
if
ææ 
(
ææ 
NavigationService
ææ %
?
ææ% &
.
ææ& '
	CanGoBack
ææ' 0
==
ææ1 3
true
ææ4 8
)
ææ8 9
{
øø 
NavigationService
¿¿ %
.
¿¿% &
GoBack
¿¿& ,
(
¿¿, -
)
¿¿- .
;
¿¿. /
}
¡¡ 
else
¬¬ 
{
√√ 
MessageHelper
ƒƒ !
.
ƒƒ! "
	ShowPopup
ƒƒ" +
(
ƒƒ+ ,
MessageTranslator
≈≈ )
.
≈≈) *!
GetLocalizedMessage
≈≈* =
(
≈≈= >
$str
≈≈> S
)
≈≈S T
,
≈≈T U
$str
∆∆ !
)
«« 
;
«« 
}
»» 
}
…… 
catch
   
(
   
	Exception
   
ex
   
)
    
{
ÀÀ 
Debug
ÃÃ 
.
ÃÃ 
	WriteLine
ÃÃ 
(
ÃÃ  
$"
ÃÃ  "
$str
ÃÃ" 7
{
ÃÃ7 8
ex
ÃÃ8 :
.
ÃÃ: ;
Message
ÃÃ; B
}
ÃÃB C
"
ÃÃC D
)
ÃÃD E
;
ÃÃE F
MessageHelper
ŒŒ 
.
ŒŒ 
	ShowPopup
ŒŒ '
(
ŒŒ' (
MessageTranslator
œœ %
.
œœ% &!
GetLocalizedMessage
œœ& 9
(
œœ9 :
$str
œœ: L
)
œœL M
,
œœM N
$str
–– 
)
—— 
;
—— 
}
““ 
}
”” 	
private
ŸŸ 
void
ŸŸ 
OnSoundClick
ŸŸ !
(
ŸŸ! "
object
ŸŸ" (
sender
ŸŸ) /
,
ŸŸ/ 0
RoutedEventArgs
ŸŸ1 @
e
ŸŸA B
)
ŸŸB C
{
⁄⁄ 	
try
€€ 
{
‹‹ 
NavigationService
›› !
?
››! "
.
››" #
Navigate
››# +
(
››+ ,
new
››, /

ConfiSound
››0 :
(
››: ;
)
››; <
)
››< =
;
››= >
}
ﬁﬁ 
catch
ﬂﬂ 
(
ﬂﬂ 
	Exception
ﬂﬂ 
ex
ﬂﬂ 
)
ﬂﬂ  
{
‡‡ 
Debug
·· 
.
·· 
	WriteLine
·· 
(
··  
$"
··  "
$str
··" 8
{
··8 9
ex
··9 ;
.
··; <
Message
··< C
}
··C D
"
··D E
)
··E F
;
··F G
MessageHelper
„„ 
.
„„ 
	ShowPopup
„„ '
(
„„' (
MessageTranslator
‰‰ %
.
‰‰% &!
GetLocalizedMessage
‰‰& 9
(
‰‰9 :
$str
‰‰: O
)
‰‰O P
,
‰‰P Q
$str
ÂÂ 
)
ÊÊ 
;
ÊÊ 
}
ÁÁ 
}
ËË 	
private
ÓÓ 
void
ÓÓ 
OnLanguageClick
ÓÓ $
(
ÓÓ$ %
object
ÓÓ% +
sender
ÓÓ, 2
,
ÓÓ2 3
RoutedEventArgs
ÓÓ4 C
e
ÓÓD E
)
ÓÓE F
{
ÔÔ 	
try
 
{
ÒÒ 
NavigationService
ÚÚ !
?
ÚÚ! "
.
ÚÚ" #
Navigate
ÚÚ# +
(
ÚÚ+ ,
new
ÚÚ, /
SelectLanguage
ÚÚ0 >
(
ÚÚ> ?
)
ÚÚ? @
)
ÚÚ@ A
;
ÚÚA B
}
ÛÛ 
catch
ÙÙ 
(
ÙÙ 
	Exception
ÙÙ 
ex
ÙÙ 
)
ÙÙ  
{
ıı 
Debug
ˆˆ 
.
ˆˆ 
	WriteLine
ˆˆ 
(
ˆˆ  
$"
ˆˆ  "
$str
ˆˆ" ;
{
ˆˆ; <
ex
ˆˆ< >
.
ˆˆ> ?
Message
ˆˆ? F
}
ˆˆF G
"
ˆˆG H
)
ˆˆH I
;
ˆˆI J
MessageHelper
¯¯ 
.
¯¯ 
	ShowPopup
¯¯ '
(
¯¯' (
MessageTranslator
˘˘ %
.
˘˘% &!
GetLocalizedMessage
˘˘& 9
(
˘˘9 :
$str
˘˘: L
)
˘˘L M
,
˘˘M N
$str
˙˙ 
)
˚˚ 
;
˚˚ 
}
¸¸ 
}
˝˝ 	
}
˛˛ 
}ˇˇ ›u
oC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Pages\MenuRegisteredPlayer.xaml.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
Pages  %
{ 
public 

partial 
class  
MenuRegisteredPlayer -
:. /
Page0 4
{ 
private 
readonly 
PublicProfile &
_profile' /
;/ 0
private 
readonly 
int 
_userId $
;$ %
public  
MenuRegisteredPlayer #
(# $
PublicProfile$ 1
profile2 9
)9 :
{ 	
InitializeComponent 
(  
)  !
;! "
_profile 
= 
profile 
?? !
throw" '
new( +!
ArgumentNullException, A
(A B
nameofB H
(H I
profileI P
)P Q
)Q R
;R S
_userId 
= 
$num 
; 
txtUsername 
. 
Text 
= 
_profile '
.' (
Username( 0
;0 1
} 	
private 
void 
OnAvatarClick "
(" #
object# )
sender* 0
,0 1
RoutedEventArgs2 A
eB C
)C D
{ 	
try 
{   
var!! 
profilePage!! 
=!!  !
new!!" %
ProfilePlayer!!& 3
(!!3 4
_profile!!4 <
)!!< =
;!!= >
NavigationService"" !
?""! "
.""" #
Navigate""# +
(""+ ,
profilePage"", 7
)""7 8
;""8 9
}## 
catch$$ 
($$ %
InvalidOperationException$$ ,
ex$$- /
)$$/ 0
{%% 
Debug&& 
.&& 
	WriteLine&& 
(&&  
$"&&  "
$str&&" Z
{&&Z [
ex&&[ ]
.&&] ^
Message&&^ e
}&&e f
"&&f g
)&&g h
;&&h i
MessageHelper(( 
.(( 
	ShowPopup(( '
(((' (
MessageTranslator)) %
.))% &
GetLocalizedMessage))& 9
())9 :
$str)): O
)))O P
,))P Q
$str** 
)++ 
;++ 
},, 
catch-- 
(-- 
	Exception-- 
ex-- 
)--  
{.. 
Debug// 
.// 
	WriteLine// 
(//  
$"//  "
$str//" Q
{//Q R
ex//R T
.//T U
Message//U \
}//\ ]
"//] ^
)//^ _
;//_ `
MessageHelper11 
.11 
	ShowPopup11 '
(11' (
MessageTranslator22 %
.22% &
GetLocalizedMessage22& 9
(229 :
$str22: P
)22P Q
,22Q R
$str33 
)44 
;44 
}55 
}66 	
private:: 
void:: 
OnCreateGameClick:: &
(::& '
object::' -
sender::. 4
,::4 5
RoutedEventArgs::6 E
e::F G
)::G H
{;; 	
try<< 
{== 
var>> 
lobbyManager>>  
=>>! "
new>># &
LobbyManager>>' 3
(>>3 4
)>>4 5
;>>5 6
var?? 
lobby?? 
=?? 
lobbyManager?? (
.??( )
CreateLobby??) 4
(??4 5
_userId??5 <
,??< =
_profile??> F
.??F G
Username??G O
,??O P
false??Q V
)??V W
;??W X
varAA 
preLobbyPageAA  
=AA! "
newAA# &
PreLobbyAA' /
(AA/ 0
lobbyAA0 5
,AA5 6
_userIdAA7 >
,AA> ?
_profileAA@ H
.AAH I
UsernameAAI Q
)AAQ R
;AAR S
NavigationServiceBB !
?BB! "
.BB" #
NavigateBB# +
(BB+ ,
preLobbyPageBB, 8
)BB8 9
;BB9 :
}CC 
catchDD 
(DD "
CommunicationExceptionDD )
exDD* ,
)DD, -
{EE 
DebugFF 
.FF 
	WriteLineFF 
(FF  
$"FF  "
$strFF" [
{FF[ \
exFF\ ^
.FF^ _
MessageFF_ f
}FFf g
"FFg h
)FFh i
;FFi j
MessageHelperHH 
.HH 
	ShowPopupHH '
(HH' (
MessageTranslatorII %
.II% &
GetLocalizedMessageII& 9
(II9 :
$strII: Q
)IIQ R
,IIR S
$strJJ 
)KK 
;KK 
}LL 
catchMM 
(MM 
TimeoutExceptionMM #
exMM$ &
)MM& '
{NN 
DebugOO 
.OO 
	WriteLineOO 
(OO  
$"OO  "
$strOO" U
{OOU V
exOOV X
.OOX Y
MessageOOY `
}OO` a
"OOa b
)OOb c
;OOc d
MessageHelperQQ 
.QQ 
	ShowPopupQQ '
(QQ' (
MessageTranslatorRR %
.RR% &
GetLocalizedMessageRR& 9
(RR9 :
$strRR: N
)RRN O
,RRO P
$strSS 
)TT 
;TT 
}UU 
catchVV 
(VV 
	ExceptionVV 
exVV 
)VV  
{WW 
DebugXX 
.XX 
	WriteLineXX 
(XX  
$"XX  "
$strXX" U
{XXU V
exXXV X
.XXX Y
MessageXXY `
}XX` a
"XXa b
)XXb c
;XXc d
MessageHelperZZ 
.ZZ 
	ShowPopupZZ '
(ZZ' (
MessageTranslator[[ %
.[[% &
GetLocalizedMessage[[& 9
([[9 :
$str[[: P
)[[P Q
,[[Q R
$str\\ 
)]] 
;]] 
}^^ 
}__ 	
privatecc 
voidcc 
OnJoinPartyClickcc %
(cc% &
objectcc& ,
sendercc- 3
,cc3 4
RoutedEventArgscc5 D
eccE F
)ccF G
{dd 	
tryee 
{ff 
vargg 
joinPartyPagegg !
=gg" #
newgg$ '
	JoinPartygg( 1
(gg1 2
_userIdgg2 9
,gg9 :
_profilegg; C
.ggC D
UsernameggD L
)ggL M
;ggM N
NavigationServicehh !
?hh! "
.hh" #
Navigatehh# +
(hh+ ,
joinPartyPagehh, 9
)hh9 :
;hh: ;
}ii 
catchjj 
(jj %
InvalidOperationExceptionjj ,
exjj- /
)jj/ 0
{kk 
Debugll 
.ll 
	WriteLinell 
(ll  
$"ll  "
$strll" ]
{ll] ^
exll^ `
.ll` a
Messagella h
}llh i
"lli j
)llj k
;llk l
MessageHelpernn 
.nn 
	ShowPopupnn '
(nn' (
MessageTranslatoroo %
.oo% &
GetLocalizedMessageoo& 9
(oo9 :
$stroo: O
)ooO P
,ooP Q
$strpp 
)qq 
;qq 
}rr 
catchss 
(ss 
	Exceptionss 
exss 
)ss  
{tt 
Debuguu 
.uu 
	WriteLineuu 
(uu  
$"uu  "
$struu" T
{uuT U
exuuU W
.uuW X
MessageuuX _
}uu_ `
"uu` a
)uua b
;uub c
MessageHelperww 
.ww 
	ShowPopupww '
(ww' (
MessageTranslatorxx %
.xx% &
GetLocalizedMessagexx& 9
(xx9 :
$strxx: R
)xxR S
,xxS T
$stryy 
)zz 
;zz 
}{{ 
}|| 	
private
ÄÄ 
void
ÄÄ 
OnHowToPlayClick
ÄÄ %
(
ÄÄ% &
object
ÄÄ& ,
sender
ÄÄ- 3
,
ÄÄ3 4
RoutedEventArgs
ÄÄ5 D
e
ÄÄE F
)
ÄÄF G
{
ÅÅ 	
MessageHelper
ÇÇ 
.
ÇÇ 
	ShowPopup
ÇÇ #
(
ÇÇ# $
MessageTranslator
ÉÉ !
.
ÉÉ! "!
GetLocalizedMessage
ÉÉ" 5
(
ÉÉ5 6
$str
ÉÉ6 O
)
ÉÉO P
,
ÉÉP Q
$str
ÑÑ 
)
ÖÖ 
;
ÖÖ 
}
ÜÜ 	
private
ää 
void
ää 
OnStatisticsClick
ää &
(
ää& '
object
ää' -
sender
ää. 4
,
ää4 5
RoutedEventArgs
ää6 E
e
ääF G
)
ääG H
{
ãã 	
MessageHelper
åå 
.
åå 
	ShowPopup
åå #
(
åå# $
MessageTranslator
çç !
.
çç! "!
GetLocalizedMessage
çç" 5
(
çç5 6
$str
çç6 L
)
ççL M
,
ççM N
$str
éé 
)
èè 
;
èè 
}
êê 	
private
íí 
void
íí 
OnFriendsClick
íí #
(
íí# $
object
íí$ *
sender
íí+ 1
,
íí1 2
RoutedEventArgs
íí3 B
e
ííC D
)
ííD E
{
ìì 	
try
îî 
{
ïï 
NavigationService
ññ !
?
ññ! "
.
ññ" #
Navigate
ññ# +
(
ññ+ ,
new
ññ, /
Friends
ññ0 7
(
ññ7 8
_profile
ññ8 @
.
ññ@ A
Username
ññA I
)
ññI J
)
ññJ K
;
ññK L
}
óó 
catch
òò 
(
òò '
InvalidOperationException
òò ,
ex
òò- /
)
òò/ 0
{
ôô 
Debug
öö 
.
öö 
	WriteLine
öö 
(
öö  
$"
öö  "
$str
öö" [
{
öö[ \
ex
öö\ ^
.
öö^ _
Message
öö_ f
}
ööf g
"
öög h
)
ööh i
;
ööi j
MessageHelper
úú 
.
úú 
	ShowPopup
úú '
(
úú' (
MessageTranslator
ùù %
.
ùù% &!
GetLocalizedMessage
ùù& 9
(
ùù9 :
$str
ùù: O
)
ùùO P
,
ùùP Q
$str
ûû 
)
üü 
;
üü 
}
†† 
catch
°° 
(
°° 
	Exception
°° 
ex
°° 
)
°°  
{
¢¢ 
Debug
££ 
.
££ 
	WriteLine
££ 
(
££  
$"
££  "
$str
££" R
{
££R S
ex
££S U
.
££U V
Message
££V ]
}
££] ^
"
££^ _
)
££_ `
;
££` a
MessageHelper
•• 
.
•• 
	ShowPopup
•• '
(
••' (
MessageTranslator
¶¶ %
.
¶¶% &!
GetLocalizedMessage
¶¶& 9
(
¶¶9 :
$str
¶¶: P
)
¶¶P Q
,
¶¶Q R
$str
ßß 
)
®® 
;
®® 
}
©© 
}
™™ 	
private
≠≠ 
void
≠≠ 
OnSoundClick
≠≠ !
(
≠≠! "
object
≠≠" (
sender
≠≠) /
,
≠≠/ 0
RoutedEventArgs
≠≠1 @
e
≠≠A B
)
≠≠B C
{
ÆÆ 	
try
ØØ 
{
∞∞ 
NavigationService
±± !
?
±±! "
.
±±" #
Navigate
±±# +
(
±±+ ,
new
±±, /

ConfiSound
±±0 :
(
±±: ;
)
±±; <
)
±±< =
;
±±= >
}
≤≤ 
catch
≥≥ 
(
≥≥ '
InvalidOperationException
≥≥ ,
ex
≥≥- /
)
≥≥/ 0
{
¥¥ 
Debug
µµ 
.
µµ 
	WriteLine
µµ 
(
µµ  
$"
µµ  "
$str
µµ" Y
{
µµY Z
ex
µµZ \
.
µµ\ ]
Message
µµ] d
}
µµd e
"
µµe f
)
µµf g
;
µµg h
MessageHelper
∑∑ 
.
∑∑ 
	ShowPopup
∑∑ '
(
∑∑' (
MessageTranslator
∏∏ %
.
∏∏% &!
GetLocalizedMessage
∏∏& 9
(
∏∏9 :
$str
∏∏: O
)
∏∏O P
,
∏∏P Q
$str
ππ 
)
∫∫ 
;
∫∫ 
}
ªª 
catch
ºº 
(
ºº 
	Exception
ºº 
ex
ºº 
)
ºº  
{
ΩΩ 
Debug
ææ 
.
ææ 
	WriteLine
ææ 
(
ææ  
$"
ææ  "
$str
ææ" P
{
ææP Q
ex
ææQ S
.
ææS T
Message
ææT [
}
ææ[ \
"
ææ\ ]
)
ææ] ^
;
ææ^ _
MessageHelper
¿¿ 
.
¿¿ 
	ShowPopup
¿¿ '
(
¿¿' (
MessageTranslator
¡¡ %
.
¡¡% &!
GetLocalizedMessage
¡¡& 9
(
¡¡9 :
$str
¡¡: L
)
¡¡L M
,
¡¡M N
$str
¬¬ 
)
√√ 
;
√√ 
}
ƒƒ 
}
≈≈ 	
private
…… 
void
…… 
OnLanguageClick
…… $
(
……$ %
object
……% +
sender
……, 2
,
……2 3
RoutedEventArgs
……4 C
e
……D E
)
……E F
{
   	
try
ÀÀ 
{
ÃÃ 
NavigationService
ÕÕ !
?
ÕÕ! "
.
ÕÕ" #
Navigate
ÕÕ# +
(
ÕÕ+ ,
new
ÕÕ, /
SelectLanguage
ÕÕ0 >
(
ÕÕ> ?
)
ÕÕ? @
)
ÕÕ@ A
;
ÕÕA B
}
ŒŒ 
catch
œœ 
(
œœ '
InvalidOperationException
œœ ,
ex
œœ- /
)
œœ/ 0
{
–– 
Debug
—— 
.
—— 
	WriteLine
—— 
(
——  
$"
——  "
$str
——" \
{
——\ ]
ex
——] _
.
——_ `
Message
——` g
}
——g h
"
——h i
)
——i j
;
——j k
MessageHelper
”” 
.
”” 
	ShowPopup
”” '
(
””' (
MessageTranslator
‘‘ %
.
‘‘% &!
GetLocalizedMessage
‘‘& 9
(
‘‘9 :
$str
‘‘: O
)
‘‘O P
,
‘‘P Q
$str
’’ 
)
÷÷ 
;
÷÷ 
}
◊◊ 
catch
ÿÿ 
(
ÿÿ 
	Exception
ÿÿ 
ex
ÿÿ 
)
ÿÿ  
{
ŸŸ 
Debug
⁄⁄ 
.
⁄⁄ 
	WriteLine
⁄⁄ 
(
⁄⁄  
$"
⁄⁄  "
$str
⁄⁄" S
{
⁄⁄S T
ex
⁄⁄T V
.
⁄⁄V W
Message
⁄⁄W ^
}
⁄⁄^ _
"
⁄⁄_ `
)
⁄⁄` a
;
⁄⁄a b
MessageHelper
‹‹ 
.
‹‹ 
	ShowPopup
‹‹ '
(
‹‹' (
MessageTranslator
›› %
.
››% &!
GetLocalizedMessage
››& 9
(
››9 :
$str
››: L
)
››L M
,
››M N
$str
ﬁﬁ 
)
ﬂﬂ 
;
ﬂﬂ 
}
‡‡ 
}
·· 	
}
‚‚ 
}„„ ®i
hC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Pages\ProfilePlayer.xaml.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
Pages  %
{ 
public 

partial 
class 
ProfilePlayer &
:' (
Page) -
{ 
private 
PublicProfile 
_profile &
;& '
public 
ProfilePlayer 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
public 
ProfilePlayer 
( 
PublicProfile *
profile+ 2
)2 3
{ 	
InitializeComponent 
(  
)  !
;! "
_profile 
= 
profile 
?? !
throw" '
new( +!
ArgumentNullException, A
(A B
nameofB H
(H I
profileI P
)P Q
)Q R
;R S 
UpdateProfileDisplay  
(  !
)! "
;" #
} 	
private   
void   
OnBackClick    
(    !
object  ! '
sender  ( .
,  . /
RoutedEventArgs  0 ?
e  @ A
)  A B
{!! 	
try"" 
{## 
if$$ 
($$ 
NavigationService$$ %
?$$% &
.$$& '
	CanGoBack$$' 0
==$$1 3
true$$4 8
)$$8 9
{%% 
NavigationService&& %
.&&% &
GoBack&&& ,
(&&, -
)&&- .
;&&. /
}'' 
else(( 
{)) 
MessageHelper** !
.**! "
	ShowPopup**" +
(**+ ,
MessageTranslator++ )
.++) *
GetLocalizedMessage++* =
(++= >
$str++> S
)++S T
,++T U
$str,, !
)-- 
;-- 
}.. 
}// 
catch00 
(00 %
InvalidOperationException00 ,
ex00- /
)00/ 0
{11 
Debug22 
.22 
	WriteLine22 
(22  
$"22  "
$str22" Q
{22Q R
ex22R T
.22T U
Message22U \
}22\ ]
"22] ^
)22^ _
;22_ `
MessageHelper44 
.44 
	ShowPopup44 '
(44' (
MessageTranslator55 %
.55% &
GetLocalizedMessage55& 9
(559 :
$str55: O
)55O P
,55P Q
$str66 
)77 
;77 
}88 
catch99 
(99 
	Exception99 
ex99 
)99  
{:: 
Debug;; 
.;; 
	WriteLine;; 
(;;  
$";;  "
$str;;" H
{;;H I
ex;;I K
.;;K L
Message;;L S
};;S T
";;T U
);;U V
;;;V W
MessageHelper== 
.== 
	ShowPopup== '
(==' (
MessageTranslator>> %
.>>% &
GetLocalizedMessage>>& 9
(>>9 :
$str>>: L
)>>L M
,>>M N
$str?? 
)@@ 
;@@ 
}AA 
}BB 	
privateEE 
voidEE 
OnLogoutClickEE "
(EE" #
objectEE# )
senderEE* 0
,EE0 1
RoutedEventArgsEE2 A
eEEB C
)EEC D
{FF 	
tryGG 
{HH 
boolII 
confirmII 
=II 
MessageHelperII ,
.II, -
ShowConfirmLogoutII- >
(II> ?
)II? @
;II@ A
ifKK 
(KK 
!KK 
confirmKK 
)KK 
{LL 
returnMM 
;MM 
}NN 
ClientSessionQQ 
.QQ 
ClearQQ #
(QQ# $
)QQ$ %
;QQ% &
ifTT 
(TT 
NavigationServiceTT %
==TT& (
nullTT) -
)TT- .
{UU 
MessageHelperVV !
.VV! "
	ShowPopupVV" +
(VV+ ,
MessageTranslatorWW )
.WW) *
GetLocalizedMessageWW* =
(WW= >
$strWW> S
)WWS T
,WWT U
$strXX 
)YY 
;YY 
returnZZ 
;ZZ 
}[[ 
NavigationService^^ !
.^^! "
Navigate^^" *
(^^* +
new^^+ .

MainWindow^^/ 9
(^^9 :
)^^: ;
)^^; <
;^^< =
}aa 
catchbb 
(bb %
InvalidOperationExceptionbb ,
exbb- /
)bb/ 0
{cc 
Debugdd 
.dd 
	WriteLinedd 
(dd  
$"dd  "
$strdd" S
{ddS T
exddT V
.ddV W
MessageddW ^
}dd^ _
"dd_ `
)dd` a
;dda b
MessageHelperff 
.ff 
	ShowPopupff '
(ff' (
MessageTranslatorgg %
.gg% &
GetLocalizedMessagegg& 9
(gg9 :
$strgg: O
)ggO P
,ggP Q
$strhh 
)ii 
;ii 
}jj 
catchkk 
(kk 
	Exceptionkk 
exkk 
)kk  
{ll 
Debugmm 
.mm 
	WriteLinemm 
(mm  
$"mm  "
$strmm" J
{mmJ K
exmmK M
.mmM N
MessagemmN U
}mmU V
"mmV W
)mmW X
;mmX Y
MessageHelperoo 
.oo 
	ShowPopupoo '
(oo' (
MessageTranslatorpp %
.pp% &
GetLocalizedMessagepp& 9
(pp9 :
$strpp: L
)ppL M
,ppM N
$strqq 
)rr 
;rr 
}ss 
}tt 	
privateyy 
voidyy 
OnChangeDataClickyy &
(yy& '
objectyy' -
senderyy. 4
,yy4 5
RoutedEventArgsyy6 E
eyyF G
)yyG H
{zz 	
try{{ 
{|| 
NavigationService}} !
?}}! "
.}}" #
Navigate}}# +
(}}+ ,
new}}, /

ChangeData}}0 :
(}}: ;
_profile}}; C
)}}C D
)}}D E
;}}E F
}~~ 
catch 
( %
InvalidOperationException ,
ex- /
)/ 0
{
ÄÄ 
Debug
ÅÅ 
.
ÅÅ 
	WriteLine
ÅÅ 
(
ÅÅ  
$"
ÅÅ  "
$str
ÅÅ" W
{
ÅÅW X
ex
ÅÅX Z
.
ÅÅZ [
Message
ÅÅ[ b
}
ÅÅb c
"
ÅÅc d
)
ÅÅd e
;
ÅÅe f
MessageHelper
ÉÉ 
.
ÉÉ 
	ShowPopup
ÉÉ '
(
ÉÉ' (
MessageTranslator
ÑÑ %
.
ÑÑ% &!
GetLocalizedMessage
ÑÑ& 9
(
ÑÑ9 :
$str
ÑÑ: O
)
ÑÑO P
,
ÑÑP Q
$str
ÖÖ 
)
ÜÜ 
;
ÜÜ 
}
áá 
catch
àà 
(
àà 
	Exception
àà 
ex
àà 
)
àà  
{
ââ 
Debug
ää 
.
ää 
	WriteLine
ää 
(
ää  
$"
ää  "
$str
ää" N
{
ääN O
ex
ääO Q
.
ääQ R
Message
ääR Y
}
ääY Z
"
ääZ [
)
ää[ \
;
ää\ ]
MessageHelper
åå 
.
åå 
	ShowPopup
åå '
(
åå' (
MessageTranslator
çç %
.
çç% &!
GetLocalizedMessage
çç& 9
(
çç9 :
$str
çç: R
)
ççR S
,
ççS T
$str
éé 
)
èè 
;
èè 
}
êê 
}
ëë 	
private
îî 
void
îî 
OnSoundClick
îî !
(
îî! "
object
îî" (
sender
îî) /
,
îî/ 0
RoutedEventArgs
îî1 @
e
îîA B
)
îîB C
{
ïï 	
try
ññ 
{
óó 
NavigationService
òò !
?
òò! "
.
òò" #
Navigate
òò# +
(
òò+ ,
new
òò, /

ConfiSound
òò0 :
(
òò: ;
)
òò; <
)
òò< =
;
òò= >
}
ôô 
catch
öö 
(
öö '
InvalidOperationException
öö ,
ex
öö- /
)
öö/ 0
{
õõ 
Debug
úú 
.
úú 
	WriteLine
úú 
(
úú  
$"
úú  "
$str
úú" R
{
úúR S
ex
úúS U
.
úúU V
Message
úúV ]
}
úú] ^
"
úú^ _
)
úú_ `
;
úú` a
MessageHelper
ûû 
.
ûû 
	ShowPopup
ûû '
(
ûû' (
MessageTranslator
üü %
.
üü% &!
GetLocalizedMessage
üü& 9
(
üü9 :
$str
üü: O
)
üüO P
,
üüP Q
$str
†† 
)
°° 
;
°° 
}
¢¢ 
catch
££ 
(
££ 
	Exception
££ 
ex
££ 
)
££  
{
§§ 
Debug
•• 
.
•• 
	WriteLine
•• 
(
••  
$"
••  "
$str
••" I
{
••I J
ex
••J L
.
••L M
Message
••M T
}
••T U
"
••U V
)
••V W
;
••W X
MessageHelper
ßß 
.
ßß 
	ShowPopup
ßß '
(
ßß' (
MessageTranslator
®® %
.
®®% &!
GetLocalizedMessage
®®& 9
(
®®9 :
$str
®®: L
)
®®L M
,
®®M N
$str
©© 
)
™™ 
;
™™ 
}
´´ 
}
¨¨ 	
private
ØØ 
void
ØØ 
OnLanguageClick
ØØ $
(
ØØ$ %
object
ØØ% +
sender
ØØ, 2
,
ØØ2 3
RoutedEventArgs
ØØ4 C
e
ØØD E
)
ØØE F
{
∞∞ 	
try
±± 
{
≤≤ 
NavigationService
≥≥ !
?
≥≥! "
.
≥≥" #
Navigate
≥≥# +
(
≥≥+ ,
new
≥≥, /
SelectLanguage
≥≥0 >
(
≥≥> ?
)
≥≥? @
)
≥≥@ A
;
≥≥A B
}
¥¥ 
catch
µµ 
(
µµ '
InvalidOperationException
µµ ,
ex
µµ- /
)
µµ/ 0
{
∂∂ 
Debug
∑∑ 
.
∑∑ 
	WriteLine
∑∑ 
(
∑∑  
$"
∑∑  "
$str
∑∑" U
{
∑∑U V
ex
∑∑V X
.
∑∑X Y
Message
∑∑Y `
}
∑∑` a
"
∑∑a b
)
∑∑b c
;
∑∑c d
MessageHelper
ππ 
.
ππ 
	ShowPopup
ππ '
(
ππ' (
MessageTranslator
∫∫ %
.
∫∫% &!
GetLocalizedMessage
∫∫& 9
(
∫∫9 :
$str
∫∫: O
)
∫∫O P
,
∫∫P Q
$str
ªª 
)
ºº 
;
ºº 
}
ΩΩ 
catch
ææ 
(
ææ 
	Exception
ææ 
ex
ææ 
)
ææ  
{
øø 
Debug
¿¿ 
.
¿¿ 
	WriteLine
¿¿ 
(
¿¿  
$"
¿¿  "
$str
¿¿" L
{
¿¿L M
ex
¿¿M O
.
¿¿O P
Message
¿¿P W
}
¿¿W X
"
¿¿X Y
)
¿¿Y Z
;
¿¿Z [
MessageHelper
¬¬ 
.
¬¬ 
	ShowPopup
¬¬ '
(
¬¬' (
MessageTranslator
√√ %
.
√√% &!
GetLocalizedMessage
√√& 9
(
√√9 :
$str
√√: L
)
√√L M
,
√√M N
$str
ƒƒ 
)
≈≈ 
;
≈≈ 
}
∆∆ 
}
«« 	
private
ÀÀ 
void
ÀÀ "
UpdateProfileDisplay
ÀÀ )
(
ÀÀ) *
)
ÀÀ* +
{
ÃÃ 	
try
ÕÕ 
{
ŒŒ 
if
œœ 
(
œœ 
_profile
œœ 
==
œœ 
null
œœ  $
)
œœ$ %
{
–– 
return
—— 
;
—— 
}
““ 
UsernameTextBlock
‘‘ !
.
‘‘! "
Text
‘‘" &
=
‘‘' (
_profile
‘‘) 1
.
‘‘1 2
Username
‘‘2 :
;
‘‘: ;
FullNameTextBlock
’’ !
.
’’! "
Text
’’" &
=
’’' (
$"
’’) +
{
’’+ ,
_profile
’’, 4
.
’’4 5
Name
’’5 9
}
’’9 :
$str
’’: ;
{
’’; <
_profile
’’< D
.
’’D E
LastName
’’E M
}
’’M N
"
’’N O
;
’’O P
EmailTextBlock
÷÷ 
.
÷÷ 
Text
÷÷ #
=
÷÷$ %
_profile
÷÷& .
.
÷÷. /
Email
÷÷/ 4
;
÷÷4 5
}
◊◊ 
catch
ÿÿ 
(
ÿÿ 
	Exception
ÿÿ 
ex
ÿÿ 
)
ÿÿ  
{
ŸŸ 
Debug
⁄⁄ 
.
⁄⁄ 
	WriteLine
⁄⁄ 
(
⁄⁄  
$"
⁄⁄  "
$str
⁄⁄" G
{
⁄⁄G H
ex
⁄⁄H J
.
⁄⁄J K
Message
⁄⁄K R
}
⁄⁄R S
"
⁄⁄S T
)
⁄⁄T U
;
⁄⁄U V
MessageHelper
‹‹ 
.
‹‹ 
	ShowPopup
‹‹ '
(
‹‹' (
MessageTranslator
›› %
.
››% &!
GetLocalizedMessage
››& 9
(
››9 :
$str
››: L
)
››L M
,
››M N
$str
ﬁﬁ 
)
ﬂﬂ 
;
ﬂﬂ 
}
‡‡ 
}
·· 	
}
‚‚ 
}„„ ⁄C
fC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Pages\ProfileUser.xaml.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
Pages  %
{		 
public

 

partial

 
class

 
ProfileUser

 $
:

% &
Page

' +
{ 
public 
ProfileUser 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
private 
void 
OnBackClick  
(  !
object! '
sender( .
,. /
RoutedEventArgs0 ?
e@ A
)A B
{ 	
try 
{ 
if 
( 
NavigationService %
?% &
.& '
	CanGoBack' 0
==1 3
true4 8
)8 9
{ 
NavigationService %
.% &
GoBack& ,
(, -
)- .
;. /
} 
else 
{ 
MessageHelper !
.! "
	ShowPopup" +
(+ ,
MessageTranslator )
.) *
GetLocalizedMessage* =
(= >
$str> S
)S T
,T U
$str !
) 
; 
}   
}!! 
catch"" 
("" %
InvalidOperationException"" ,
ex""- /
)""/ 0
{## 
Debug$$ 
.$$ 
	WriteLine$$ 
($$  
$"$$  "
$str$$" O
{$$O P
ex$$P R
.$$R S
Message$$S Z
}$$Z [
"$$[ \
)$$\ ]
;$$] ^
MessageHelper&& 
.&& 
	ShowPopup&& '
(&&' (
MessageTranslator'' %
.''% &
GetLocalizedMessage''& 9
(''9 :
$str'': O
)''O P
,''P Q
$str(( 
))) 
;)) 
}** 
catch++ 
(++ 
	Exception++ 
ex++ 
)++  
{,, 
Debug-- 
.-- 
	WriteLine-- 
(--  
$"--  "
$str--" F
{--F G
ex--G I
.--I J
Message--J Q
}--Q R
"--R S
)--S T
;--T U
MessageHelper// 
.// 
	ShowPopup// '
(//' (
MessageTranslator00 %
.00% &
GetLocalizedMessage00& 9
(009 :
$str00: L
)00L M
,00M N
$str11 
)22 
;22 
}33 
}44 	
private77 
void77 
OnSoundClick77 !
(77! "
object77" (
sender77) /
,77/ 0
RoutedEventArgs771 @
e77A B
)77B C
{88 	
try99 
{:: 
NavigationService;; !
?;;! "
.;;" #
Navigate;;# +
(;;+ ,
new;;, /

ConfiSound;;0 :
(;;: ;
);;; <
);;< =
;;;= >
}<< 
catch== 
(== %
InvalidOperationException== ,
ex==- /
)==/ 0
{>> 
Debug?? 
.?? 
	WriteLine?? 
(??  
$"??  "
$str??" P
{??P Q
ex??Q S
.??S T
Message??T [
}??[ \
"??\ ]
)??] ^
;??^ _
MessageHelperAA 
.AA 
	ShowPopupAA '
(AA' (
MessageTranslatorBB %
.BB% &
GetLocalizedMessageBB& 9
(BB9 :
$strBB: O
)BBO P
,BBP Q
$strCC 
)DD 
;DD 
}EE 
catchFF 
(FF 
	ExceptionFF 
exFF 
)FF  
{GG 
DebugHH 
.HH 
	WriteLineHH 
(HH  
$"HH  "
$strHH" G
{HHG H
exHHH J
.HHJ K
MessageHHK R
}HHR S
"HHS T
)HHT U
;HHU V
MessageHelperJJ 
.JJ 
	ShowPopupJJ '
(JJ' (
MessageTranslatorKK %
.KK% &
GetLocalizedMessageKK& 9
(KK9 :
$strKK: L
)KKL M
,KKM N
$strLL 
)MM 
;MM 
}NN 
}OO 	
privateSS 
voidSS 
OnLanguageClickSS $
(SS$ %
objectSS% +
senderSS, 2
,SS2 3
RoutedEventArgsSS4 C
eSSD E
)SSE F
{TT 	
tryUU 
{VV 
NavigationServiceWW !
?WW! "
.WW" #
NavigateWW# +
(WW+ ,
newWW, /
SelectLanguageWW0 >
(WW> ?
)WW? @
)WW@ A
;WWA B
}XX 
catchYY 
(YY %
InvalidOperationExceptionYY ,
exYY- /
)YY/ 0
{ZZ 
Debug[[ 
.[[ 
	WriteLine[[ 
([[  
$"[[  "
$str[[" S
{[[S T
ex[[T V
.[[V W
Message[[W ^
}[[^ _
"[[_ `
)[[` a
;[[a b
MessageHelper]] 
.]] 
	ShowPopup]] '
(]]' (
MessageTranslator^^ %
.^^% &
GetLocalizedMessage^^& 9
(^^9 :
$str^^: O
)^^O P
,^^P Q
$str__ 
)`` 
;`` 
}aa 
catchbb 
(bb 
	Exceptionbb 
exbb 
)bb  
{cc 
Debugdd 
.dd 
	WriteLinedd 
(dd  
$"dd  "
$strdd" J
{ddJ K
exddK M
.ddM N
MessageddN U
}ddU V
"ddV W
)ddW X
;ddX Y
MessageHelperff 
.ff 
	ShowPopupff '
(ff' (
MessageTranslatorgg %
.gg% &
GetLocalizedMessagegg& 9
(gg9 :
$strgg: L
)ggL M
,ggM N
$strhh 
)ii 
;ii 
}jj 
}kk 	
privateoo 
voidoo 
OnDeleteFriendClickoo (
(oo( )
objectoo) /
senderoo0 6
,oo6 7
RoutedEventArgsoo8 G
eooH I
)ooI J
{pp 	
tryqq 
{rr 
MessageHelperss 
.ss 
	ShowPopupss '
(ss' (
MessageTranslatortt %
.tt% &
GetLocalizedMessagett& 9
(tt9 :
$strtt: M
)ttM N
,ttN O
$struu 
)vv 
;vv 
}ww 
catchxx 
(xx 
	Exceptionxx 
exxx 
)xx  
{yy 
Debugzz 
.zz 
	WriteLinezz 
(zz  
$"zz  "
$strzz" D
{zzD E
exzzE G
.zzG H
MessagezzH O
}zzO P
"zzP Q
)zzQ R
;zzR S
MessageHelper|| 
.|| 
	ShowPopup|| '
(||' (
MessageTranslator}} %
.}}% &
GetLocalizedMessage}}& 9
(}}9 :
$str}}: L
)}}L M
,}}M N
$str~~ 
) 
; 
}
ÄÄ 
}
ÅÅ 	
private
ÑÑ 
void
ÑÑ  
OnSendMessageClick
ÑÑ '
(
ÑÑ' (
object
ÑÑ( .
sender
ÑÑ/ 5
,
ÑÑ5 6
RoutedEventArgs
ÑÑ7 F
e
ÑÑG H
)
ÑÑH I
{
ÖÖ 	
try
ÜÜ 
{
áá 
MessageHelper
àà 
.
àà 
	ShowPopup
àà '
(
àà' (
MessageTranslator
ââ %
.
ââ% &!
GetLocalizedMessage
ââ& 9
(
ââ9 :
$str
ââ: N
)
ââN O
,
ââO P
$str
ää 
)
ãã 
;
ãã 
}
åå 
catch
çç 
(
çç 
	Exception
çç 
ex
çç 
)
çç  
{
éé 
Debug
èè 
.
èè 
	WriteLine
èè 
(
èè  
$"
èè  "
$str
èè" C
{
èèC D
ex
èèD F
.
èèF G
Message
èèG N
}
èèN O
"
èèO P
)
èèP Q
;
èèQ R
MessageHelper
ëë 
.
ëë 
	ShowPopup
ëë '
(
ëë' (
MessageTranslator
íí %
.
íí% &!
GetLocalizedMessage
íí& 9
(
íí9 :
$str
íí: L
)
ííL M
,
ííM N
$str
ìì 
)
îî 
;
îî 
}
ïï 
}
ññ 	
}
óó 
}òò ™%
iC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Pages\SelectLanguage.xaml.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
Pages  %
{		 
public

 

partial

 
class

 
SelectLanguage

 '
:

( )
Page

* .
{ 
public 
SelectLanguage 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
private 
void 
OnApplyClick !
(! "
object" (
sender) /
,/ 0
RoutedEventArgs1 @
eA B
)B C
{ 	
try 
{ 
if 
( 
LanguageComboBox $
.$ %
SelectedItem% 1
is2 4
ComboBoxItem5 A
selectedItemB N
)N O
{ 
string 
languageCode '
=( )
selectedItem* 6
.6 7
Tag7 :
.: ;
ToString; C
(C D
)D E
;E F
LanguageManager #
.# $
ChangeLanguage$ 2
(2 3
languageCode3 ?
)? @
;@ A
MessageHelper !
.! "
	ShowPopup" +
(+ ,
MessageTranslator )
.) *
GetLocalizedMessage* =
(= >
$str> M
)M N
,N O
$str   !
)!! 
;!! 
}"" 
else## 
{$$ 
MessageHelper%% !
.%%! "
	ShowPopup%%" +
(%%+ ,
MessageTranslator&& )
.&&) *
GetLocalizedMessage&&* =
(&&= >
$str&&> W
)&&W X
,&&X Y
$str'' !
)(( 
;(( 
})) 
}** 
catch++ 
(++ 
	Exception++ 
ex++ 
)++  
{,, 
Debug-- 
.-- 
	WriteLine-- 
(--  
$"--  "
$str--" @
{--@ A
ex--A C
.--C D
Message--D K
}--K L
"--L M
)--M N
;--N O
MessageHelper// 
.// 
	ShowPopup// '
(//' (
MessageTranslator00 %
.00% &
GetLocalizedMessage00& 9
(009 :
$str00: L
)00L M
,00M N
$str11 
)22 
;22 
}33 
}44 	
private88 
void88 
OnBackClick88  
(88  !
object88! '
sender88( .
,88. /
RoutedEventArgs880 ?
e88@ A
)88A B
{99 	
try:: 
{;; 
if<< 
(<< 
NavigationService<< %
?<<% &
.<<& '
	CanGoBack<<' 0
==<<1 3
true<<4 8
)<<8 9
{== 
NavigationService>> %
.>>% &
GoBack>>& ,
(>>, -
)>>- .
;>>. /
}?? 
else@@ 
{AA 
MessageHelperBB !
.BB! "
	ShowPopupBB" +
(BB+ ,
MessageTranslatorCC )
.CC) *
GetLocalizedMessageCC* =
(CC= >
$strCC> S
)CCS T
,CCT U
$strDD !
)EE 
;EE 
}FF 
}GG 
catchHH 
(HH %
InvalidOperationExceptionHH ,
exHH- /
)HH/ 0
{II 
DebugJJ 
.JJ 
	WriteLineJJ 
(JJ  
$"JJ  "
$strJJ" R
{JJR S
exJJS U
.JJU V
MessageJJV ]
}JJ] ^
"JJ^ _
)JJ_ `
;JJ` a
MessageHelperLL 
.LL 
	ShowPopupLL '
(LL' (
MessageTranslatorMM %
.MM% &
GetLocalizedMessageMM& 9
(MM9 :
$strMM: O
)MMO P
,MMP Q
$strNN 
)OO 
;OO 
}PP 
catchQQ 
(QQ 
	ExceptionQQ 
exQQ 
)QQ  
{RR 
DebugSS 
.SS 
	WriteLineSS 
(SS  
$"SS  "
$strSS" I
{SSI J
exSSJ L
.SSL M
MessageSSM T
}SST U
"SSU V
)SSV W
;SSW X
MessageHelperUU 
.UU 
	ShowPopupUU '
(UU' (
MessageTranslatorVV %
.VV% &
GetLocalizedMessageVV& 9
(VV9 :
$strVV: L
)VVL M
,VVM N
$strWW 
)XX 
;XX 
}YY 
}ZZ 	
}[[ 
}\\ √…
`C:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Pages\Login.xaml.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
Pages  %
{ 
public 

partial 
class 
Login 
:  
Page! %
{ 
public 
Login 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
private 
void 
OnLoginClick !
(! "
object" (
sender) /
,/ 0
RoutedEventArgs1 @
eA B
)B C
{ 	
LoadingWindow 
loadingWindow '
=( )
null* .
;. /
try 
{ 
var 
( 
username 
, 
password '
)' (
=) *
GetCredentials+ 9
(9 :
): ;
;; <
if 
( 
! 
ValidateCredentials (
(( )
username) 1
,1 2
password3 ;
); <
)< =
{ 
return 
; 
}   
string"" 
hashedPassword"" %
=""& '
Hasher""( .
."". /
HashPassword""/ ;
(""; <
password""< D
)""D E
;""E F
loadingWindow'' 
='' 
new''  #
LoadingWindow''$ 1
{(( 
Owner)) 
=)) 
Application)) '
.))' (
Current))( /
.))/ 0

MainWindow))0 :
}** 
;** 
loadingWindow++ 
.++ 
Show++ "
(++" #
)++# $
;++$ %
var-- 
client-- 
=-- 
CreateLoginClient-- .
(--. /
out--/ 2
var--3 6
callback--7 ?
)--? @
;--@ A
ConfigureCallback.. !
(..! "
callback.." *
,..* +
loadingWindow.., 9
)..9 :
;..: ;
ExecuteLogin00 
(00 
client00 #
,00# $
username00% -
,00- .
hashedPassword00/ =
)00= >
;00> ?
}11 
catch22 
(22 %
EndpointNotFoundException22 ,
ex22- /
)22/ 0
{33 
Debug44 
.44 
	WriteLine44 
(44  
$"44  "
$str44" J
{44J K
ex44K M
.44M N
Message44N U
}44U V
"44V W
)44W X
;44X Y
loadingWindow55 
?55 
.55 
Close55 $
(55$ %
)55% &
;55& '
MessageHelper77 
.77 
	ShowPopup77 '
(77' (
MessageTranslator88 %
.88% &
GetLocalizedMessage88& 9
(889 :
$str88: Q
)88Q R
,88R S
$str99 
):: 
;:: 
};; 
catch<< 
(<< 
TimeoutException<< #
ex<<$ &
)<<& '
{== 
Debug>> 
.>> 
	WriteLine>> 
(>>  
$">>  "
$str>>" A
{>>A B
ex>>B D
.>>D E
Message>>E L
}>>L M
">>M N
)>>N O
;>>O P
loadingWindow?? 
??? 
.?? 
Close?? $
(??$ %
)??% &
;??& '
MessageHelperAA 
.AA 
	ShowPopupAA '
(AA' (
MessageTranslatorBB %
.BB% &
GetLocalizedMessageBB& 9
(BB9 :
$strBB: N
)BBN O
,BBO P
$strCC 
)DD 
;DD 
}EE 
catchFF 
(FF "
CommunicationExceptionFF )
exFF* ,
)FF, -
{GG 
DebugHH 
.HH 
	WriteLineHH 
(HH  
$"HH  "
$strHH" G
{HHG H
exHHH J
.HHJ K
MessageHHK R
}HHR S
"HHS T
)HHT U
;HHU V
loadingWindowII 
?II 
.II 
CloseII $
(II$ %
)II% &
;II& '
MessageHelperKK 
.KK 
	ShowPopupKK '
(KK' (
MessageTranslatorLL %
.LL% &
GetLocalizedMessageLL& 9
(LL9 :
$strLL: Q
)LLQ R
,LLR S
$strMM 
)NN 
;NN 
}OO 
catchPP 
(PP 
	ExceptionPP 
exPP 
)PP  
{QQ 
DebugRR 
.RR 
	WriteLineRR 
(RR  
$"RR  "
$strRR" A
{RRA B
exRRB D
.RRD E
MessageRRE L
}RRL M
"RRM N
)RRN O
;RRO P
loadingWindowSS 
?SS 
.SS 
CloseSS $
(SS$ %
)SS% &
;SS& '
MessageHelperUU 
.UU 
	ShowPopupUU '
(UU' (
MessageTranslatorVV %
.VV% &
GetLocalizedMessageVV& 9
(VV9 :
$strVV: L
)VVL M
,VVM N
$strWW 
)XX 
;XX 
}YY 
}ZZ 	
privatebb 
(bb 
stringbb 
usernamebb  
,bb  !
stringbb" (
passwordbb) 1
)bb1 2
GetCredentialsbb3 A
(bbA B
)bbB C
{cc 	
stringdd 
usernamedd 
=dd 
txtUsernamedd )
.dd) *
Textdd* .
.dd. /
Trimdd/ 3
(dd3 4
)dd4 5
;dd5 6
stringee 
passwordee 
=ee 
txtPasswordee )
.ee) *
Passwordee* 2
.ee2 3
Trimee3 7
(ee7 8
)ee8 9
;ee9 :
returnff 
(ff 
usernameff 
,ff 
passwordff &
)ff& '
;ff' (
}gg 	
privatemm 
boolmm 
ValidateCredentialsmm (
(mm( )
stringmm) /
usernamemm0 8
,mm8 9
stringmm: @
passwordmmA I
)mmI J
{nn 	
ifoo 
(oo 
stringoo 
.oo 
IsNullOrWhiteSpaceoo )
(oo) *
usernameoo* 2
)oo2 3
||oo4 6
stringpp 
.pp 
IsNullOrWhiteSpacepp )
(pp) *
passwordpp* 2
)pp2 3
)pp3 4
{qq 
MessageHelperrr 
.rr 
	ShowPopuprr '
(rr' (
MessageTranslatorss %
.ss% &
GetLocalizedMessagess& 9
(ss9 :
$strss: P
)ssP Q
,ssQ R
$strtt 
)uu 
;uu 
returnvv 
falsevv 
;vv 
}ww 
return
ää 
true
ää 
;
ää 
}
ãã 	
private
èè 
LogInServiceProxy
èè !
.
èè! " 
LoginServiceClient
èè" 4
CreateLoginClient
èè5 F
(
èèF G
out
èèG J"
LoginCallbackHandler
èèK _
callback
èè` h
)
èèh i
{
êê 	
callback
ëë 
=
ëë 
new
ëë "
LoginCallbackHandler
ëë /
(
ëë/ 0
)
ëë0 1
;
ëë1 2
var
íí 
context
íí 
=
íí 
new
íí 
InstanceContext
íí -
(
íí- .
callback
íí. 6
)
íí6 7
;
íí7 8
return
ìì 
new
ìì 
LogInServiceProxy
ìì (
.
ìì( ) 
LoginServiceClient
ìì) ;
(
ìì; <
context
ìì< C
)
ììC D
;
ììD E
}
îî 	
private
òò 
void
òò 
ConfigureCallback
òò &
(
òò& '"
LoginCallbackHandler
òò' ;
callback
òò< D
,
òòD E
LoadingWindow
òòF S
loadingWindow
òòT a
)
òòa b
{
ôô 	
callback
õõ 
.
õõ 
LoginSuccess
õõ !
+=
õõ" $
async
õõ% *
profile
õõ+ 2
=>
õõ3 5
{
úú 
try
ùù 
{
ûû 
await
†† 
loadingWindow
†† '
.
††' (
WaitMinimumAsync
††( 8
(
††8 9
)
††9 :
;
††: ;
}
°° 
catch
¢¢ 
(
¢¢ 
	Exception
¢¢  
ex
¢¢! #
)
¢¢# $
{
££ 
Debug
§§ 
.
§§ 
	WriteLine
§§ #
(
§§# $
$"
§§$ &
$str
§§& L
{
§§L M
ex
§§M O
.
§§O P
Message
§§P W
}
§§W X
"
§§X Y
)
§§Y Z
;
§§Z [
}
•• 
Application
ßß 
.
ßß 
Current
ßß #
.
ßß# $

Dispatcher
ßß$ .
.
ßß. /
Invoke
ßß/ 5
(
ßß5 6
(
ßß6 7
)
ßß7 8
=>
ßß9 ;
{
®® 
try
©© 
{
™™ 
if
´´ 
(
´´ 
loadingWindow
´´ )
.
´´) *
	IsVisible
´´* 3
)
´´3 4
{
¨¨ 
loadingWindow
≠≠ )
.
≠≠) *
Close
≠≠* /
(
≠≠/ 0
)
≠≠0 1
;
≠≠1 2
}
ÆÆ 
var
∞∞ 
convertedProfile
∞∞ ,
=
∞∞- .
new
∞∞/ 2(
AccountManagerServiceProxy
∞∞3 M
.
∞∞M N
PublicProfile
∞∞N [
{
±± 
Name
≤≤  
=
≤≤! "
profile
≤≤# *
.
≤≤* +
Name
≤≤+ /
,
≤≤/ 0
Username
≥≥ $
=
≥≥% &
profile
≥≥' .
.
≥≥. /
Username
≥≥/ 7
,
≥≥7 8
Email
¥¥ !
=
¥¥" #
profile
¥¥$ +
.
¥¥+ ,
Email
¥¥, 1
,
¥¥1 2
LastName
µµ $
=
µµ% &
profile
µµ' .
.
µµ. /
LastName
µµ/ 7
,
µµ7 8
	SocialUrl
∂∂ %
=
∂∂& '
profile
∂∂( /
.
∂∂/ 0
	SocialUrl
∂∂0 9
,
∂∂9 :
}
∑∑ 
;
∑∑ 
ClientSession
ππ %
.
ππ% &

Initialize
ππ& 0
(
ππ0 1
profile
ππ1 8
)
ππ8 9
;
ππ9 :
var
ªª 
menuPage
ªª $
=
ªª% &
new
ªª' *"
MenuRegisteredPlayer
ªª+ ?
(
ªª? @
convertedProfile
ªª@ P
)
ªªP Q
;
ªªQ R
NavigationService
ºº )
?
ºº) *
.
ºº* +
Navigate
ºº+ 3
(
ºº3 4
menuPage
ºº4 <
)
ºº< =
;
ºº= >
}
ΩΩ 
catch
ææ 
(
ææ '
InvalidOperationException
ææ 4
ex
ææ5 7
)
ææ7 8
{
øø 
Debug
¿¿ 
.
¿¿ 
	WriteLine
¿¿ '
(
¿¿' (
$"
¿¿( *
$str
¿¿* U
{
¿¿U V
ex
¿¿V X
.
¿¿X Y
Message
¿¿Y `
}
¿¿` a
"
¿¿a b
)
¿¿b c
;
¿¿c d
MessageHelper
¬¬ %
.
¬¬% &
	ShowPopup
¬¬& /
(
¬¬/ 0
MessageTranslator
√√ -
.
√√- .!
GetLocalizedMessage
√√. A
(
√√A B
$str
√√B W
)
√√W X
,
√√X Y
$str
ƒƒ #
)
≈≈ 
;
≈≈ 
}
∆∆ 
catch
«« 
(
«« 
	Exception
«« $
ex
««% '
)
««' (
{
»» 
Debug
…… 
.
…… 
	WriteLine
…… '
(
……' (
$"
……( *
$str
……* L
{
……L M
ex
……M O
.
……O P
Message
……P W
}
……W X
"
……X Y
)
……Y Z
;
……Z [
MessageHelper
ÀÀ %
.
ÀÀ% &
	ShowPopup
ÀÀ& /
(
ÀÀ/ 0
MessageTranslator
ÃÃ -
.
ÃÃ- .!
GetLocalizedMessage
ÃÃ. A
(
ÃÃA B
$str
ÃÃB T
)
ÃÃT U
,
ÃÃU V
$str
ÕÕ #
)
ŒŒ 
;
ŒŒ 
}
œœ 
}
–– 
)
–– 
;
–– 
}
—— 
;
—— 
callback
‘‘ 
.
‘‘ 

LoginError
‘‘ 
+=
‘‘  "
async
‘‘# (
code
‘‘) -
=>
‘‘. 0
{
’’ 
string
÷÷ 
msg
÷÷ 
=
÷÷ 
MessageTranslator
÷÷ .
.
÷÷. /!
GetLocalizedMessage
÷÷/ B
(
÷÷B C
code
÷÷C G
)
÷÷G H
;
÷÷H I
try
ÿÿ 
{
ŸŸ 
await
€€ 
loadingWindow
€€ '
.
€€' (
WaitMinimumAsync
€€( 8
(
€€8 9
)
€€9 :
;
€€: ;
}
‹‹ 
catch
›› 
(
›› 
	Exception
››  
ex
››! #
)
››# $
{
ﬁﬁ 
Debug
ﬂﬂ 
.
ﬂﬂ 
	WriteLine
ﬂﬂ #
(
ﬂﬂ# $
$"
ﬂﬂ$ &
$str
ﬂﬂ& J
{
ﬂﬂJ K
ex
ﬂﬂK M
.
ﬂﬂM N
Message
ﬂﬂN U
}
ﬂﬂU V
"
ﬂﬂV W
)
ﬂﬂW X
;
ﬂﬂX Y
}
‡‡ 
Application
‚‚ 
.
‚‚ 
Current
‚‚ #
.
‚‚# $

Dispatcher
‚‚$ .
.
‚‚. /
Invoke
‚‚/ 5
(
‚‚5 6
(
‚‚6 7
)
‚‚7 8
=>
‚‚9 ;
{
„„ 
if
‰‰ 
(
‰‰ 
loadingWindow
‰‰ %
.
‰‰% &
	IsVisible
‰‰& /
)
‰‰/ 0
{
ÂÂ 
loadingWindow
ÊÊ %
.
ÊÊ% &
Close
ÊÊ& +
(
ÊÊ+ ,
)
ÊÊ, -
;
ÊÊ- .
}
ÁÁ 
MessageHelper
ÈÈ !
.
ÈÈ! "
	ShowPopup
ÈÈ" +
(
ÈÈ+ ,
msg
ÍÍ 
,
ÍÍ 
$str
ÎÎ !
)
ÏÏ 
;
ÏÏ 
}
ÌÌ 
)
ÌÌ 
;
ÌÌ 
}
ÓÓ 
;
ÓÓ 
}
ÔÔ 	
private
ˆˆ 
void
ˆˆ 
ExecuteLogin
ˆˆ !
(
ˆˆ! "
LogInServiceProxy
ˆˆ" 3
.
ˆˆ3 4 
LoginServiceClient
ˆˆ4 F
client
ˆˆG M
,
ˆˆM N
string
ˆˆO U
username
ˆˆV ^
,
ˆˆ^ _
string
ˆˆ` f
hashedPassword
ˆˆg u
)
ˆˆu v
{
˜˜ 	
try
¯¯ 
{
˘˘ 
var
˙˙ 
loginRequest
˙˙  
=
˙˙! "
new
˙˙# &
LogInServiceProxy
˙˙' 8
.
˙˙8 9
LoginRequest
˙˙9 E
{
˚˚ 
Username
¸¸ 
=
¸¸ 
username
¸¸ '
,
¸¸' (
Password
˝˝ 
=
˝˝ 
hashedPassword
˝˝ -
}
˛˛ 
;
˛˛ 
client
ÄÄ 
.
ÄÄ 
Login
ÄÄ 
(
ÄÄ 
loginRequest
ÄÄ )
)
ÄÄ) *
;
ÄÄ* +
}
ÅÅ 
catch
ÇÇ 
(
ÇÇ $
CommunicationException
ÇÇ )
ex
ÇÇ* ,
)
ÇÇ, -
{
ÉÉ 
Debug
ÑÑ 
.
ÑÑ 
	WriteLine
ÑÑ 
(
ÑÑ  
$"
ÑÑ  "
$str
ÑÑ" G
{
ÑÑG H
ex
ÑÑH J
.
ÑÑJ K
Message
ÑÑK R
}
ÑÑR S
"
ÑÑS T
)
ÑÑT U
;
ÑÑU V
MessageHelper
ÜÜ 
.
ÜÜ 
	ShowPopup
ÜÜ '
(
ÜÜ' (
MessageTranslator
áá %
.
áá% &!
GetLocalizedMessage
áá& 9
(
áá9 :
$str
áá: Q
)
ááQ R
,
ááR S
$str
àà 
)
ââ 
;
ââ 
}
ää 
catch
ãã 
(
ãã 
TimeoutException
ãã #
ex
ãã$ &
)
ãã& '
{
åå 
Debug
çç 
.
çç 
	WriteLine
çç 
(
çç  
$"
çç  "
$str
çç" A
{
ççA B
ex
ççB D
.
ççD E
Message
ççE L
}
ççL M
"
ççM N
)
ççN O
;
ççO P
MessageHelper
èè 
.
èè 
	ShowPopup
èè '
(
èè' (
MessageTranslator
êê %
.
êê% &!
GetLocalizedMessage
êê& 9
(
êê9 :
$str
êê: N
)
êêN O
,
êêO P
$str
ëë 
)
íí 
;
íí 
}
ìì 
catch
îî 
(
îî 
	Exception
îî 
ex
îî 
)
îî  
{
ïï 
Debug
ññ 
.
ññ 
	WriteLine
ññ 
(
ññ  
$"
ññ  "
$str
ññ" A
{
ññA B
ex
ññB D
.
ññD E
Message
ññE L
}
ññL M
"
ññM N
)
ññN O
;
ññO P
MessageHelper
òò 
.
òò 
	ShowPopup
òò '
(
òò' (
MessageTranslator
ôô %
.
ôô% &!
GetLocalizedMessage
ôô& 9
(
ôô9 :
$str
ôô: L
)
ôôL M
,
ôôM N
$str
öö 
)
õõ 
;
õõ 
}
úú 
}
ùù 	
private
†† 
void
†† 
	ShowError
†† 
(
†† 
string
†† %
message
††& -
)
††- .
{
°° 	
MessageHelper
¢¢ 
.
¢¢ 
	ShowPopup
¢¢ #
(
¢¢# $
MessageTranslator
££ !
.
££! "!
GetLocalizedMessage
££" 5
(
££5 6
$str
££6 H
)
££H I
,
££I J
$str
§§ 
)
•• 
;
•• 
}
¶¶ 	
private
™™ 
void
™™ 
OnBackClick
™™  
(
™™  !
object
™™! '
sender
™™( .
,
™™. /
RoutedEventArgs
™™0 ?
e
™™@ A
)
™™A B
{
´´ 	
try
¨¨ 
{
≠≠ 
if
ÆÆ 
(
ÆÆ 
NavigationService
ÆÆ %
?
ÆÆ% &
.
ÆÆ& '
	CanGoBack
ÆÆ' 0
==
ÆÆ1 3
true
ÆÆ4 8
)
ÆÆ8 9
{
ØØ 
NavigationService
∞∞ %
.
∞∞% &
GoBack
∞∞& ,
(
∞∞, -
)
∞∞- .
;
∞∞. /
}
±± 
else
≤≤ 
{
≥≥ 
MessageHelper
¥¥ !
.
¥¥! "
	ShowPopup
¥¥" +
(
¥¥+ ,
MessageTranslator
µµ )
.
µµ) *!
GetLocalizedMessage
µµ* =
(
µµ= >
$str
µµ> S
)
µµS T
,
µµT U
$str
∂∂ !
)
∑∑ 
;
∑∑ 
}
∏∏ 
}
ππ 
catch
∫∫ 
(
∫∫ '
InvalidOperationException
∫∫ ,
ex
∫∫- /
)
∫∫/ 0
{
ªª 
Debug
ºº 
.
ºº 
	WriteLine
ºº 
(
ºº  
$"
ºº  "
$str
ºº" I
{
ººI J
ex
ººJ L
.
ººL M
Message
ººM T
}
ººT U
"
ººU V
)
ººV W
;
ººW X
MessageHelper
ææ 
.
ææ 
	ShowPopup
ææ '
(
ææ' (
MessageTranslator
øø %
.
øø% &!
GetLocalizedMessage
øø& 9
(
øø9 :
$str
øø: O
)
øøO P
,
øøP Q
$str
¿¿ 
)
¡¡ 
;
¡¡ 
}
¬¬ 
catch
√√ 
(
√√ 
	Exception
√√ 
ex
√√ 
)
√√  
{
ƒƒ 
Debug
≈≈ 
.
≈≈ 
	WriteLine
≈≈ 
(
≈≈  
$"
≈≈  "
$str
≈≈" @
{
≈≈@ A
ex
≈≈A C
.
≈≈C D
Message
≈≈D K
}
≈≈K L
"
≈≈L M
)
≈≈M N
;
≈≈N O
MessageHelper
«« 
.
«« 
	ShowPopup
«« '
(
««' (
MessageTranslator
»» %
.
»»% &!
GetLocalizedMessage
»»& 9
(
»»9 :
$str
»»: L
)
»»L M
,
»»M N
$str
…… 
)
   
;
   
}
ÀÀ 
}
ÃÃ 	
private
ŒŒ 
void
ŒŒ 
OnLanguageClick
ŒŒ $
(
ŒŒ$ %
object
ŒŒ% +
sender
ŒŒ, 2
,
ŒŒ2 3
RoutedEventArgs
ŒŒ4 C
e
ŒŒD E
)
ŒŒE F
{
œœ 	
try
–– 
{
—— 
NavigationService
““ !
?
““! "
.
““" #
Navigate
““# +
(
““+ ,
new
““, /
SelectLanguage
““0 >
(
““> ?
)
““? @
)
““@ A
;
““A B
}
”” 
catch
‘‘ 
(
‘‘ '
InvalidOperationException
‘‘ ,
ex
‘‘- /
)
‘‘/ 0
{
’’ 
Debug
÷÷ 
.
÷÷ 
	WriteLine
÷÷ 
(
÷÷  
$"
÷÷  "
$str
÷÷" M
{
÷÷M N
ex
÷÷N P
.
÷÷P Q
Message
÷÷Q X
}
÷÷X Y
"
÷÷Y Z
)
÷÷Z [
;
÷÷[ \
MessageHelper
ÿÿ 
.
ÿÿ 
	ShowPopup
ÿÿ '
(
ÿÿ' (
MessageTranslator
ŸŸ %
.
ŸŸ% &!
GetLocalizedMessage
ŸŸ& 9
(
ŸŸ9 :
$str
ŸŸ: O
)
ŸŸO P
,
ŸŸP Q
$str
⁄⁄ 
)
€€ 
;
€€ 
}
‹‹ 
catch
›› 
(
›› 
	Exception
›› 
ex
›› 
)
››  
{
ﬁﬁ 
Debug
ﬂﬂ 
.
ﬂﬂ 
	WriteLine
ﬂﬂ 
(
ﬂﬂ  
$"
ﬂﬂ  "
$str
ﬂﬂ" D
{
ﬂﬂD E
ex
ﬂﬂE G
.
ﬂﬂG H
Message
ﬂﬂH O
}
ﬂﬂO P
"
ﬂﬂP Q
)
ﬂﬂQ R
;
ﬂﬂR S
MessageHelper
·· 
.
·· 
	ShowPopup
·· '
(
··' (
MessageTranslator
‚‚ %
.
‚‚% &!
GetLocalizedMessage
‚‚& 9
(
‚‚9 :
$str
‚‚: L
)
‚‚L M
,
‚‚M N
$str
„„ 
)
‰‰ 
;
‰‰ 
}
ÂÂ 
}
ÊÊ 	
private
ËË 
void
ËË #
OnForgotPasswordClick
ËË *
(
ËË* +
object
ËË+ 1
sender
ËË2 8
,
ËË8 9
RoutedEventArgs
ËË: I
e
ËËJ K
)
ËËK L
{
ÈÈ 	
try
ÍÍ 
{
ÎÎ 
NavigationService
ÏÏ !
?
ÏÏ! "
.
ÏÏ" #
Navigate
ÏÏ# +
(
ÏÏ+ ,
new
ÏÏ, /
ForgotPassword
ÏÏ0 >
(
ÏÏ> ?
)
ÏÏ? @
)
ÏÏ@ A
;
ÏÏA B
}
ÌÌ 
catch
ÓÓ 
(
ÓÓ '
InvalidOperationException
ÓÓ ,
ex
ÓÓ- /
)
ÓÓ/ 0
{
ÔÔ 
Debug
 
.
 
	WriteLine
 
(
  
$"
  "
$str
" S
{
S T
ex
T V
.
V W
Message
W ^
}
^ _
"
_ `
)
` a
;
a b
MessageHelper
ÚÚ 
.
ÚÚ 
	ShowPopup
ÚÚ '
(
ÚÚ' (
MessageTranslator
ÛÛ %
.
ÛÛ% &!
GetLocalizedMessage
ÛÛ& 9
(
ÛÛ9 :
$str
ÛÛ: O
)
ÛÛO P
,
ÛÛP Q
$str
ÙÙ 
)
ıı 
;
ıı 
}
ˆˆ 
catch
˜˜ 
(
˜˜ 
	Exception
˜˜ 
ex
˜˜ 
)
˜˜  
{
¯¯ 
Debug
˘˘ 
.
˘˘ 
	WriteLine
˘˘ 
(
˘˘  
$"
˘˘  "
$str
˘˘" J
{
˘˘J K
ex
˘˘K M
.
˘˘M N
Message
˘˘N U
}
˘˘U V
"
˘˘V W
)
˘˘W X
;
˘˘X Y
MessageHelper
˚˚ 
.
˚˚ 
	ShowPopup
˚˚ '
(
˚˚' (
MessageTranslator
¸¸ %
.
¸¸% &!
GetLocalizedMessage
¸¸& 9
(
¸¸9 :
$str
¸¸: L
)
¸¸L M
,
¸¸M N
$str
˝˝ 
)
˛˛ 
;
˛˛ 
}
ˇˇ 
}
ÄÄ 	
private
ÇÇ 
void
ÇÇ 
OnSoundClick
ÇÇ !
(
ÇÇ! "
object
ÇÇ" (
sender
ÇÇ) /
,
ÇÇ/ 0
RoutedEventArgs
ÇÇ1 @
e
ÇÇA B
)
ÇÇB C
{
ÉÉ 	
try
ÑÑ 
{
ÖÖ 
NavigationService
ÜÜ !
?
ÜÜ! "
.
ÜÜ" #
Navigate
ÜÜ# +
(
ÜÜ+ ,
new
ÜÜ, /

ConfiSound
ÜÜ0 :
(
ÜÜ: ;
)
ÜÜ; <
)
ÜÜ< =
;
ÜÜ= >
}
áá 
catch
àà 
(
àà '
InvalidOperationException
àà ,
ex
àà- /
)
àà/ 0
{
ââ 
Debug
ää 
.
ää 
	WriteLine
ää 
(
ää  
$"
ää  "
$str
ää" J
{
ääJ K
ex
ääK M
.
ääM N
Message
ääN U
}
ääU V
"
ääV W
)
ääW X
;
ääX Y
MessageHelper
åå 
.
åå 
	ShowPopup
åå '
(
åå' (
MessageTranslator
çç %
.
çç% &!
GetLocalizedMessage
çç& 9
(
çç9 :
$str
çç: O
)
ççO P
,
ççP Q
$str
éé 
)
èè 
;
èè 
}
êê 
catch
ëë 
(
ëë 
	Exception
ëë 
ex
ëë 
)
ëë  
{
íí 
Debug
ìì 
.
ìì 
	WriteLine
ìì 
(
ìì  
$"
ìì  "
$str
ìì" A
{
ììA B
ex
ììB D
.
ììD E
Message
ììE L
}
ììL M
"
ììM N
)
ììN O
;
ììO P
MessageHelper
ïï 
.
ïï 
	ShowPopup
ïï '
(
ïï' (
MessageTranslator
ññ %
.
ññ% &!
GetLocalizedMessage
ññ& 9
(
ññ9 :
$str
ññ: L
)
ññL M
,
ññM N
$str
óó 
)
òò 
;
òò 
}
ôô 
}
öö 	
}
õõ 
}úú ∫J
dC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Pages\MenuGuest.xaml.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
Pages  %
{		 
public

 

partial

 
class

 
	MenuGuest

 "
:

# $
Page

% )
{ 
public 
	MenuGuest 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
private 
void 
OnJoinPartyClick %
(% &
object& ,
sender- 3
,3 4
RoutedEventArgs5 D
eE F
)F G
{ 	
try 
{ 
MessageHelper 
. 
	ShowPopup '
(' (
MessageTranslator %
.% &
GetLocalizedMessage& 9
(9 :
$str: P
)P Q
,Q R
$str 
) 
; 
} 
catch 
( 
	Exception 
ex 
)  
{ 
Debug 
. 
	WriteLine 
(  
$"  "
$str" ?
{? @
ex@ B
.B C
MessageC J
}J K
"K L
)L M
;M N
MessageHelper   
.   
	ShowPopup   '
(  ' (
MessageTranslator!! %
.!!% &
GetLocalizedMessage!!& 9
(!!9 :
$str!!: L
)!!L M
,!!M N
$str"" 
)## 
;## 
}$$ 
}%% 	
private** 
void** 
OnHowToPlayClick** %
(**% &
object**& ,
sender**- 3
,**3 4
RoutedEventArgs**5 D
e**E F
)**F G
{++ 	
try,, 
{-- 
MessageHelper.. 
... 
	ShowPopup.. '
(..' (
MessageTranslator// %
.//% &
GetLocalizedMessage//& 9
(//9 :
$str//: S
)//S T
,//T U
$str00 
)11 
;11 
}22 
catch33 
(33 
	Exception33 
ex33 
)33  
{44 
Debug55 
.55 
	WriteLine55 
(55  
$"55  "
$str55" ?
{55? @
ex55@ B
.55B C
Message55C J
}55J K
"55K L
)55L M
;55M N
MessageHelper77 
.77 
	ShowPopup77 '
(77' (
MessageTranslator88 %
.88% &
GetLocalizedMessage88& 9
(889 :
$str88: L
)88L M
,88M N
$str99 
):: 
;:: 
};; 
}<< 	
private@@ 
void@@ 
OnStatisticsClick@@ &
(@@& '
object@@' -
sender@@. 4
,@@4 5
RoutedEventArgs@@6 E
e@@F G
)@@G H
{AA 	
tryBB 
{CC 
MessageHelperDD 
.DD 
	ShowPopupDD '
(DD' (
MessageTranslatorEE %
.EE% &
GetLocalizedMessageEE& 9
(EE9 :
$strEE: U
)EEU V
,EEV W
$strFF 
)GG 
;GG 
}HH 
catchII 
(II 
	ExceptionII 
exII 
)II  
{JJ 
DebugKK 
.KK 
	WriteLineKK 
(KK  
$"KK  "
$strKK" @
{KK@ A
exKKA C
.KKC D
MessageKKD K
}KKK L
"KKL M
)KKM N
;KKN O
MessageHelperMM 
.MM 
	ShowPopupMM '
(MM' (
MessageTranslatorNN %
.NN% &
GetLocalizedMessageNN& 9
(NN9 :
$strNN: L
)NNL M
,NNM N
$strOO 
)PP 
;PP 
}QQ 
}RR 	
privateVV 
voidVV 
OnSoundClickVV !
(VV! "
objectVV" (
senderVV) /
,VV/ 0
RoutedEventArgsVV1 @
eVVA B
)VVB C
{WW 	
tryXX 
{YY 
NavigationServiceZZ !
?ZZ! "
.ZZ" #
NavigateZZ# +
(ZZ+ ,
newZZ, /

ConfiSoundZZ0 :
(ZZ: ;
)ZZ; <
)ZZ< =
;ZZ= >
}[[ 
catch\\ 
(\\ %
InvalidOperationException\\ ,
ex\\- /
)\\/ 0
{]] 
Debug^^ 
.^^ 
	WriteLine^^ 
(^^  
$"^^  "
$str^^" N
{^^N O
ex^^O Q
.^^Q R
Message^^R Y
}^^Y Z
"^^Z [
)^^[ \
;^^\ ]
MessageHelper`` 
.`` 
	ShowPopup`` '
(``' (
MessageTranslatoraa %
.aa% &
GetLocalizedMessageaa& 9
(aa9 :
$straa: O
)aaO P
,aaP Q
$strbb 
)cc 
;cc 
}dd 
catchee 
(ee 
	Exceptionee 
exee 
)ee  
{ff 
Debuggg 
.gg 
	WriteLinegg 
(gg  
$"gg  "
$strgg" E
{ggE F
exggF H
.ggH I
MessageggI P
}ggP Q
"ggQ R
)ggR S
;ggS T
MessageHelperii 
.ii 
	ShowPopupii '
(ii' (
MessageTranslatorjj %
.jj% &
GetLocalizedMessagejj& 9
(jj9 :
$strjj: L
)jjL M
,jjM N
$strkk 
)ll 
;ll 
}mm 
}nn 	
privateqq 
voidqq 
OnBackClickqq  
(qq  !
objectqq! '
senderqq( .
,qq. /
RoutedEventArgsqq0 ?
eqq@ A
)qqA B
{rr 	
tryss 
{tt 
NavigationServiceuu !
?uu! "
.uu" #
Navigateuu# +
(uu+ ,
newuu, /

MainWindowuu0 :
(uu: ;
)uu; <
)uu< =
;uu= >
}vv 
catchww 
(ww %
InvalidOperationExceptionww ,
exww- /
)ww/ 0
{xx 
Debugyy 
.yy 
	WriteLineyy 
(yy  
$"yy  "
$stryy" M
{yyM N
exyyN P
.yyP Q
MessageyyQ X
}yyX Y
"yyY Z
)yyZ [
;yy[ \
MessageHelper{{ 
.{{ 
	ShowPopup{{ '
({{' (
MessageTranslator|| %
.||% &
GetLocalizedMessage||& 9
(||9 :
$str||: O
)||O P
,||P Q
$str}} 
)~~ 
;~~ 
} 
catch
ÄÄ 
(
ÄÄ 
	Exception
ÄÄ 
ex
ÄÄ 
)
ÄÄ  
{
ÅÅ 
Debug
ÇÇ 
.
ÇÇ 
	WriteLine
ÇÇ 
(
ÇÇ  
$"
ÇÇ  "
$str
ÇÇ" D
{
ÇÇD E
ex
ÇÇE G
.
ÇÇG H
Message
ÇÇH O
}
ÇÇO P
"
ÇÇP Q
)
ÇÇQ R
;
ÇÇR S
MessageHelper
ÑÑ 
.
ÑÑ 
	ShowPopup
ÑÑ '
(
ÑÑ' (
MessageTranslator
ÖÖ %
.
ÖÖ% &!
GetLocalizedMessage
ÖÖ& 9
(
ÖÖ9 :
$str
ÖÖ: L
)
ÖÖL M
,
ÖÖM N
$str
ÜÜ 
)
áá 
;
áá 
}
àà 
}
ââ 	
private
çç 
void
çç 
OnLanguageClick
çç $
(
çç$ %
object
çç% +
sender
çç, 2
,
çç2 3
RoutedEventArgs
çç4 C
e
ççD E
)
ççE F
{
éé 	
try
èè 
{
êê 
NavigationService
ëë !
?
ëë! "
.
ëë" #
Navigate
ëë# +
(
ëë+ ,
new
ëë, /
SelectLanguage
ëë0 >
(
ëë> ?
)
ëë? @
)
ëë@ A
;
ëëA B
}
íí 
catch
ìì 
(
ìì '
InvalidOperationException
ìì ,
ex
ìì- /
)
ìì/ 0
{
îî 
Debug
ïï 
.
ïï 
	WriteLine
ïï 
(
ïï  
$"
ïï  "
$str
ïï" Q
{
ïïQ R
ex
ïïR T
.
ïïT U
Message
ïïU \
}
ïï\ ]
"
ïï] ^
)
ïï^ _
;
ïï_ `
MessageHelper
óó 
.
óó 
	ShowPopup
óó '
(
óó' (
MessageTranslator
òò %
.
òò% &!
GetLocalizedMessage
òò& 9
(
òò9 :
$str
òò: O
)
òòO P
,
òòP Q
$str
ôô 
)
öö 
;
öö 
}
õõ 
catch
úú 
(
úú 
	Exception
úú 
ex
úú 
)
úú  
{
ùù 
Debug
ûû 
.
ûû 
	WriteLine
ûû 
(
ûû  
$"
ûû  "
$str
ûû" H
{
ûûH I
ex
ûûI K
.
ûûK L
Message
ûûL S
}
ûûS T
"
ûûT U
)
ûûU V
;
ûûV W
MessageHelper
†† 
.
†† 
	ShowPopup
†† '
(
††' (
MessageTranslator
°° %
.
°°% &!
GetLocalizedMessage
°°& 9
(
°°9 :
$str
°°: L
)
°°L M
,
°°M N
$str
¢¢ 
)
££ 
;
££ 
}
§§ 
}
•• 	
}
¶¶ 
}ßß ﬁR
eC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Pages\MainWindow.xaml.cs
	namespace		 	
DamasChinas_Client		
 
.		 
UI		 
.		  
Pages		  %
{

 
public 

partial 
class 

MainWindow #
:$ %
Page& *
{ 
public 

MainWindow 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
private 
void 
OnExitClick  
(  !
object! '
sender( .
,. /
RoutedEventArgs0 ?
e@ A
)A B
{ 	
try 
{ 
Application 
. 
Current #
.# $
Shutdown$ ,
(, -
)- .
;. /
} 
catch 
( 
	Exception 
ex 
)  
{ 
Debug 
. 
	WriteLine 
(  
$"  "
$str" ;
{; <
ex< >
.> ?
Message? F
}F G
"G H
)H I
;I J
MessageHelper   
.   
	ShowPopup   '
(  ' (
MessageTranslator!! %
.!!% &
GetLocalizedMessage!!& 9
(!!9 :
$str!!: L
)!!L M
,!!M N
$str"" 
)## 
;## 
}$$ 
}%% 	
private)) 
void)) 
OnGoToLoginClick)) %
())% &
object))& ,
sender))- 3
,))3 4
RoutedEventArgs))5 D
e))E F
)))F G
{** 	
try++ 
{,, 
NavigationService-- !
?--! "
.--" #
Navigate--# +
(--+ ,
new--, /
Login--0 5
(--5 6
)--6 7
)--7 8
;--8 9
}.. 
catch// 
(// %
InvalidOperationException// ,
ex//- /
)/// 0
{00 
Debug11 
.11 
	WriteLine11 
(11  
$"11  "
$str11" S
{11S T
ex11T V
.11V W
Message11W ^
}11^ _
"11_ `
)11` a
;11a b
MessageHelper33 
.33 
	ShowPopup33 '
(33' (
MessageTranslator44 %
.44% &
GetLocalizedMessage44& 9
(449 :
$str44: O
)44O P
,44P Q
$str55 
)66 
;66 
}77 
catch88 
(88 
	Exception88 
ex88 
)88  
{99 
Debug:: 
.:: 
	WriteLine:: 
(::  
$"::  "
$str::" J
{::J K
ex::K M
.::M N
Message::N U
}::U V
"::V W
)::W X
;::X Y
MessageHelper<< 
.<< 
	ShowPopup<< '
(<<' (
MessageTranslator== %
.==% &
GetLocalizedMessage==& 9
(==9 :
$str==: L
)==L M
,==M N
$str>> 
)?? 
;?? 
}@@ 
}AA 	
privateCC 
voidCC 
OnGoToSignInClickCC &
(CC& '
objectCC' -
senderCC. 4
,CC4 5
RoutedEventArgsCC6 E
eCCF G
)CCG H
{DD 	
tryEE 
{FF 
NavigationServiceGG !
?GG! "
.GG" #
NavigateGG# +
(GG+ ,
newGG, /
SignInGG0 6
(GG6 7
)GG7 8
)GG8 9
;GG9 :
}HH 
catchII 
(II %
InvalidOperationExceptionII ,
exII- /
)II/ 0
{JJ 
DebugKK 
.KK 
	WriteLineKK 
(KK  
$"KK  "
$strKK" T
{KKT U
exKKU W
.KKW X
MessageKKX _
}KK_ `
"KK` a
)KKa b
;KKb c
MessageHelperMM 
.MM 
	ShowPopupMM '
(MM' (
MessageTranslatorNN %
.NN% &
GetLocalizedMessageNN& 9
(NN9 :
$strNN: O
)NNO P
,NNP Q
$strOO 
)PP 
;PP 
}QQ 
catchRR 
(RR 
	ExceptionRR 
exRR 
)RR  
{SS 
DebugTT 
.TT 
	WriteLineTT 
(TT  
$"TT  "
$strTT" K
{TTK L
exTTL N
.TTN O
MessageTTO V
}TTV W
"TTW X
)TTX Y
;TTY Z
MessageHelperVV 
.VV 
	ShowPopupVV '
(VV' (
MessageTranslatorWW %
.WW% &
GetLocalizedMessageWW& 9
(WW9 :
$strWW: L
)WWL M
,WWM N
$strXX 
)YY 
;YY 
}ZZ 
}[[ 	
private]] 
void]] 
OnPlayAsGuestClick]] '
(]]' (
object]]( .
sender]]/ 5
,]]5 6
RoutedEventArgs]]7 F
e]]G H
)]]H I
{^^ 	
try__ 
{`` 
NavigationServiceaa !
?aa! "
.aa" #
Navigateaa# +
(aa+ ,
newaa, /
	MenuGuestaa0 9
(aa9 :
)aa: ;
)aa; <
;aa< =
}bb 
catchcc 
(cc %
InvalidOperationExceptioncc ,
excc- /
)cc/ 0
{dd 
Debugee 
.ee 
	WriteLineee 
(ee  
$"ee  "
$stree" U
{eeU V
exeeV X
.eeX Y
MessageeeY `
}ee` a
"eea b
)eeb c
;eec d
MessageHelpergg 
.gg 
	ShowPopupgg '
(gg' (
MessageTranslatorhh %
.hh% &
GetLocalizedMessagehh& 9
(hh9 :
$strhh: O
)hhO P
,hhP Q
$strii 
)jj 
;jj 
}kk 
catchll 
(ll 
	Exceptionll 
exll 
)ll  
{mm 
Debugnn 
.nn 
	WriteLinenn 
(nn  
$"nn  "
$strnn" L
{nnL M
exnnM O
.nnO P
MessagennP W
}nnW X
"nnX Y
)nnY Z
;nnZ [
MessageHelperpp 
.pp 
	ShowPopuppp '
(pp' (
MessageTranslatorqq %
.qq% &
GetLocalizedMessageqq& 9
(qq9 :
$strqq: L
)qqL M
,qqM N
$strrr 
)ss 
;ss 
}tt 
}uu 	
privateyy 
voidyy 
OnSoundClickyy !
(yy! "
objectyy" (
senderyy) /
,yy/ 0
RoutedEventArgsyy1 @
eyyA B
)yyB C
{zz 	
try{{ 
{|| 
NavigationService}} !
?}}! "
.}}" #
Navigate}}# +
(}}+ ,
new}}, /

ConfiSound}}0 :
(}}: ;
)}}; <
)}}< =
;}}= >
}~~ 
catch 
( %
InvalidOperationException ,
ex- /
)/ 0
{
ÄÄ 
Debug
ÅÅ 
.
ÅÅ 
	WriteLine
ÅÅ 
(
ÅÅ  
$"
ÅÅ  "
$str
ÅÅ" O
{
ÅÅO P
ex
ÅÅP R
.
ÅÅR S
Message
ÅÅS Z
}
ÅÅZ [
"
ÅÅ[ \
)
ÅÅ\ ]
;
ÅÅ] ^
MessageHelper
ÉÉ 
.
ÉÉ 
	ShowPopup
ÉÉ '
(
ÉÉ' (
MessageTranslator
ÑÑ %
.
ÑÑ% &!
GetLocalizedMessage
ÑÑ& 9
(
ÑÑ9 :
$str
ÑÑ: O
)
ÑÑO P
,
ÑÑP Q
$str
ÖÖ 
)
ÜÜ 
;
ÜÜ 
}
áá 
catch
àà 
(
àà 
	Exception
àà 
ex
àà 
)
àà  
{
ââ 
Debug
ää 
.
ää 
	WriteLine
ää 
(
ää  
$"
ää  "
$str
ää" F
{
ääF G
ex
ääG I
.
ääI J
Message
ääJ Q
}
ääQ R
"
ääR S
)
ääS T
;
ääT U
MessageHelper
åå 
.
åå 
	ShowPopup
åå '
(
åå' (
MessageTranslator
çç %
.
çç% &!
GetLocalizedMessage
çç& 9
(
çç9 :
$str
çç: L
)
ççL M
,
ççM N
$str
éé 
)
èè 
;
èè 
}
êê 
}
ëë 	
private
ïï 
void
ïï 
OnLanguageClick
ïï $
(
ïï$ %
object
ïï% +
sender
ïï, 2
,
ïï2 3
RoutedEventArgs
ïï4 C
e
ïïD E
)
ïïE F
{
ññ 	
try
óó 
{
òò 
NavigationService
ôô !
?
ôô! "
.
ôô" #
Navigate
ôô# +
(
ôô+ ,
new
ôô, /
SelectLanguage
ôô0 >
(
ôô> ?
)
ôô? @
)
ôô@ A
;
ôôA B
}
öö 
catch
õõ 
(
õõ '
InvalidOperationException
õõ ,
ex
õõ- /
)
õõ/ 0
{
úú 
Debug
ùù 
.
ùù 
	WriteLine
ùù 
(
ùù  
$"
ùù  "
$str
ùù" R
{
ùùR S
ex
ùùS U
.
ùùU V
Message
ùùV ]
}
ùù] ^
"
ùù^ _
)
ùù_ `
;
ùù` a
MessageHelper
üü 
.
üü 
	ShowPopup
üü '
(
üü' (
MessageTranslator
†† %
.
††% &!
GetLocalizedMessage
††& 9
(
††9 :
$str
††: O
)
††O P
,
††P Q
$str
°° 
)
¢¢ 
;
¢¢ 
}
££ 
catch
§§ 
(
§§ 
	Exception
§§ 
ex
§§ 
)
§§  
{
•• 
Debug
¶¶ 
.
¶¶ 
	WriteLine
¶¶ 
(
¶¶  
$"
¶¶  "
$str
¶¶" I
{
¶¶I J
ex
¶¶J L
.
¶¶L M
Message
¶¶M T
}
¶¶T U
"
¶¶U V
)
¶¶V W
;
¶¶W X
MessageHelper
®® 
.
®® 
	ShowPopup
®® '
(
®®' (
MessageTranslator
©© %
.
©©% &!
GetLocalizedMessage
©©& 9
(
©©9 :
$str
©©: L
)
©©L M
,
©©M N
$str
™™ 
)
´´ 
;
´´ 
}
¨¨ 
}
≠≠ 	
}
ÆÆ 
}ØØ ±å
bC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Pages\Friends.xaml.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
Pages  %
{ 
public 

partial 
class 
Friends  
:! "
Page# '
{ 
public  
ObservableCollection #
<# $

FriendList$ .
>. /
FriendsList0 ;
{< =
get> A
;A B
}C D
=E F
newG J 
ObservableCollectionK _
<_ `

FriendList` j
>j k
(k l
)l m
;m n
public 
Friends 
( 
string 
username &
)& '
{ 	
InitializeComponent 
(  
)  !
;! "
DataContext 
= 
this 
; 
LoadFriends 
( 
username  
)  !
;! "
} 	
private 
void 
LoadFriends  
(  !
string! '
username( 0
)0 1
{ 	
try 
{   
using!! 
(!! 
var!! 
client!! !
=!!" #
new!!$ '
FriendServiceClient!!( ;
(!!; <
)!!< =
)!!= >
{"" 
var## 
friends## 
=##  !
client##" (
.##( )

GetFriends##) 3
(##3 4
username##4 <
)##< =
;##= >
FriendsList%% 
.%%  
Clear%%  %
(%%% &
)%%& '
;%%' (
foreach'' 
('' 
var''  
friend''! '
in''( *
friends''+ 2
)''2 3
{(( 
FriendsList)) #
.))# $
Add))$ '
())' (
new))( +

FriendList)), 6
{** 
Username++ $
=++% &
friend++' -
.++- .
Username++. 6
,++6 7
EnLinea,, #
=,,$ %
friend,,& ,
.,,, -
ConnectionState,,- <
,,,< =
Avatar-- "
=--# $
$str--% y
}.. 
).. 
;.. 
}// 
}00 
}11 
catch22 
(22 %
EndpointNotFoundException22 ,
ex22- /
)22/ 0
{33 
Debug44 
.44 
	WriteLine44 
(44  
$"44  "
$str44" K
{44K L
ex44L N
.44N O
Message44O V
}44V W
"44W X
)44X Y
;44Y Z
MessageHelper66 
.66 
	ShowPopup66 '
(66' (
MessageTranslator77 %
.77% &
GetLocalizedMessage77& 9
(779 :
$str77: Q
)77Q R
,77R S
$str88 
)99 
;99 
}:: 
catch;; 
(;; 
TimeoutException;; #
ex;;$ &
);;& '
{<< 
Debug== 
.== 
	WriteLine== 
(==  
$"==  "
$str==" B
{==B C
ex==C E
.==E F
Message==F M
}==M N
"==N O
)==O P
;==P Q
MessageHelper?? 
.?? 
	ShowPopup?? '
(??' (
MessageTranslator@@ %
.@@% &
GetLocalizedMessage@@& 9
(@@9 :
$str@@: N
)@@N O
,@@O P
$strAA 
)BB 
;BB 
}CC 
catchDD 
(DD 
FaultExceptionDD !
exDD" $
)DD$ %
{EE 
DebugFF 
.FF 
	WriteLineFF 
(FF  
$"FF  "
$strFF" I
{FFI J
exFFJ L
.FFL M
MessageFFM T
}FFT U
"FFU V
)FFV W
;FFW X
MessageHelperHH 
.HH 
	ShowPopupHH '
(HH' (
MessageTranslatorII %
.II% &
GetLocalizedMessageII& 9
(II9 :
$strII: L
)IIL M
,IIM N
$strJJ 
)KK 
;KK 
}LL 
catchMM 
(MM 
SystemMM 
.MM 
NetMM 
.MM 
WebExceptionMM *
exMM+ -
)MM- .
{NN 
DebugOO 
.OO 
	WriteLineOO 
(OO  
$"OO  "
$strOO" G
{OOG H
exOOH J
.OOJ K
MessageOOK R
}OOR S
"OOS T
)OOT U
;OOU V
MessageHelperQQ 
.QQ 
	ShowPopupQQ '
(QQ' (
MessageTranslatorRR %
.RR% &
GetLocalizedMessageRR& 9
(RR9 :
$strRR: Q
)RRQ R
,RRR S
$strSS 
)TT 
;TT 
}UU 
catchVV 
(VV 
	ExceptionVV 
exVV 
)VV  
{WW 
DebugXX 
.XX 
	WriteLineXX 
(XX  
$"XX  "
$strXX" B
{XXB C
exXXC E
.XXE F
MessageXXF M
}XXM N
"XXN O
)XXO P
;XXP Q
MessageHelperZZ 
.ZZ 
	ShowPopupZZ '
(ZZ' (
MessageTranslator[[ %
.[[% &
GetLocalizedMessage[[& 9
([[9 :
$str[[: P
)[[P Q
,[[Q R
$str\\ 
)]] 
;]] 
}^^ 
}__ 	
privatecc 
voidcc 
OnBackClickcc  
(cc  !
objectcc! '
sendercc( .
,cc. /
RoutedEventArgscc0 ?
ecc@ A
)ccA B
{dd 	
tryee 
{ff 
NavigationServicegg !
?gg! "
.gg" #
GoBackgg# )
(gg) *
)gg* +
;gg+ ,
}hh 
catchii 
(ii %
InvalidOperationExceptionii ,
exii- /
)ii/ 0
{jj 
Debugkk 
.kk 
	WriteLinekk 
(kk  
$"kk  "
$strkk" K
{kkK L
exkkL N
.kkN O
MessagekkO V
}kkV W
"kkW X
)kkX Y
;kkY Z
MessageHelpermm 
.mm 
	ShowPopupmm '
(mm' (
MessageTranslatornn %
.nn% &
GetLocalizedMessagenn& 9
(nn9 :
$strnn: O
)nnO P
,nnP Q
$stroo 
)pp 
;pp 
}qq 
catchrr 
(rr 
	Exceptionrr 
exrr 
)rr  
{ss 
Debugtt 
.tt 
	WriteLinett 
(tt  
$"tt  "
$strtt" B
{ttB C
exttC E
.ttE F
MessagettF M
}ttM N
"ttN O
)ttO P
;ttP Q
MessageHelpervv 
.vv 
	ShowPopupvv '
(vv' (
MessageTranslatorww %
.ww% &
GetLocalizedMessageww& 9
(ww9 :
$strww: L
)wwL M
,wwM N
$strxx 
)yy 
;yy 
}zz 
}{{ 	
private}} 
void}} 
OnViewProfileClick}} '
(}}' (
object}}( .
sender}}/ 5
,}}5 6
RoutedEventArgs}}7 F
e}}G H
)}}H I
{~~ 	
try 
{
ÄÄ 
NavigationService
ÅÅ !
?
ÅÅ! "
.
ÅÅ" #
Navigate
ÅÅ# +
(
ÅÅ+ ,
new
ÅÅ, /
ProfileUser
ÅÅ0 ;
(
ÅÅ; <
)
ÅÅ< =
)
ÅÅ= >
;
ÅÅ> ?
}
ÇÇ 
catch
ÉÉ 
(
ÉÉ '
InvalidOperationException
ÉÉ ,
ex
ÉÉ- /
)
ÉÉ/ 0
{
ÑÑ 
Debug
ÖÖ 
.
ÖÖ 
	WriteLine
ÖÖ 
(
ÖÖ  
$"
ÖÖ  "
$str
ÖÖ" R
{
ÖÖR S
ex
ÖÖS U
.
ÖÖU V
Message
ÖÖV ]
}
ÖÖ] ^
"
ÖÖ^ _
)
ÖÖ_ `
;
ÖÖ` a
MessageHelper
áá 
.
áá 
	ShowPopup
áá '
(
áá' (
MessageTranslator
àà %
.
àà% &!
GetLocalizedMessage
àà& 9
(
àà9 :
$str
àà: O
)
ààO P
,
ààP Q
$str
ââ 
)
ää 
;
ää 
}
ãã 
catch
åå 
(
åå 
	Exception
åå 
ex
åå 
)
åå  
{
çç 
Debug
éé 
.
éé 
	WriteLine
éé 
(
éé  
$"
éé  "
$str
éé" I
{
ééI J
ex
ééJ L
.
ééL M
Message
ééM T
}
ééT U
"
ééU V
)
ééV W
;
ééW X
MessageHelper
êê 
.
êê 
	ShowPopup
êê '
(
êê' (
MessageTranslator
ëë %
.
ëë% &!
GetLocalizedMessage
ëë& 9
(
ëë9 :
$str
ëë: L
)
ëëL M
,
ëëM N
$str
íí 
)
ìì 
;
ìì 
}
îî 
}
ïï 	
private
ôô 
void
ôô 
OnChatClick
ôô  
(
ôô  !
object
ôô! '
sender
ôô( .
,
ôô. /
RoutedEventArgs
ôô0 ?
e
ôô@ A
)
ôôA B
{
öö 	
try
õõ 
{
úú 
if
ùù 
(
ùù 
sender
ùù 
is
ùù 
FrameworkElement
ùù .
element
ùù/ 6
&&
ùù7 9
element
ûû 
.
ûû 
DataContext
ûû '
is
ûû( *

FriendList
ûû+ 5
friend
ûû6 <
)
ûû< =
{
üü 
var
†† 

chatWindow
†† "
=
††# $
new
††% (

ChatWindow
††) 3
(
††3 4
ClientSession
††4 A
.
††A B
CurrentProfile
††B P
,
††P Q
friend
††R X
.
††X Y
Username
††Y a
)
††a b
;
††b c

chatWindow
°° 
.
°° 
Show
°° #
(
°°# $
)
°°$ %
;
°°% &
}
¢¢ 
}
££ 
catch
§§ 
(
§§ '
InvalidOperationException
§§ ,
ex
§§- /
)
§§/ 0
{
•• 
Debug
¶¶ 
.
¶¶ 
	WriteLine
¶¶ 
(
¶¶  
$"
¶¶  "
$str
¶¶" K
{
¶¶K L
ex
¶¶L N
.
¶¶N O
Message
¶¶O V
}
¶¶V W
"
¶¶W X
)
¶¶X Y
;
¶¶Y Z
MessageHelper
®® 
.
®® 
	ShowPopup
®® '
(
®®' (
MessageTranslator
©© %
.
©©% &!
GetLocalizedMessage
©©& 9
(
©©9 :
$str
©©: M
)
©©M N
,
©©N O
$str
™™ 
)
´´ 
;
´´ 
}
¨¨ 
catch
≠≠ 
(
≠≠ 
	Exception
≠≠ 
ex
≠≠ 
)
≠≠  
{
ÆÆ 
Debug
ØØ 
.
ØØ 
	WriteLine
ØØ 
(
ØØ  
$"
ØØ  "
$str
ØØ" B
{
ØØB C
ex
ØØC E
.
ØØE F
Message
ØØF M
}
ØØM N
"
ØØN O
)
ØØO P
;
ØØP Q
MessageHelper
±± 
.
±± 
	ShowPopup
±± '
(
±±' (
MessageTranslator
≤≤ %
.
≤≤% &!
GetLocalizedMessage
≤≤& 9
(
≤≤9 :
$str
≤≤: M
)
≤≤M N
,
≤≤N O
$str
≥≥ 
)
¥¥ 
;
¥¥ 
}
µµ 
}
∂∂ 	
private
∫∫ 
void
∫∫ 
OnSoundClick
∫∫ !
(
∫∫! "
object
∫∫" (
sender
∫∫) /
,
∫∫/ 0
RoutedEventArgs
∫∫1 @
e
∫∫A B
)
∫∫B C
{
ªª 	
try
ºº 
{
ΩΩ 
NavigationService
ææ !
?
ææ! "
.
ææ" #
Navigate
ææ# +
(
ææ+ ,
new
ææ, /

ConfiSound
ææ0 :
(
ææ: ;
)
ææ; <
)
ææ< =
;
ææ= >
}
øø 
catch
¿¿ 
(
¿¿ '
InvalidOperationException
¿¿ ,
ex
¿¿- /
)
¿¿/ 0
{
¡¡ 
Debug
¬¬ 
.
¬¬ 
	WriteLine
¬¬ 
(
¬¬  
$"
¬¬  "
$str
¬¬" L
{
¬¬L M
ex
¬¬M O
.
¬¬O P
Message
¬¬P W
}
¬¬W X
"
¬¬X Y
)
¬¬Y Z
;
¬¬Z [
MessageHelper
ƒƒ 
.
ƒƒ 
	ShowPopup
ƒƒ '
(
ƒƒ' (
MessageTranslator
≈≈ %
.
≈≈% &!
GetLocalizedMessage
≈≈& 9
(
≈≈9 :
$str
≈≈: O
)
≈≈O P
,
≈≈P Q
$str
∆∆ 
)
«« 
;
«« 
}
»» 
catch
…… 
(
…… 
	Exception
…… 
ex
…… 
)
……  
{
   
Debug
ÀÀ 
.
ÀÀ 
	WriteLine
ÀÀ 
(
ÀÀ  
$"
ÀÀ  "
$str
ÀÀ" C
{
ÀÀC D
ex
ÀÀD F
.
ÀÀF G
Message
ÀÀG N
}
ÀÀN O
"
ÀÀO P
)
ÀÀP Q
;
ÀÀQ R
MessageHelper
ÕÕ 
.
ÕÕ 
	ShowPopup
ÕÕ '
(
ÕÕ' (
MessageTranslator
ŒŒ %
.
ŒŒ% &!
GetLocalizedMessage
ŒŒ& 9
(
ŒŒ9 :
$str
ŒŒ: L
)
ŒŒL M
,
ŒŒM N
$str
œœ 
)
–– 
;
–– 
}
—— 
}
““ 	
private
‘‘ 
void
‘‘ 
OnAddFriendClick
‘‘ %
(
‘‘% &
object
‘‘& ,
sender
‘‘- 3
,
‘‘3 4
RoutedEventArgs
‘‘5 D
e
‘‘E F
)
‘‘F G
{
’’ 	
try
÷÷ 
{
◊◊ 
NavigationService
ÿÿ !
?
ÿÿ! "
.
ÿÿ" #
Navigate
ÿÿ# +
(
ÿÿ+ ,
new
ÿÿ, /
	AddFriend
ÿÿ0 9
(
ÿÿ9 :
)
ÿÿ: ;
)
ÿÿ; <
;
ÿÿ< =
}
ŸŸ 
catch
⁄⁄ 
(
⁄⁄ 
	Exception
⁄⁄ 
ex
⁄⁄ 
)
⁄⁄  
{
€€ 
Debug
‹‹ 
.
‹‹ 
	WriteLine
‹‹ 
(
‹‹  
$"
‹‹  "
$str
‹‹" =
{
‹‹= >
ex
‹‹> @
.
‹‹@ A
Message
‹‹A H
}
‹‹H I
"
‹‹I J
)
‹‹J K
;
‹‹K L
MessageHelper
ﬁﬁ 
.
ﬁﬁ 
	ShowPopup
ﬁﬁ '
(
ﬁﬁ' (
MessageTranslator
ﬂﬂ %
.
ﬂﬂ% &!
GetLocalizedMessage
ﬂﬂ& 9
(
ﬂﬂ9 :
$str
ﬂﬂ: O
)
ﬂﬂO P
,
ﬂﬂP Q
$str
‡‡ 
)
‡‡ 
;
‡‡ 
}
·· 
}
‚‚ 	
private
‰‰ 
void
‰‰ (
OnViewPendingRequestsClick
‰‰ /
(
‰‰/ 0
object
‰‰0 6
sender
‰‰7 =
,
‰‰= >
RoutedEventArgs
‰‰? N
e
‰‰O P
)
‰‰P Q
{
ÂÂ 	
try
ÊÊ 
{
ÁÁ 
NavigationService
ËË !
?
ËË! "
.
ËË" #
Navigate
ËË# +
(
ËË+ ,
new
ËË, /#
PendingFriendRequests
ËË0 E
(
ËËE F
)
ËËF G
)
ËËG H
;
ËËH I
}
ÈÈ 
catch
ÍÍ 
(
ÍÍ 
	Exception
ÍÍ 
ex
ÍÍ 
)
ÍÍ  
{
ÎÎ 
Debug
ÏÏ 
.
ÏÏ 
	WriteLine
ÏÏ 
(
ÏÏ  
$"
ÏÏ  "
$str
ÏÏ" G
{
ÏÏG H
ex
ÏÏH J
.
ÏÏJ K
Message
ÏÏK R
}
ÏÏR S
"
ÏÏS T
)
ÏÏT U
;
ÏÏU V
MessageHelper
ÓÓ 
.
ÓÓ 
	ShowPopup
ÓÓ '
(
ÓÓ' (
MessageTranslator
ÔÔ %
.
ÔÔ% &!
GetLocalizedMessage
ÔÔ& 9
(
ÔÔ9 :
$str
ÔÔ: O
)
ÔÔO P
,
ÔÔP Q
$str
 
)
 
;
 
}
ÒÒ 
}
ÚÚ 	
private
˘˘ 
void
˘˘ 
OnLanguageClick
˘˘ $
(
˘˘$ %
object
˘˘% +
sender
˘˘, 2
,
˘˘2 3
RoutedEventArgs
˘˘4 C
e
˘˘D E
)
˘˘E F
{
˙˙ 	
try
˚˚ 
{
¸¸ 
NavigationService
˝˝ !
?
˝˝! "
.
˝˝" #
Navigate
˝˝# +
(
˝˝+ ,
new
˝˝, /
SelectLanguage
˝˝0 >
(
˝˝> ?
)
˝˝? @
)
˝˝@ A
;
˝˝A B
}
˛˛ 
catch
ˇˇ 
(
ˇˇ '
InvalidOperationException
ˇˇ ,
ex
ˇˇ- /
)
ˇˇ/ 0
{
ÄÄ 
Debug
ÅÅ 
.
ÅÅ 
	WriteLine
ÅÅ 
(
ÅÅ  
$"
ÅÅ  "
$str
ÅÅ" O
{
ÅÅO P
ex
ÅÅP R
.
ÅÅR S
Message
ÅÅS Z
}
ÅÅZ [
"
ÅÅ[ \
)
ÅÅ\ ]
;
ÅÅ] ^
MessageHelper
ÉÉ 
.
ÉÉ 
	ShowPopup
ÉÉ '
(
ÉÉ' (
MessageTranslator
ÑÑ %
.
ÑÑ% &!
GetLocalizedMessage
ÑÑ& 9
(
ÑÑ9 :
$str
ÑÑ: O
)
ÑÑO P
,
ÑÑP Q
$str
ÖÖ 
)
ÜÜ 
;
ÜÜ 
}
áá 
catch
àà 
(
àà 
	Exception
àà 
ex
àà 
)
àà  
{
ââ 
Debug
ää 
.
ää 
	WriteLine
ää 
(
ää  
$"
ää  "
$str
ää" F
{
ääF G
ex
ääG I
.
ääI J
Message
ääJ Q
}
ääQ R
"
ääR S
)
ääS T
;
ääT U
MessageHelper
åå 
.
åå 
	ShowPopup
åå '
(
åå' (
MessageTranslator
çç %
.
çç% &!
GetLocalizedMessage
çç& 9
(
çç9 :
$str
çç: L
)
ççL M
,
ççM N
$str
éé 
)
èè 
;
èè 
}
êê 
}
ëë 	
}
íí 
}ìì ÂS
eC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Pages\ConfiSound.xaml.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
Pages  %
{ 
public		 

partial		 
class		 

ConfiSound		 #
:		$ %
Page		& *
{

 
private 
double 
_pendingVolume %
;% &
public 

ConfiSound 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
try 
{ 
_pendingVolume 
=  
SoundManager! -
.- .
MusicVolume. 9
;9 :
MusicSlider 
. 
Value !
=" #
_pendingVolume$ 2
*3 4
$num5 8
;8 9
MusicSlider 
. 
ValueChanged (
+=) + 
OnMusicVolumeChanged, @
;@ A
} 
catch 
( %
InvalidOperationException ,
ex- /
)/ 0
{ 
Debug 
. 
	WriteLine 
(  
$"  "
$str" G
{G H
exH J
.J K
MessageK R
}R S
"S T
)T U
;U V
MessageHelper 
. 
	ShowPopup '
(' (
MessageTranslator %
.% &
GetLocalizedMessage& 9
(9 :
$str: R
)R S
,S T
$str 
) 
; 
}   
catch!! 
(!! 
	Exception!! 
ex!! 
)!!  
{"" 
Debug## 
.## 
	WriteLine## 
(##  
$"##  "
$str##" >
{##> ?
ex##? A
.##A B
Message##B I
}##I J
"##J K
)##K L
;##L M
MessageHelper%% 
.%% 
	ShowPopup%% '
(%%' (
MessageTranslator&& %
.&&% &
GetLocalizedMessage&&& 9
(&&9 :
$str&&: L
)&&L M
,&&M N
$str'' 
)(( 
;(( 
})) 
}** 	
private.. 
void..  
OnMusicVolumeChanged.. )
(..) *
object..* 0
sender..1 7
,..7 8*
RoutedPropertyChangedEventArgs..9 W
<..W X
double..X ^
>..^ _
e..` a
)..a b
{// 	
try00 
{11 
_pendingVolume22 
=22  
e22! "
.22" #
NewValue22# +
/22, -
$num22. 1
;221 2
if44 
(44 
_pendingVolume44 "
<44# $
$num44% &
||44' )
_pendingVolume44* 8
>449 :
$num44; <
)44< =
{55 
throw66 
new66 '
ArgumentOutOfRangeException66 9
(669 :
nameof66: @
(66@ A
_pendingVolume66A O
)66O P
)66P Q
;66Q R
}77 
SoundManager99 
.99 
ApplyVolume99 (
(99( )
_pendingVolume99) 7
)997 8
;998 9
}:: 
catch;; 
(;; '
ArgumentOutOfRangeException;; .
ex;;/ 1
);;1 2
{<< 
Debug== 
.== 
	WriteLine== 
(==  
$"==  "
$str==" Q
{==Q R
ex==R T
.==T U
Message==U \
}==\ ]
"==] ^
)==^ _
;==_ `
MessageHelper?? 
.?? 
	ShowPopup?? '
(??' (
MessageTranslator@@ %
.@@% &
GetLocalizedMessage@@& 9
(@@9 :
$str@@: R
)@@R S
,@@S T
$strAA 
)BB 
;BB 
}CC 
catchDD 
(DD %
InvalidOperationExceptionDD ,
exDD- /
)DD/ 0
{EE 
DebugFF 
.FF 
	WriteLineFF 
(FF  
$"FF  "
$strFF" W
{FFW X
exFFX Z
.FFZ [
MessageFF[ b
}FFb c
"FFc d
)FFd e
;FFe f
MessageHelperHH 
.HH 
	ShowPopupHH '
(HH' (
MessageTranslatorII %
.II% &
GetLocalizedMessageII& 9
(II9 :
$strII: R
)IIR S
,IIS T
$strJJ 
)KK 
;KK 
}LL 
catchMM 
(MM 
	ExceptionMM 
exMM 
)MM  
{NN 
DebugOO 
.OO 
	WriteLineOO 
(OO  
$"OO  "
$strOO" N
{OON O
exOOO Q
.OOQ R
MessageOOR Y
}OOY Z
"OOZ [
)OO[ \
;OO\ ]
MessageHelperQQ 
.QQ 
	ShowPopupQQ '
(QQ' (
MessageTranslatorRR %
.RR% &
GetLocalizedMessageRR& 9
(RR9 :
$strRR: L
)RRL M
,RRM N
$strSS 
)TT 
;TT 
}UU 
}VV 	
privateZZ 
voidZZ 
OnConfirmClickZZ #
(ZZ# $
objectZZ$ *
senderZZ+ 1
,ZZ1 2
RoutedEventArgsZZ3 B
eZZC D
)ZZD E
{[[ 	
try\\ 
{]] 
if^^ 
(^^ 
_pendingVolume^^ "
<^^# $
$num^^% &
||^^' )
_pendingVolume^^* 8
>^^9 :
$num^^; <
)^^< =
{__ 
throw`` 
new`` '
ArgumentOutOfRangeException`` 9
(``9 :
nameof``: @
(``@ A
_pendingVolume``A O
)``O P
)``P Q
;``Q R
}aa 
SoundManagercc 
.cc 
ApplyVolumecc (
(cc( )
_pendingVolumecc) 7
)cc7 8
;cc8 9
MessageHelperee 
.ee 
	ShowPopupee '
(ee' (
MessageTranslatorff %
.ff% &
GetLocalizedMessageff& 9
(ff9 :
$strff: T
)ffT U
,ffU V
$strgg 
)hh 
;hh 
}ii 
catchjj 
(jj '
ArgumentOutOfRangeExceptionjj .
exjj/ 1
)jj1 2
{kk 
Debugll 
.ll 
	WriteLinell 
(ll  
$"ll  "
$strll" K
{llK L
exllL N
.llN O
MessagellO V
}llV W
"llW X
)llX Y
;llY Z
MessageHelpernn 
.nn 
	ShowPopupnn '
(nn' (
MessageTranslatoroo %
.oo% &
GetLocalizedMessageoo& 9
(oo9 :
$stroo: R
)ooR S
,ooS T
$strpp 
)qq 
;qq 
}rr 
catchss 
(ss %
InvalidOperationExceptionss ,
exss- /
)ss/ 0
{tt 
Debuguu 
.uu 
	WriteLineuu 
(uu  
$"uu  "
$struu" Q
{uuQ R
exuuR T
.uuT U
MessageuuU \
}uu\ ]
"uu] ^
)uu^ _
;uu_ `
MessageHelperww 
.ww 
	ShowPopupww '
(ww' (
MessageTranslatorxx %
.xx% &
GetLocalizedMessagexx& 9
(xx9 :
$strxx: R
)xxR S
,xxS T
$stryy 
)zz 
;zz 
}{{ 
catch|| 
(|| 
	Exception|| 
ex|| 
)||  
{}} 
Debug~~ 
.~~ 
	WriteLine~~ 
(~~  
$"~~  "
$str~~" H
{~~H I
ex~~I K
.~~K L
Message~~L S
}~~S T
"~~T U
)~~U V
;~~V W
MessageHelper
ÄÄ 
.
ÄÄ 
	ShowPopup
ÄÄ '
(
ÄÄ' (
MessageTranslator
ÅÅ %
.
ÅÅ% &!
GetLocalizedMessage
ÅÅ& 9
(
ÅÅ9 :
$str
ÅÅ: L
)
ÅÅL M
,
ÅÅM N
$str
ÇÇ 
)
ÉÉ 
;
ÉÉ 
}
ÑÑ 
}
ÖÖ 	
private
ââ 
void
ââ 
OnBackClick
ââ  
(
ââ  !
object
ââ! '
sender
ââ( .
,
ââ. /
RoutedEventArgs
ââ0 ?
e
ââ@ A
)
ââA B
{
ää 	
try
ãã 
{
åå 
if
çç 
(
çç 
NavigationService
çç %
?
çç% &
.
çç& '
	CanGoBack
çç' 0
==
çç1 3
true
çç4 8
)
çç8 9
{
éé 
NavigationService
èè %
.
èè% &
GoBack
èè& ,
(
èè, -
)
èè- .
;
èè. /
}
êê 
else
ëë 
{
íí 
MessageHelper
ìì !
.
ìì! "
	ShowPopup
ìì" +
(
ìì+ ,
MessageTranslator
îî )
.
îî) *!
GetLocalizedMessage
îî* =
(
îî= >
$str
îî> S
)
îîS T
,
îîT U
$str
ïï !
)
ññ 
;
ññ 
}
óó 
}
òò 
catch
ôô 
(
ôô '
InvalidOperationException
ôô ,
ex
ôô- /
)
ôô/ 0
{
öö 
Debug
õõ 
.
õõ 
	WriteLine
õõ 
(
õõ  
$"
õõ  "
$str
õõ" N
{
õõN O
ex
õõO Q
.
õõQ R
Message
õõR Y
}
õõY Z
"
õõZ [
)
õõ[ \
;
õõ\ ]
MessageHelper
ùù 
.
ùù 
	ShowPopup
ùù '
(
ùù' (
MessageTranslator
ûû %
.
ûû% &!
GetLocalizedMessage
ûû& 9
(
ûû9 :
$str
ûû: O
)
ûûO P
,
ûûP Q
$str
üü 
)
†† 
;
†† 
}
°° 
catch
¢¢ 
(
¢¢ 
	Exception
¢¢ 
ex
¢¢ 
)
¢¢  
{
££ 
Debug
§§ 
.
§§ 
	WriteLine
§§ 
(
§§  
$"
§§  "
$str
§§" E
{
§§E F
ex
§§F H
.
§§H I
Message
§§I P
}
§§P Q
"
§§Q R
)
§§R S
;
§§S T
MessageHelper
¶¶ 
.
¶¶ 
	ShowPopup
¶¶ '
(
¶¶' (
MessageTranslator
ßß %
.
ßß% &!
GetLocalizedMessage
ßß& 9
(
ßß9 :
$str
ßß: L
)
ßßL M
,
ßßM N
$str
®® 
)
©© 
;
©© 
}
™™ 
}
´´ 	
}
¨¨ 
}≠≠ Ô‘
eC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Pages\ChangeData.xaml.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
Pages  %
{ 
public 

partial 
class 

ChangeData #
:$ %
Page& *
{ 
private 
PublicProfile 
_profile &
;& '
public 

ChangeData 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
public 

ChangeData 
( 
PublicProfile '
profile( /
)/ 0
: 
this 
( 
) 
{ 	
_profile 
= 
profile 
; 
LoadProfileData 
( 
) 
; 
} 	
private!! 
void!! 
OnBackClick!!  
(!!  !
object!!! '
sender!!( .
,!!. /
RoutedEventArgs!!0 ?
e!!@ A
)!!A B
{"" 	
try## 
{$$ 
NavigationService%% !
?%%! "
.%%" #
GoBack%%# )
(%%) *
)%%* +
;%%+ ,
}&& 
catch'' 
('' %
InvalidOperationException'' ,
ex''- /
)''/ 0
{(( 
Debug)) 
.)) 
	WriteLine)) 
())  
$"))  "
$str))" N
{))N O
ex))O Q
.))Q R
Message))R Y
}))Y Z
"))Z [
)))[ \
;))\ ]
MessageHelper++ 
.++ 
	ShowPopup++ '
(++' (
MessageTranslator,, %
.,,% &
GetLocalizedMessage,,& 9
(,,9 :
$str,,: O
),,O P
,,,P Q
$str-- 
).. 
;.. 
}// 
catch00 
(00 
	Exception00 
ex00 
)00  
{11 
Debug22 
.22 
	WriteLine22 
(22  
$"22  "
$str22" E
{22E F
ex22F H
.22H I
Message22I P
}22P Q
"22Q R
)22R S
;22S T
MessageHelper44 
.44 
	ShowPopup44 '
(44' (
MessageTranslator55 %
.55% &
GetLocalizedMessage55& 9
(559 :
$str55: L
)55L M
,55M N
$str66 
)77 
;77 
}88 
}99 	
private;; 
void;; 
OnSendCodeClick;; $
(;;$ %
object;;% +
sender;;, 2
,;;2 3
RoutedEventArgs;;4 C
e;;D E
);;E F
{<< 	
TryExecuteAction== 
(== 
(== 
)== 
=>==  "
{>> 
MessageHelper@@ 
.@@ 
	ShowPopup@@ '
(@@' (
MessageTranslatorAA %
.AA% &
GetLocalizedMessageAA& 9
(AA9 :
$strAA: T
)AAT U
,AAU V
$strBB 
)CC 
;CC 
}DD 
,DD 
$strDD %
)DD% &
;DD& '
}EE 	
privateGG 
voidGG 
OnSoundClickGG !
(GG! "
objectGG" (
senderGG) /
,GG/ 0
RoutedEventArgsGG1 @
eGGA B
)GGB C
{HH 	
TryExecuteActionII 
(II 
(II 
)II 
=>II  "
{JJ 
NavigationServiceKK !
?KK! "
.KK" #
NavigateKK# +
(KK+ ,
newKK, /

ConfiSoundKK0 :
(KK: ;
)KK; <
)KK< =
;KK= >
}LL 
,LL 
$strLL $
)LL$ %
;LL% &
}MM 	
privateOO 
voidOO 
OnLanguageClickOO $
(OO$ %
objectOO% +
senderOO, 2
,OO2 3
RoutedEventArgsOO4 C
eOOD E
)OOE F
{PP 	
TryExecuteActionQQ 
(QQ 
(QQ 
)QQ 
=>QQ  "
{RR 
NavigationServiceSS !
?SS! "
.SS" #
NavigateSS# +
(SS+ ,
newSS, /
SelectLanguageSS0 >
(SS> ?
)SS? @
)SS@ A
;SSA B
}TT 
,TT 
$strTT $
)TT$ %
;TT% &
}UU 	
private[[ 
void[[ 
OnSaveUsernameClick[[ (
([[( )
object[[) /
sender[[0 6
,[[6 7
RoutedEventArgs[[8 G
e[[H I
)[[I J
{\\ 	
TryExecuteAction]] 
(]] 
(]] 
)]] 
=>]]  "
{^^ 
if__ 
(__ 
!__ !
ValidateUsernameInput__ *
(__* +
)__+ ,
)__, -
{`` 
returnaa 
;aa 
}bb 
ChangeUsernamedd 
(dd 
txtUsernamedd *
.dd* +
Textdd+ /
.dd/ 0
Trimdd0 4
(dd4 5
)dd5 6
)dd6 7
;dd7 8
}ee 
,ee 
$stree !
)ee! "
;ee" #
}ff 	
privatehh 
boolhh !
ValidateUsernameInputhh *
(hh* +
)hh+ ,
{ii 	
ifjj 
(jj 
stringjj 
.jj 
IsNullOrWhiteSpacejj )
(jj) *
txtUsernamejj* 5
.jj5 6
Textjj6 :
)jj: ;
)jj; <
{kk 
MessageHelperll 
.ll 
	ShowPopupll '
(ll' (
MessageTranslatormm %
.mm% &
GetLocalizedMessagemm& 9
(mm9 :
$strmm: M
)mmM N
,mmN O
$strnn 
)oo 
;oo 
returnpp 
falsepp 
;pp 
}qq 
returnss 
truess 
;ss 
}tt 	
privatevv 
voidvv 
ChangeUsernamevv #
(vv# $
stringvv$ *
newUsernamevv+ 6
)vv6 7
{ww 	
tryxx 
{yy 
usingzz 
(zz 
varzz 
clientzz !
=zz" #
newzz$ ' 
AccountManagerClientzz( <
(zz< =
)zz= >
)zz> ?
{{{ 
var|| 
result|| 
=||  
client||! '
.||' (
ChangeUsername||( 6
(||6 7
_profile||7 ?
.||? @
Username||@ H
,||H I
newUsername||J U
)||U V
;||V W
string~~ 
message~~ "
=~~# $
MessageTranslator~~% 6
.~~6 7
GetLocalizedMessage~~7 J
(~~J K
result~~K Q
.~~Q R
Code~~R V
)~~V W
;~~W X
if
ÄÄ 
(
ÄÄ 
result
ÄÄ 
.
ÄÄ 
Success
ÄÄ &
)
ÄÄ& '
{
ÅÅ !
UpdateUsernameState
ÇÇ +
(
ÇÇ+ ,
newUsername
ÇÇ, 7
)
ÇÇ7 8
;
ÇÇ8 9
MessageHelper
ÑÑ %
.
ÑÑ% &
	ShowPopup
ÑÑ& /
(
ÑÑ/ 0
message
ÑÑ0 7
,
ÑÑ7 8
$str
ÑÑ9 B
)
ÑÑB C
;
ÑÑC D
NavigationService
ÖÖ )
?
ÖÖ) *
.
ÖÖ* +
GoBack
ÖÖ+ 1
(
ÖÖ1 2
)
ÖÖ2 3
;
ÖÖ3 4
}
ÜÜ 
else
áá 
{
àà 
MessageHelper
ââ %
.
ââ% &
	ShowPopup
ââ& /
(
ââ/ 0
message
ââ0 7
,
ââ7 8
$str
ââ9 B
)
ââB C
;
ââC D
}
ää 
}
ãã 
}
åå 
catch
çç 
(
çç $
CommunicationException
çç )
ex
çç* ,
)
çç, -
{
éé 
Debug
èè 
.
èè 
	WriteLine
èè 
(
èè  
$"
èè  "
$str
èè" N
{
èèN O
ex
èèO Q
.
èèQ R
Message
èèR Y
}
èèY Z
"
èèZ [
)
èè[ \
;
èè\ ]
MessageHelper
ëë 
.
ëë 
	ShowPopup
ëë '
(
ëë' (
MessageTranslator
íí %
.
íí% &!
GetLocalizedMessage
íí& 9
(
íí9 :
$str
íí: Q
)
ííQ R
,
ííR S
$str
ìì 
)
îî 
;
îî 
}
ïï 
catch
ññ 
(
ññ 
TimeoutException
ññ #
ex
ññ$ &
)
ññ& '
{
óó 
Debug
òò 
.
òò 
	WriteLine
òò 
(
òò  
$"
òò  "
$str
òò" H
{
òòH I
ex
òòI K
.
òòK L
Message
òòL S
}
òòS T
"
òòT U
)
òòU V
;
òòV W
MessageHelper
öö 
.
öö 
	ShowPopup
öö '
(
öö' (
MessageTranslator
õõ %
.
õõ% &!
GetLocalizedMessage
õõ& 9
(
õõ9 :
$str
õõ: Q
)
õõQ R
,
õõR S
$str
úú 
)
ùù 
;
ùù 
}
ûû 
catch
üü 
(
üü '
InvalidOperationException
üü ,
ex
üü- /
)
üü/ 0
{
†† 
Debug
°° 
.
°° 
	WriteLine
°° 
(
°°  
$"
°°  "
$str
°°" Q
{
°°Q R
ex
°°R T
.
°°T U
Message
°°U \
}
°°\ ]
"
°°] ^
)
°°^ _
;
°°_ `
MessageHelper
££ 
.
££ 
	ShowPopup
££ '
(
££' (
MessageTranslator
§§ %
.
§§% &!
GetLocalizedMessage
§§& 9
(
§§9 :
$str
§§: L
)
§§L M
,
§§M N
$str
•• 
)
¶¶ 
;
¶¶ 
}
ßß 
catch
®® 
(
®® 
	Exception
®® 
ex
®® 
)
®®  
{
©© 
Debug
™™ 
.
™™ 
	WriteLine
™™ 
(
™™  
$"
™™  "
$str
™™" H
{
™™H I
ex
™™I K
.
™™K L
Message
™™L S
}
™™S T
"
™™T U
)
™™U V
;
™™V W
MessageHelper
¨¨ 
.
¨¨ 
	ShowPopup
¨¨ '
(
¨¨' (
MessageTranslator
≠≠ %
.
≠≠% &!
GetLocalizedMessage
≠≠& 9
(
≠≠9 :
$str
≠≠: L
)
≠≠L M
,
≠≠M N
$str
ÆÆ 
)
ØØ 
;
ØØ 
}
∞∞ 
}
±± 	
private
≥≥ 
void
≥≥ !
UpdateUsernameState
≥≥ (
(
≥≥( )
string
≥≥) /
newUsername
≥≥0 ;
)
≥≥; <
{
¥¥ 	
_profile
µµ 
.
µµ 
Username
µµ 
=
µµ 
newUsername
µµ  +
;
µµ+ , 
txtCurrentUsername
∂∂ 
.
∂∂ 
Text
∂∂ #
=
∂∂$ %
newUsername
∂∂& 1
;
∂∂1 2
if
∏∏ 
(
∏∏ 
ClientSession
∏∏ 
.
∏∏ 

IsLoggedIn
∏∏ (
)
∏∏( )
{
ππ 
ClientSession
∫∫ 
.
∫∫ 
CurrentProfile
∫∫ ,
.
∫∫, -
Username
∫∫- 5
=
∫∫6 7
newUsername
∫∫8 C
;
∫∫C D
}
ªª 
}
ºº 	
private
¬¬ 
void
¬¬ !
OnSavePasswordClick
¬¬ (
(
¬¬( )
object
¬¬) /
sender
¬¬0 6
,
¬¬6 7
RoutedEventArgs
¬¬8 G
e
¬¬H I
)
¬¬I J
{
√√ 	
TryExecuteAction
ƒƒ 
(
ƒƒ 
(
ƒƒ 
)
ƒƒ 
=>
ƒƒ  "
{
≈≈ 
if
«« 
(
«« 
!
«« +
ValidateVerificationCodeInput
«« 2
(
««2 3
)
««3 4
)
««4 5
{
»» 
return
…… 
;
…… 
}
   
if
ÕÕ 
(
ÕÕ 
!
ÕÕ $
ValidatePasswordInputs
ÕÕ +
(
ÕÕ+ ,
)
ÕÕ, -
)
ÕÕ- .
{
ŒŒ 
return
œœ 
;
œœ 
}
–– 
if
”” 
(
”” 
!
”” &
ValidatePasswordStrength
”” -
(
””- .
txtPassword
””. 9
.
””9 :
Password
””: B
)
””B C
)
””C D
{
‘‘ 
return
’’ 
;
’’ 
}
÷÷ 
string
ŸŸ 
hashedPassword
ŸŸ %
=
ŸŸ& '
Hasher
ŸŸ( .
.
ŸŸ. /
HashPassword
ŸŸ/ ;
(
ŸŸ; <
txtPassword
ŸŸ< G
.
ŸŸG H
Password
ŸŸH P
.
ŸŸP Q
Trim
ŸŸQ U
(
ŸŸU V
)
ŸŸV W
)
ŸŸW X
;
ŸŸX Y
ChangePassword
⁄⁄ 
(
⁄⁄ 
_profile
⁄⁄ '
.
⁄⁄' (
Username
⁄⁄( 0
,
⁄⁄0 1
hashedPassword
⁄⁄2 @
)
⁄⁄@ A
;
⁄⁄A B
}
€€ 
,
€€ 
$str
€€ !
)
€€! "
;
€€" #
}
‹‹ 	
private
ﬁﬁ 
bool
ﬁﬁ +
ValidateVerificationCodeInput
ﬁﬁ 2
(
ﬁﬁ2 3
)
ﬁﬁ3 4
{
ﬂﬂ 	
string
·· 
code
·· 
=
·· !
txtVerificationCode
·· -
.
··- .
Text
··. 2
.
··2 3
Trim
··3 7
(
··7 8
)
··8 9
;
··9 :
if
„„ 
(
„„ 
string
„„ 
.
„„  
IsNullOrWhiteSpace
„„ )
(
„„) *
code
„„* .
)
„„. /
)
„„/ 0
{
‰‰ 
MessageHelper
ÂÂ 
.
ÂÂ 
	ShowPopup
ÂÂ '
(
ÂÂ' (
MessageTranslator
ÊÊ %
.
ÊÊ% &!
GetLocalizedMessage
ÊÊ& 9
(
ÊÊ9 :
$str
ÊÊ: U
)
ÊÊU V
,
ÊÊV W
$str
ÁÁ 
)
ËË 
;
ËË 
return
ÈÈ 
false
ÈÈ 
;
ÈÈ 
}
ÍÍ 
return
ÌÌ 
true
ÌÌ 
;
ÌÌ 
}
ÓÓ 	
private
 
bool
 $
ValidatePasswordInputs
 +
(
+ ,
)
, -
{
ÒÒ 	
if
ÚÚ 
(
ÚÚ 
string
ÚÚ 
.
ÚÚ  
IsNullOrWhiteSpace
ÚÚ )
(
ÚÚ) *
txtPassword
ÚÚ* 5
.
ÚÚ5 6
Password
ÚÚ6 >
)
ÚÚ> ?
||
ÚÚ@ B
string
ÛÛ 
.
ÛÛ  
IsNullOrWhiteSpace
ÛÛ )
(
ÛÛ) * 
txtConfirmPassword
ÛÛ* <
.
ÛÛ< =
Password
ÛÛ= E
)
ÛÛE F
)
ÛÛF G
{
ÙÙ 
MessageHelper
ıı 
.
ıı 
	ShowPopup
ıı '
(
ıı' (
MessageTranslator
ˆˆ %
.
ˆˆ% &!
GetLocalizedMessage
ˆˆ& 9
(
ˆˆ9 :
$str
ˆˆ: P
)
ˆˆP Q
,
ˆˆQ R
$str
˜˜ 
)
¯¯ 
;
¯¯ 
return
˘˘ 
false
˘˘ 
;
˘˘ 
}
˙˙ 
if
¸¸ 
(
¸¸ 
txtPassword
¸¸ 
.
¸¸ 
Password
¸¸ $
!=
¸¸% ' 
txtConfirmPassword
¸¸( :
.
¸¸: ;
Password
¸¸; C
)
¸¸C D
{
˝˝ 
MessageHelper
˛˛ 
.
˛˛ 
	ShowPopup
˛˛ '
(
˛˛' (
MessageTranslator
ˇˇ %
.
ˇˇ% &!
GetLocalizedMessage
ˇˇ& 9
(
ˇˇ9 :
$str
ˇˇ: R
)
ˇˇR S
,
ˇˇS T
$str
ÄÄ 
)
ÅÅ 
;
ÅÅ 
return
ÇÇ 
false
ÇÇ 
;
ÇÇ 
}
ÉÉ 
return
ÖÖ 
true
ÖÖ 
;
ÖÖ 
}
ÜÜ 	
private
àà 
bool
àà &
ValidatePasswordStrength
àà -
(
àà- .
string
àà. 4
password
àà5 =
)
àà= >
{
ââ 	
try
ää 
{
ãã 
	Validator
åå 
.
åå 
ValidatePassword
åå *
(
åå* +
password
åå+ 3
)
åå3 4
;
åå4 5
return
éé 
true
éé 
;
éé 
}
èè 
catch
êê 
(
êê 
ArgumentException
êê $
ex
êê% '
)
êê' (
{
ëë 
Debug
íí 
.
íí 
	WriteLine
íí 
(
íí  
$"
íí  "
$str
íí" S
{
ííS T
ex
ííT V
.
ííV W
Message
ííW ^
}
íí^ _
"
íí_ `
)
íí` a
;
íía b
MessageHelper
îî 
.
îî 
	ShowPopup
îî '
(
îî' (
MessageTranslator
ïï %
.
ïï% &!
GetLocalizedMessage
ïï& 9
(
ïï9 :
$str
ïï: O
)
ïïO P
,
ïïP Q
$str
ññ 
)
óó 
;
óó 
}
òò 
catch
ôô 
(
ôô 
	Exception
ôô 
ex
ôô 
)
ôô  
{
öö 
Debug
õõ 
.
õõ 
	WriteLine
õõ 
(
õõ  
$"
õõ  "
$str
õõ" R
{
õõR S
ex
õõS U
.
õõU V
Message
õõV ]
}
õõ] ^
"
õõ^ _
)
õõ_ `
;
õõ` a
MessageHelper
ùù 
.
ùù 
	ShowPopup
ùù '
(
ùù' (
MessageTranslator
ûû %
.
ûû% &!
GetLocalizedMessage
ûû& 9
(
ûû9 :
$str
ûû: O
)
ûûO P
,
ûûP Q
$str
üü 
)
†† 
;
†† 
}
°° 
return
££ 
false
££ 
;
££ 
}
§§ 	
private
¶¶ 
void
¶¶ 
ChangePassword
¶¶ #
(
¶¶# $
string
¶¶$ *
username
¶¶+ 3
,
¶¶3 4
string
¶¶5 ;
hashedPassword
¶¶< J
)
¶¶J K
{
ßß 	
try
®® 
{
©© 
using
™™ 
(
™™ 
var
™™ 
client
™™ !
=
™™" #
new
™™$ '"
AccountManagerClient
™™( <
(
™™< =
)
™™= >
)
™™> ?
{
´´ 
var
¨¨ 
result
¨¨ 
=
¨¨  
client
¨¨! '
.
¨¨' (
ChangePassword
¨¨( 6
(
¨¨6 7
username
¨¨7 ?
,
¨¨? @
hashedPassword
¨¨A O
)
¨¨O P
;
¨¨P Q
string
ÆÆ 
message
ÆÆ "
=
ÆÆ# $
MessageTranslator
ÆÆ% 6
.
ÆÆ6 7!
GetLocalizedMessage
ÆÆ7 J
(
ÆÆJ K
result
ÆÆK Q
.
ÆÆQ R
Code
ÆÆR V
)
ÆÆV W
;
ÆÆW X
if
∞∞ 
(
∞∞ 
result
∞∞ 
.
∞∞ 
Success
∞∞ &
)
∞∞& '
{
±± 
MessageHelper
≥≥ %
.
≥≥% &
	ShowPopup
≥≥& /
(
≥≥/ 0
message
≥≥0 7
,
≥≥7 8
$str
≥≥9 B
)
≥≥B C
;
≥≥C D!
ClearPasswordInputs
¥¥ +
(
¥¥+ ,
)
¥¥, -
;
¥¥- .
}
µµ 
else
∂∂ 
{
∑∑ 
MessageHelper
∏∏ %
.
∏∏% &
	ShowPopup
∏∏& /
(
∏∏/ 0
message
∏∏0 7
,
∏∏7 8
$str
∏∏9 B
)
∏∏B C
;
∏∏C D
}
ππ 
}
∫∫ 
}
ªª 
catch
ºº 
(
ºº $
CommunicationException
ºº )
ex
ºº* ,
)
ºº, -
{
ΩΩ 
Debug
ææ 
.
ææ 
	WriteLine
ææ 
(
ææ  
$"
ææ  "
$str
ææ" N
{
ææN O
ex
ææO Q
.
ææQ R
Message
ææR Y
}
ææY Z
"
ææZ [
)
ææ[ \
;
ææ\ ]
MessageHelper
¿¿ 
.
¿¿ 
	ShowPopup
¿¿ '
(
¿¿' (
MessageTranslator
¡¡ %
.
¡¡% &!
GetLocalizedMessage
¡¡& 9
(
¡¡9 :
$str
¡¡: Q
)
¡¡Q R
,
¡¡R S
$str
¬¬ 
)
√√ 
;
√√ 
}
ƒƒ 
catch
≈≈ 
(
≈≈ 
TimeoutException
≈≈ #
ex
≈≈$ &
)
≈≈& '
{
∆∆ 
Debug
«« 
.
«« 
	WriteLine
«« 
(
««  
$"
««  "
$str
««" H
{
««H I
ex
««I K
.
««K L
Message
««L S
}
««S T
"
««T U
)
««U V
;
««V W
MessageHelper
…… 
.
…… 
	ShowPopup
…… '
(
……' (
MessageTranslator
   %
.
  % &!
GetLocalizedMessage
  & 9
(
  9 :
$str
  : Q
)
  Q R
,
  R S
$str
ÀÀ 
)
ÃÃ 
;
ÃÃ 
}
ÕÕ 
catch
ŒŒ 
(
ŒŒ '
InvalidOperationException
ŒŒ ,
ex
ŒŒ- /
)
ŒŒ/ 0
{
œœ 
Debug
–– 
.
–– 
	WriteLine
–– 
(
––  
$"
––  "
$str
––" Q
{
––Q R
ex
––R T
.
––T U
Message
––U \
}
––\ ]
"
––] ^
)
––^ _
;
––_ `
MessageHelper
““ 
.
““ 
	ShowPopup
““ '
(
““' (
MessageTranslator
”” %
.
””% &!
GetLocalizedMessage
””& 9
(
””9 :
$str
””: L
)
””L M
,
””M N
$str
‘‘ 
)
’’ 
;
’’ 
}
÷÷ 
catch
◊◊ 
(
◊◊ 
	Exception
◊◊ 
ex
◊◊ 
)
◊◊  
{
ÿÿ 
Debug
ŸŸ 
.
ŸŸ 
	WriteLine
ŸŸ 
(
ŸŸ  
$"
ŸŸ  "
$str
ŸŸ" H
{
ŸŸH I
ex
ŸŸI K
.
ŸŸK L
Message
ŸŸL S
}
ŸŸS T
"
ŸŸT U
)
ŸŸU V
;
ŸŸV W
MessageHelper
€€ 
.
€€ 
	ShowPopup
€€ '
(
€€' (
MessageTranslator
‹‹ %
.
‹‹% &!
GetLocalizedMessage
‹‹& 9
(
‹‹9 :
$str
‹‹: L
)
‹‹L M
,
‹‹M N
$str
›› 
)
ﬁﬁ 
;
ﬁﬁ 
}
ﬂﬂ 
}
‡‡ 	
private
‚‚ 
void
‚‚ !
ClearPasswordInputs
‚‚ (
(
‚‚( )
)
‚‚) *
{
„„ 	
txtPassword
‰‰ 
.
‰‰ 
Password
‰‰  
=
‰‰! "
string
‰‰# )
.
‰‰) *
Empty
‰‰* /
;
‰‰/ 0 
txtConfirmPassword
ÂÂ 
.
ÂÂ 
Password
ÂÂ '
=
ÂÂ( )
string
ÂÂ* 0
.
ÂÂ0 1
Empty
ÂÂ1 6
;
ÂÂ6 7
}
ËË 	
private
ÓÓ 
void
ÓÓ 
LoadProfileData
ÓÓ $
(
ÓÓ$ %
)
ÓÓ% &
{
ÔÔ 	
try
 
{
ÒÒ 
if
ÚÚ 
(
ÚÚ 
_profile
ÚÚ 
!=
ÚÚ 
null
ÚÚ  $
)
ÚÚ$ %
{
ÛÛ 
txtFirstName
ÙÙ  
.
ÙÙ  !
Text
ÙÙ! %
=
ÙÙ& '
_profile
ÙÙ( 0
.
ÙÙ0 1
Name
ÙÙ1 5
;
ÙÙ5 6
txtLastName
ıı 
.
ıı  
Text
ıı  $
=
ıı% &
_profile
ıı' /
.
ıı/ 0
LastName
ıı0 8
;
ıı8 9
txtEmail
ˆˆ 
.
ˆˆ 
Text
ˆˆ !
=
ˆˆ" #
_profile
ˆˆ$ ,
.
ˆˆ, -
Email
ˆˆ- 2
;
ˆˆ2 3 
txtCurrentUsername
˜˜ &
.
˜˜& '
Text
˜˜' +
=
˜˜, -
_profile
˜˜. 6
.
˜˜6 7
Username
˜˜7 ?
;
˜˜? @
}
¯¯ 
else
˘˘ 
{
˙˙ 
MessageHelper
˚˚ !
.
˚˚! "
	ShowPopup
˚˚" +
(
˚˚+ ,
MessageTranslator
¸¸ )
.
¸¸) *!
GetLocalizedMessage
¸¸* =
(
¸¸= >
$str
¸¸> W
)
¸¸W X
,
¸¸X Y
$str
˝˝ !
)
˛˛ 
;
˛˛ 
}
ˇˇ 
}
ÄÄ 
catch
ÅÅ 
(
ÅÅ $
NullReferenceException
ÅÅ )
ex
ÅÅ* ,
)
ÅÅ, -
{
ÇÇ 
Debug
ÉÉ 
.
ÉÉ 
	WriteLine
ÉÉ 
(
ÉÉ  
$"
ÉÉ  "
$str
ÉÉ" O
{
ÉÉO P
ex
ÉÉP R
.
ÉÉR S
Message
ÉÉS Z
}
ÉÉZ [
"
ÉÉ[ \
)
ÉÉ\ ]
;
ÉÉ] ^
MessageHelper
ÖÖ 
.
ÖÖ 
	ShowPopup
ÖÖ '
(
ÖÖ' (
MessageTranslator
ÜÜ %
.
ÜÜ% &!
GetLocalizedMessage
ÜÜ& 9
(
ÜÜ9 :
$str
ÜÜ: S
)
ÜÜS T
,
ÜÜT U
$str
áá 
)
àà 
;
àà 
}
ââ 
catch
ää 
(
ää 
	Exception
ää 
ex
ää 
)
ää  
{
ãã 
Debug
åå 
.
åå 
	WriteLine
åå 
(
åå  
$"
åå  "
$str
åå" I
{
ååI J
ex
ååJ L
.
ååL M
Message
ååM T
}
ååT U
"
ååU V
)
ååV W
;
ååW X
MessageHelper
éé 
.
éé 
	ShowPopup
éé '
(
éé' (
MessageTranslator
èè %
.
èè% &!
GetLocalizedMessage
èè& 9
(
èè9 :
$str
èè: L
)
èèL M
,
èèM N
$str
êê 
)
ëë 
;
ëë 
}
íí 
}
ìì 	
private
ïï 
void
ïï 
TryExecuteAction
ïï %
(
ïï% &
Action
ïï& ,
action
ïï- 3
,
ïï3 4
string
ïï5 ;
errorKey
ïï< D
)
ïïD E
{
ññ 	
try
óó 
{
òò 
action
ôô 
.
ôô 
Invoke
ôô 
(
ôô 
)
ôô 
;
ôô  
}
öö 
catch
õõ 
(
õõ '
InvalidOperationException
õõ ,
ex
õõ- /
)
õõ/ 0
{
úú 
Debug
ùù 
.
ùù 
	WriteLine
ùù 
(
ùù  
$"
ùù  "
$str
ùù" S
{
ùùS T
ex
ùùT V
.
ùùV W
Message
ùùW ^
}
ùù^ _
"
ùù_ `
)
ùù` a
;
ùùa b
MessageHelper
üü 
.
üü 
	ShowPopup
üü '
(
üü' (
MessageTranslator
†† %
.
††% &!
GetLocalizedMessage
††& 9
(
††9 :
errorKey
††: B
)
††B C
,
††C D
$str
°° 
)
¢¢ 
;
¢¢ 
}
££ 
catch
§§ 
(
§§ 
	Exception
§§ 
ex
§§ 
)
§§  
{
•• 
Debug
¶¶ 
.
¶¶ 
	WriteLine
¶¶ 
(
¶¶  
$"
¶¶  "
$str
¶¶" J
{
¶¶J K
ex
¶¶K M
.
¶¶M N
Message
¶¶N U
}
¶¶U V
"
¶¶V W
)
¶¶W X
;
¶¶X Y
MessageHelper
®® 
.
®® 
	ShowPopup
®® '
(
®®' (
MessageTranslator
©© %
.
©©% &!
GetLocalizedMessage
©©& 9
(
©©9 :
errorKey
©©: B
)
©©B C
,
©©C D
$str
™™ 
)
´´ 
;
´´ 
}
¨¨ 
}
≠≠ 	
}
ÆÆ 
}ØØ ı
]C:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\AppShell.xaml.cs
	namespace 	
DamasChinas_Client
 
{ 
public 

partial 
class 
AppShell !
:" #
Window$ *
{ 
public 
AppShell 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
} 
} é
XC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\App.xaml.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
{ 
public 
partial 
class 
App 
: 
Application '
{ 
	protected 
override 
void 
	OnStartup #
(# $
StartupEventArgs$ 4
e5 6
)6 7
{ 
base		 
.		 
	OnStartup		 
(		 
e		 
)		 
;		 
} 
} 
} ¡$
fC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Utilities\SoundManager.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
	Utilities  )
{ 
public 
static 
class 
SoundManager !
{		 
private

 	
static


 
readonly

 
MediaPlayer

 %
MusicPlayer

& 1
=

2 3
new

4 7
MediaPlayer

8 C
(

C D
)

D E
;

E F
private 	
static
 
bool 
_initialized "
;" #
public 
static	 
double 
MusicVolume "
{# $
get% (
;( )
private* 1
set2 5
;5 6
}7 8
=9 :
$num; >
;> ?
public 
static	 
bool 
	IsPlaying 
{  
get! $
;$ %
private& -
set. 1
;1 2
}3 4
public 
static	 
void 

Initialize 
(  
)  !
{ 
if 
( 
_initialized 
) 
{ 
return 

;
 
} 
try 
{ 
const 	
string
 
	musicPath 
= 
$str f
;f g
if 
( 
! 	
File	 
. 
Exists 
( 
	musicPath 
) 
)  
{ 
Debug   

.  
 
	WriteLine   
(   
$"   
$str   =
{  = >
	musicPath  > G
}  G H
"  H I
)  I J
;  J K
return!! 
;!! 
}"" 
var$$ 
uri$$ 
=$$ 
new$$ 
Uri$$ 
($$ 
	musicPath$$ 
,$$  
UriKind$$! (
.$$( )
Absolute$$) 1
)$$1 2
;$$2 3
MusicPlayer%% 
.%% 
Open%% 
(%% 
uri%% 
)%% 
;%% 
MusicPlayer&& 
.&& 
Volume&& 
=&& 
MusicVolume&& $
;&&$ %
MusicPlayer(( 
.(( 

MediaEnded(( 
+=(( 
((( 
sender(( %
,((% &
args((' +
)((+ ,
=>((- /
{)) 
MusicPlayer** 
.** 
Position** 
=** 
TimeSpan** $
.**$ %
Zero**% )
;**) *
MusicPlayer++ 
.++ 
Play++ 
(++ 
)++ 
;++ 
},, 
;,, 
MusicPlayer.. 
... 
Play.. 
(.. 
).. 
;.. 
	IsPlaying// 
=// 
true// 
;// 
_initialized00 
=00 
true00 
;00 
Debug11 	
.11	 

	WriteLine11
 
(11 
$str11 C
)11C D
;11D E
}22 
catch33 
(33	 

	Exception33
 
ex33 
)33 
{44 
Debug55 	
.55	 

	WriteLine55
 
(55 
$"55 
$str55 >
{55> ?
ex55? A
.55A B
Message55B I
}55I J
"55J K
)55K L
;55L M
}66 
}77 
public<< 
static<<	 
void<< 
ApplyVolume<<  
(<<  !
double<<! '
	newVolume<<( 1
)<<1 2
{== 
MusicVolume>> 
=>> 
	newVolume>> 
;>> 
MusicPlayer?? 
.?? 
Volume?? 
=?? 
MusicVolume?? #
;??# $
}@@ 
publicBB 
staticBB	 
voidBB 
TogglePlayPauseBB $
(BB$ %
)BB% &
{CC 
ifDD 
(DD 
	IsPlayingDD 
)DD 
{EE 
MusicPlayerFF 
.FF 
PauseFF 
(FF 
)FF 
;FF 
	IsPlayingGG 
=GG 
falseGG 
;GG 
}HH 
elseII 
{JJ 
MusicPlayerKK 
.KK 
PlayKK 
(KK 
)KK 
;KK 
	IsPlayingLL 
=LL 
trueLL 
;LL 
}MM 
}NN 
}OO 
}PP ˝K
fC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Utilities\LobbyManager.cs
	namespace		 	
DamasChinas_Client		
 
.		 
UI		 
.		  
	Utilities		  )
{

 
public 

class 
LobbyManager 
: !
ILobbyServiceCallback  5
{ 
private 
readonly 
LobbyServiceClient +
_client, 3
;3 4
private 
readonly "
SynchronizationContext /

_uiContext0 :
;: ;
public 
event 
Action 
< 
LobbyMember '
>' (
MemberJoined) 5
;5 6
public 
event 
Action 
< 
int 
>  

MemberLeft! +
;+ ,
public 
event 
Action 
< 
int 
,  
string! '
,' (
string) /
,/ 0
string1 7
>7 8
MessageReceived9 H
;H I
public 
event 
Action 
< 
string "
>" #
LobbyClosed$ /
;/ 0
public 
event 
Action 
< 
string "
>" #
GameStarted$ /
;/ 0
public 
Lobby 
CurrentLobby !
{" #
get$ '
;' (
private) 0
set1 4
;4 5
}6 7
public 
int 
CurrentUserId  
{! "
get# &
;& '
private( /
set0 3
;3 4
}5 6
public 
string 
CurrentUsername %
{& '
get( +
;+ ,
private- 4
set5 8
;8 9
}: ;
public 
LobbyManager 
( 
) 
{ 	

_uiContext 
= "
SynchronizationContext /
./ 0
Current0 7
??8 :
new; >"
SynchronizationContext? U
(U V
)V W
;W X
var 
context 
= 
new 
InstanceContext -
(- .
this. 2
)2 3
;3 4
_client 
= 
new 
LobbyServiceClient ,
(, -
context- 4
,4 5
$str6 S
)S T
;T U
}   	
public"" 
Lobby"" 
CreateLobby""  
(""  !
int""! $
userId""% +
,""+ ,
string""- 3
username""4 <
,""< =
bool""> B
	isPrivate""C L
)""L M
{## 	
CurrentUserId$$ 
=$$ 
userId$$ "
;$$" #
CurrentUsername%% 
=%% 
username%% &
;%%& '
CurrentLobby&& 
=&& 
_client&& "
.&&" #
CreateLobby&&# .
(&&. /
userId&&/ 5
,&&5 6
username&&7 ?
,&&? @
	isPrivate&&A J
)&&J K
;&&K L
return'' 
CurrentLobby'' 
;''  
}(( 	
public** 
Lobby** 
	JoinLobby** 
(** 
string** %
code**& *
,*** +
int**, /
userId**0 6
,**6 7
string**8 >
username**? G
)**G H
{++ 	
CurrentUserId,, 
=,, 
userId,, "
;,," #
CurrentUsername-- 
=-- 
username-- &
;--& '
CurrentLobby.. 
=.. 
_client.. "
..." #
	JoinLobby..# ,
(.., -
code..- 1
,..1 2
userId..3 9
,..9 :
username..; C
)..C D
;..D E
return// 
CurrentLobby// 
;//  
}00 	
public22 
void22 

LeaveLobby22 
(22 
)22  
{33 	
if44 
(44 
CurrentLobby44 
!=44 
null44  $
)44$ %
{55 
_client66 
.66 

LeaveLobby66 "
(66" #
CurrentLobby66# /
.66/ 0
Code660 4
,664 5
CurrentUserId666 C
)66C D
;66D E
}77 
}88 	
public:: 
void:: 
	BanMember:: 
(:: 
int:: !
userId::" (
)::( )
{;; 	
if<< 
(<< 
CurrentLobby<< 
!=<< 
null<<  $
)<<$ %
{== 
_client>> 
.>> 
	BanMember>> !
(>>! "
CurrentLobby>>" .
.>>. /
Code>>/ 3
,>>3 4
userId>>5 ;
)>>; <
;>>< =
}?? 
}@@ 	
publicBB 
voidBB 
SendMessageBB 
(BB  
stringBB  &
messageBB' .
)BB. /
{CC 	
ifDD 
(DD 
CurrentLobbyDD 
!=DD 
nullDD  $
)DD$ %
{EE 
_clientFF 
.FF 
SendLobbyMessageFF (
(FF( )
CurrentLobbyFF) 5
.FF5 6
CodeFF6 :
,FF: ;
CurrentUserIdFF< I
,FFI J
CurrentUsernameFFK Z
,FFZ [
messageFF\ c
)FFc d
;FFd e
}GG 
}HH 	
publicJJ 
voidJJ 
	StartGameJJ 
(JJ 
)JJ 
{KK 	
ifLL 
(LL 
CurrentLobbyLL 
!=LL 
nullLL  $
)LL$ %
{MM 
_clientNN 
.NN 
	StartGameNN !
(NN! "
CurrentLobbyNN" .
.NN. /
CodeNN/ 3
)NN3 4
;NN4 5
}OO 
}PP 	
publicRR 
ListRR 
<RR 
LobbyRR 
>RR 
GetPublicLobbiesRR +
(RR+ ,
)RR, -
{SS 	
ifTT 
(TT 
_clientTT 
==TT 
nullTT 
)TT  
throwUU 
newUU %
InvalidOperationExceptionUU 3
(UU3 4
$strUU4 \
)UU\ ]
;UU] ^
varWW 
resultWW 
=WW 
_clientWW  
.WW  !
GetPublicLobbiesWW! 1
(WW1 2
)WW2 3
;WW3 4
returnXX 
resultXX 
!=XX 
nullXX !
?XX" #
resultXX$ *
.XX* +
ToListXX+ 1
(XX1 2
)XX2 3
:XX4 5
newXX6 9
ListXX: >
<XX> ?
LobbyXX? D
>XXD E
(XXE F
)XXF G
;XXG H
}YY 	
void]] !
ILobbyServiceCallback]] "
.]]" #
OnMemberJoined]]# 1
(]]1 2
LobbyMember]]2 =
member]]> D
)]]D E
{^^ 	

_uiContext__ 
.__ 
Post__ 
(__ 
___ 
=>__  
MemberJoined__! -
?__- .
.__. /
Invoke__/ 5
(__5 6
member__6 <
)__< =
,__= >
null__? C
)__C D
;__D E
}`` 	
voidbb !
ILobbyServiceCallbackbb "
.bb" #
OnMemberLeftbb# /
(bb/ 0
intbb0 3
userIdbb4 :
)bb: ;
{cc 	

_uiContextdd 
.dd 
Postdd 
(dd 
_dd 
=>dd  

MemberLeftdd! +
?dd+ ,
.dd, -
Invokedd- 3
(dd3 4
userIddd4 :
)dd: ;
,dd; <
nulldd= A
)ddA B
;ddB C
}ee 	
voidgg !
ILobbyServiceCallbackgg "
.gg" #
OnMessageReceivedgg# 4
(gg4 5
intgg5 8
userIdgg9 ?
,gg? @
stringggA G
usernameggH P
,ggP Q
stringggR X
messageggY `
,gg` a
stringggb h
utcggi l
)ggl m
{hh 	

_uiContextii 
.ii 
Postii 
(ii 
_ii 
=>ii  
MessageReceivedii! 0
?ii0 1
.ii1 2
Invokeii2 8
(ii8 9
userIdii9 ?
,ii? @
usernameiiA I
,iiI J
messageiiK R
,iiR S
utciiT W
)iiW X
,iiX Y
nulliiZ ^
)ii^ _
;ii_ `
}jj 	
voidll !
ILobbyServiceCallbackll "
.ll" #
OnLobbyClosedll# 0
(ll0 1
stringll1 7
reasonll8 >
)ll> ?
{mm 	

_uiContextnn 
.nn 
Postnn 
(nn 
_nn 
=>nn  
LobbyClosednn! ,
?nn, -
.nn- .
Invokenn. 4
(nn4 5
reasonnn5 ;
)nn; <
,nn< =
nullnn> B
)nnB C
;nnC D
}oo 	
voidqq !
ILobbyServiceCallbackqq "
.qq" #
OnGameStartedqq# 0
(qq0 1
stringqq1 7
codeqq8 <
)qq< =
{rr 	

_uiContextss 
.ss 
Postss 
(ss 
_ss 
=>ss  
GameStartedss! ,
?ss, -
.ss- .
Invokess. 4
(ss4 5
codess5 9
)ss9 :
,ss: ;
nullss< @
)ss@ A
;ssA B
}tt 	
}uu 
}vv ª:
iC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Utilities\LanguageManager.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
	Utilities  )
{ 
public

 
static

 
class

 
LanguageManager

 $
{ 
public 
static	 
void 
ChangeLanguage #
(# $
string$ *
cultureCode+ 6
)6 7
{ 
try 
{ 
var !
newLanguageDictionary 
= $
CreateLanguageDictionary  8
(8 9
cultureCode9 D
)D E
;E F
var &
existingLanguageDictionary "
=# $*
FindExistingLanguageDictionary% C
(C D
)D E
;E F"
ReplaceOrAddDictionary 
( !
newLanguageDictionary 0
,0 1&
existingLanguageDictionary2 L
)L M
;M N 
EnsureThemeResources 
( 
) 
; 
UpdateCulture 
( 
cultureCode 
) 
; 
} 
catch 
(	 

	Exception
 
ex 
) 
{ 

MessageBox 
. 
Show 
( 
$" 
$str 5
{5 6
ex6 8
.8 9
Message9 @
}@ A
"A B
,B C
$strD K
,K L
MessageBoxButtonM ]
.] ^
OK^ `
,` a
MessageBoxImageb q
.q r
Errorr w
)w x
;x y
} 
} 
private   	
static  
 
ResourceDictionary   #$
CreateLanguageDictionary  $ <
(  < =
string  = C
cultureCode  D O
)  O P
{!! 
var"" 
resourceDictionary"" 
="" 
new"" 
ResourceDictionary""  2
(""2 3
)""3 4
;""4 5
switch$$ 	
($$
 
cultureCode$$ 
)$$ 
{%% 
case&& 
$str&&	 
:&& 
resourceDictionary'' 
.'' 
Source'' 
=''  
new''! $
Uri''% (
(''( )
$str(( U
,((U V
UriKind)) 
.)) 
Absolute)) 
))) 
;)) 
break** 

;**
 
default,, 
:,, 
resourceDictionary-- 
.-- 
Source-- 
=--  
new--! $
Uri--% (
(--( )
$str.. U
,..U V
UriKind// 
.// 
Absolute// 
)// 
;// 
break00 

;00
 
}11 
return33 	
resourceDictionary33
 
;33 
}44 
private66 	
static66
 
ResourceDictionary66 #*
FindExistingLanguageDictionary66$ B
(66B C
)66C D
{77 
foreach88 

(88 
var88 

dictionary88 
in88 
Application88 )
.88) *
Current88* 1
.881 2
	Resources882 ;
.88; <
MergedDictionaries88< N
)88N O
{99 
if:: 
(:: 

dictionary:: 
.:: 
Source:: 
!=:: 
null:: !
&&::" $
(;; 

dictionary;; 
.;; 
Source;; 
.;; 
OriginalString;; &
.;;& '
Contains;;' /
(;;/ 0
$str;;0 >
);;> ?
||;;@ B

dictionary<< 
.<< 
Source<< 
.<< 
OriginalString<< &
.<<& '
Contains<<' /
(<</ 0
$str<<0 >
)<<> ?
)<<? @
)<<@ A
{== 
return>> 

dictionary>> 
;>> 
}?? 
}@@ 
returnBB 	
nullBB
 
;BB 
}CC 
privateEE 	
staticEE
 
voidEE "
ReplaceOrAddDictionaryEE ,
(EE, -
ResourceDictionaryEE- ?
newDictionaryEE@ M
,EEM N
ResourceDictionaryEEO a
existingDictionaryEEb t
)EEt u
{FF 
ifGG 
(GG 
existingDictionaryGG 
!=GG 
nullGG !
)GG! "
{HH 
intII 
indexII 
=II 
ApplicationII 
.II 
CurrentII #
.II# $
	ResourcesII$ -
.II- .
MergedDictionariesII. @
.II@ A
IndexOfIIA H
(IIH I
existingDictionaryIII [
)II[ \
;II\ ]
ApplicationJJ 
.JJ 
CurrentJJ 
.JJ 
	ResourcesJJ !
.JJ! "
MergedDictionariesJJ" 4
[JJ4 5
indexJJ5 :
]JJ: ;
=JJ< =
newDictionaryJJ> K
;JJK L
}KK 
elseLL 
{MM 
ApplicationNN 
.NN 
CurrentNN 
.NN 
	ResourcesNN !
.NN! "
MergedDictionariesNN" 4
.NN4 5
AddNN5 8
(NN8 9
newDictionaryNN9 F
)NNF G
;NNG H
}OO 
}PP 
privateRR 	
staticRR
 
voidRR  
EnsureThemeResourcesRR *
(RR* +
)RR+ ,
{SS 
varTT 
themeDictionaryTT 
=TT 
newTT 
ResourceDictionaryTT /
{UU 
SourceVV 

=VV 
newVV 
UriVV 
(VV 
$strWW O
,WWO P
UriKindXX 
.XX 
AbsoluteXX 
)XX 
}YY 
;YY 
var[[ 
buttonsDictionary[[ 
=[[ 
new[[ 
ResourceDictionary[[ 1
{\\ 
Source]] 

=]] 
new]] 
Uri]] 
(]] 
$str^^ Q
,^^Q R
UriKind__ 
.__ 
Absolute__ 
)__ 
}`` 
;`` 
Applicationbb 
.bb 
Currentbb 
.bb 
	Resourcesbb  
.bb  !
MergedDictionariesbb! 3
.bb3 4
Addbb4 7
(bb7 8
themeDictionarybb8 G
)bbG H
;bbH I
Applicationcc 
.cc 
Currentcc 
.cc 
	Resourcescc  
.cc  !
MergedDictionariescc! 3
.cc3 4
Addcc4 7
(cc7 8
buttonsDictionarycc8 I
)ccI J
;ccJ K
}dd 
privateff 	
staticff
 
voidff 
UpdateCultureff #
(ff# $
stringff$ *
cultureCodeff+ 6
)ff6 7
{gg 
varhh 
culturehh 
=hh 
newhh 
CultureInfohh  
(hh  !
cultureCodehh! ,
)hh, -
;hh- .
CultureInfoii 
.ii '
DefaultThreadCurrentCultureii *
=ii+ ,
cultureii- 4
;ii4 5
CultureInfojj 
.jj )
DefaultThreadCurrentUICulturejj ,
=jj- .
culturejj/ 6
;jj6 7
}kk 
}ll 
}mm µY
cC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Utilities\Validator.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
	Utilities  )
{ 
internal 	
static
 
class 
	Validator  
{ 
private		 	
static		
 
readonly		 
Regex		 
	NameRegex		  )
=		* +
new		, /
Regex		0 5
(		5 6
$str		6 O
,		O P
RegexOptions		Q ]
.		] ^
Compiled		^ f
)		f g
;		g h
private

 	
static


 
readonly

 
Regex

 
UsernameRegex

  -
=

. /
new

0 3
Regex

4 9
(

9 :
$str

: L
,

L M
RegexOptions

N Z
.

Z [
Compiled

[ c
)

c d
;

d e
private 	
static
 
readonly 
Regex "
PasswordUppercaseRegex  6
=7 8
new9 <
Regex= B
(B C
$strC J
,J K
RegexOptionsL X
.X Y
CompiledY a
)a b
;b c
private 	
static
 
readonly 
Regex "
PasswordLowercaseRegex  6
=7 8
new9 <
Regex= B
(B C
$strC J
,J K
RegexOptionsL X
.X Y
CompiledY a
)a b
;b c
private 	
static
 
readonly 
Regex 
PasswordDigitRegex  2
=3 4
new5 8
Regex9 >
(> ?
$str? F
,F G
RegexOptionsH T
.T U
CompiledU ]
)] ^
;^ _
private 	
static
 
readonly 
Regex  
PasswordSpecialRegex  4
=5 6
new7 :
Regex; @
(@ A
$strA I
,I J
RegexOptionsK W
.W X
CompiledX `
)` a
;a b
private 	
static
 
readonly 
Regex 

EmailRegex  *
=+ ,
new- 0
Regex1 6
(6 7
$str7 W
,W X
RegexOptionsY e
.e f
Compiledf n
)n o
;o p
private 	
static
 
string 
	Normalize !
(! "
string" (
value) .
). /
{ 
return 	
value
 
? 
. 
Trim 
( 
) 
; 
} 
public 
static	 
void 
ValidateName !
(! "
string" (
name) -
)- .
{ 
name 
= 	
	Normalize
 
( 
name 
) 
; 
if 
( 
string 
. 
IsNullOrWhiteSpace  
(  !
name! %
)% &
)& '
{ 
throw 	
new
 
ArgumentException 
(  
$str  A
)A B
;B C
} 
if 
( 
name 
. 
Length 
< 
$num 
|| 
name 
. 
Length %
>& '
$num( *
)* +
{   
throw!! 	
new!!
 
ArgumentException!! 
(!!  
$str!!  O
)!!O P
;!!P Q
}"" 
if$$ 
($$ 
!$$ 
	NameRegex$$ 
.$$ 
IsMatch$$ 
($$ 
name$$ 
)$$ 
)$$  
{%% 
throw&& 	
new&&
 
ArgumentException&& 
(&&  
$str&&  J
)&&J K
;&&K L
}'' 
}(( 
public** 
static**	 
void** 
ValidateUsername** %
(**% &
string**& ,
username**- 5
)**5 6
{++ 
username,, 
=,, 
	Normalize,, 
(,, 
username,,  
),,  !
;,,! "
if.. 
(.. 
string.. 
... 
IsNullOrWhiteSpace..  
(..  !
username..! )
)..) *
)..* +
{// 
throw00 	
new00
 
ArgumentException00 
(00  
$str00  L
)00L M
;00M N
}11 
if33 
(33 
username33 
.33 
Length33 
<33 
$num33 
||33 
username33 &
.33& '
Length33' -
>33. /
$num330 2
)332 3
{44 
throw55 	
new55
 
ArgumentException55 
(55  
$str55  Z
)55Z [
;55[ \
}66 
if88 
(88 
!88 
UsernameRegex88 
.88 
IsMatch88 
(88 
username88 &
)88& '
)88' (
{99 
throw:: 	
new::
 
ArgumentException:: 
(::  
$str::  U
)::U V
;::V W
};; 
}<< 
public>> 
static>>	 
void>> 
ValidatePassword>> %
(>>% &
string>>& ,
password>>- 5
)>>5 6
{?? 
password@@ 
=@@ 
	Normalize@@ 
(@@ 
password@@  
)@@  !
;@@! "
ifBB 
(BB 
stringBB 
.BB 
IsNullOrWhiteSpaceBB  
(BB  !
passwordBB! )
)BB) *
)BB* +
{CC 
throwDD 	
newDD
 
ArgumentExceptionDD 
(DD  
$strDD  E
)DDE F
;DDF G
}EE 
ifGG 
(GG 
passwordGG 
.GG 
LengthGG 
<GG 
$numGG 
)GG 
{HH 
throwII 	
newII
 
ArgumentExceptionII 
(II  
$strII  Q
)IIQ R
;IIR S
}JJ 
ifLL 
(LL 
!LL "
PasswordUppercaseRegexLL 
.LL 
IsMatchLL &
(LL& '
passwordLL' /
)LL/ 0
)LL0 1
{MM 
throwNN 	
newNN
 
ArgumentExceptionNN 
(NN  
$strNN  X
)NNX Y
;NNY Z
}OO 
ifQQ 
(QQ 
!QQ "
PasswordLowercaseRegexQQ 
.QQ 
IsMatchQQ &
(QQ& '
passwordQQ' /
)QQ/ 0
)QQ0 1
{RR 
throwSS 	
newSS
 
ArgumentExceptionSS 
(SS  
$strSS  X
)SSX Y
;SSY Z
}TT 
ifVV 
(VV 
!VV 
PasswordDigitRegexVV 
.VV 
IsMatchVV "
(VV" #
passwordVV# +
)VV+ ,
)VV, -
{WW 
throwXX 	
newXX
 
ArgumentExceptionXX 
(XX  
$strXX  N
)XXN O
;XXO P
}YY 
if[[ 
([[ 
![[  
PasswordSpecialRegex[[ 
.[[ 
IsMatch[[ $
([[$ %
password[[% -
)[[- .
)[[. /
{\\ 
throw]] 	
new]]
 
ArgumentException]] 
(]]  
$str]]  Y
)]]Y Z
;]]Z [
}^^ 
}__ 
publicaa 
staticaa	 
voidaa 
ValidateEmailaa "
(aa" #
stringaa# )
emailaa* /
)aa/ 0
{bb 
emailcc 
=cc	 

	Normalizecc 
(cc 
emailcc 
)cc 
;cc 
ifee 
(ee 
stringee 
.ee 
IsNullOrWhiteSpaceee  
(ee  !
emailee! &
)ee& '
)ee' (
{ff 
throwgg 	
newgg
 
ArgumentExceptiongg 
(gg  
$strgg  A
)ggA B
;ggB C
}hh 
ifjj 
(jj 
emailjj 
.jj 
Lengthjj 
>jj 
$numjj 
)jj 
{kk 
throwll 	
newll
 
ArgumentExceptionll 
(ll  
$strll  ?
)ll? @
;ll@ A
}mm 
ifoo 
(oo 
!oo 

EmailRegexoo 
.oo 
IsMatchoo 
(oo 
emailoo  
)oo  !
)oo! "
{pp 
throwqq 	
newqq
 
ArgumentExceptionqq 
(qq  
$strqq  F
)qqF G
;qqG H
}rr 
}ss 
publicuu 
staticuu	 
voiduu  
ValidateLoginRequestuu )
(uu) *
LoginRequestuu* 6
loginRequestuu7 C
)uuC D
{vv 
ifww 
(ww 
loginRequestww 
==ww 
nullww 
)ww 
{xx 
throwyy 	
newyy
 !
ArgumentNullExceptionyy #
(yy# $
nameofyy$ *
(yy* +
loginRequestyy+ 7
)yy7 8
)yy8 9
;yy9 :
}zz 
loginRequest|| 
.|| 
Username|| 
=|| 
	Normalize|| $
(||$ %
loginRequest||% 1
.||1 2
Username||2 :
)||: ;
;||; <
loginRequest}} 
.}} 
Password}} 
=}} 
	Normalize}} $
(}}$ %
loginRequest}}% 1
.}}1 2
Password}}2 :
)}}: ;
;}}; <
if 
( 
string 
. 
IsNullOrWhiteSpace  
(  !
loginRequest! -
.- .
Username. 6
)6 7
)7 8
{
ÄÄ 
throw
ÅÅ 	
new
ÅÅ
 
ArgumentException
ÅÅ 
(
ÅÅ  
$str
ÅÅ  C
)
ÅÅC D
;
ÅÅD E
}
ÇÇ 
if
ÑÑ 
(
ÑÑ 
loginRequest
ÑÑ 
.
ÑÑ 
Username
ÑÑ 
.
ÑÑ 
Contains
ÑÑ %
(
ÑÑ% &
$str
ÑÑ& )
)
ÑÑ) *
)
ÑÑ* +
{
ÖÖ 
ValidateEmail
ÜÜ 
(
ÜÜ 
loginRequest
ÜÜ 
.
ÜÜ 
Username
ÜÜ '
)
ÜÜ' (
;
ÜÜ( )
}
áá 
else
àà 
{
ââ 
ValidateUsername
ää 
(
ää 
loginRequest
ää !
.
ää! "
Username
ää" *
)
ää* +
;
ää+ ,
}
ãã 
if
çç 
(
çç 
string
çç 
.
çç  
IsNullOrWhiteSpace
çç  
(
çç  !
loginRequest
çç! -
.
çç- .
Password
çç. 6
)
çç6 7
)
çç7 8
{
éé 
throw
èè 	
new
èè
 
ArgumentException
èè 
(
èè  
$str
èè  =
)
èè= >
;
èè> ?
}
êê 
}
ëë 
}
íí 
}ìì Ë

gC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Utilities\ServiceHelper.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
	Utilities  )
{ 
public 
static 
class 
ServiceHelper "
{ 
public 
static	 
void 
	SafeClose 
(  
ICommunicationObject 3
client4 :
): ;
{ 
if 
( 
client 
== 
null 
) 
{ 
return 

;
 
} 
try 
{ 
if 
( 
client 
. 
State 
== 
CommunicationState *
.* +
Faulted+ 2
)2 3
{ 
client 
. 
Abort 
( 
) 
; 
} 
else 
{ 
client 
. 
Close 
( 
) 
; 
} 
} 
catch 
{ 
client 

.
 
Abort 
( 
) 
; 
}   
}!! 
}"" 
}## Ã
hC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Utilities\LoaderBar.xaml.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
	Utilities  )
{ 
public 

partial 
class 
	LoaderBar "
:# $
UserControl% 0
{ 
public 
	LoaderBar 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
} 
} ∞
qC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Utilities\HostVisibilityConverter.cs
	namespace

 	
DamasChinas_Client


 
.

 
UI

 
.

  
	Utilities

  )
{ 
public 

class #
HostVisibilityConverter (
:) *
IValueConverter+ :
{ 
public 
object 
Convert 
( 
object $
value% *
,* +
Type, 0

targetType1 ;
,; <
object= C
	parameterD M
,M N
CultureInfoO Z
culture[ b
)b c
{ 	
if 
( 
value 
is 
bool 
isHost $
&&% '
isHost( .
). /
{ 
return 

Visibility !
.! "
Visible" )
;) *
} 
return 

Visibility 
. 
	Collapsed '
;' (
} 	
public 
object 
ConvertBack !
(! "
object" (
value) .
,. /
Type0 4

targetType5 ?
,? @
objectA G
	parameterH Q
,Q R
CultureInfoS ^
culture_ f
)f g
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
}   
}!! ÷)
kC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Utilities\MessageTranslator.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
	Utilities  )
{ 
public		 

static		 
class		 
MessageTranslator		 )
{

 
public 
static 
string 
GetLocalizedMessage 0
(0 1
string1 7
resourceKey8 C
)C D
{ 	
try 
{ 
object 
resource 
=  !
Application" -
.- .
Current. 5
.5 6
TryFindResource6 E
(E F
resourceKeyF Q
)Q R
;R S
return 
resource 
!=  "
null# '
?( )
resource* 2
.2 3
ToString3 ;
(; <
)< =
:> ?
resourceKey@ K
;K L
} 
catch 
{ 
return 
resourceKey "
;" #
} 
} 	
public 
static 
string 
GetLocalizedMessage 0
(0 1
Enum1 5
code6 :
): ;
{ 	
try   
{!! 
string"" 
key"" 
="" 
GetResourceKey"" +
(""+ ,
code"", 0
)""0 1
;""1 2
object## 
resource## 
=##  !
Application##" -
.##- .
Current##. 5
.##5 6
TryFindResource##6 E
(##E F
key##F I
)##I J
;##J K
return%% 
resource%% 
!=%%  "
null%%# '
?%%( )
resource%%* 2
.%%2 3
ToString%%3 ;
(%%; <
)%%< =
:%%> ?
$"%%@ B
$str%%B C
{%%C D
code%%D H
}%%H I
$str%%I J
"%%J K
;%%K L
}&& 
catch'' 
{(( 
return)) 
code)) 
.)) 
ToString)) $
())$ %
)))% &
;))& '
}** 
}++ 	
private00 
static00 
string00 
GetResourceKey00 ,
(00, -
Enum00- 1
code002 6
)006 7
{11 	
switch22 
(22 
code22 
.22 
ToString22 !
(22! "
)22" #
)22# $
{33 
case55 
$str55 
:55 
return55  &
$str55' 4
;554 5
case88 
$str88 .
:88. /
return880 6
$str887 T
;88T U
case99 
$str99 )
:99) *
return99+ 1
$str992 J
;99J K
case:: 
$str:: #
:::# $
return::% +
$str::, >
;::> ?
case== 
$str== *
:==* +
return==, 2
$str==3 L
;==L M
case@@ 
$str@@ (
:@@( )
return@@* 0
$str@@1 H
;@@H I
caseAA 
$strAA %
:AA% &
returnAA' -
$strAA. B
;AAB C
caseBB 
$strBB #
:BB# $
returnBB% +
$strBB, >
;BB> ?
caseEE 
$strEE '
:EE' (
returnEE) /
$strEE0 F
;EEF G
caseFF 
$strFF )
:FF) *
returnFF+ 1
$strFF2 J
;FFJ K
caseGG 
$strGG &
:GG& '
returnGG( .
$strGG/ D
;GGD E
caseHH 
$strHH $
:HH$ %
returnHH& ,
$strHH- @
;HH@ A
caseII 
$strII *
:II* +
returnII, 2
$strII3 L
;IIL M
caseJJ 
$strJJ '
:JJ' (
returnJJ) /
$strJJ0 F
;JJF G
caseKK 
$strKK #
:KK# $
returnKK% +
$strKK, >
;KK> ?
caseLL 
$strLL *
:LL* +
returnLL, 2
$strLL3 L
;LLL M
caseMM 
$strMM $
:MM$ %
returnMM& ,
$strMM- @
;MM@ A
caseNN 
$strNN &
:NN& '
returnNN( .
$strNN/ D
;NND E
caseOO 
$strOO )
:OO) *
returnOO+ 1
$strOO2 J
;OOJ K
casePP 
$strPP +
:PP+ ,
returnPP- 3
$strPP4 N
;PPN O
caseQQ 
$strQQ '
:QQ' (
returnQQ) /
$strQQ0 F
;QQF G
caseRR 
$strRR +
:RR+ ,
returnRR- 3
$strRR4 N
;RRN O
caseSS 
$strSS &
:SS& '
returnSS( .
$strSS/ D
;SSD E
caseVV 
$strVV +
:VV+ ,
returnVV- 3
$strVV4 N
;VVN O
caseWW 
$strWW )
:WW) *
returnWW+ 1
$strWW2 J
;WWJ K
defaultYY 
:YY 
returnZZ 
$strZZ -
;ZZ- .
}[[ 
}\\ 	
}]] 
}^^ ˝
iC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\PopUps\LoadingWindow.xaml.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
PopUps  &
{		 
public

 

partial

 
class

 
LoadingWindow

 &
:

' (
Window

) /
{ 
private 
readonly 
Task 
_minDurationTask .
;. /
public 
LoadingWindow 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
	TitleText 
. 
Text 
= 
MessageTranslator .
.. /
GetLocalizedMessage/ B
(B C
$strC Q
)Q R
;R S
_minDurationTask 
= 
Task #
.# $
Delay$ )
() *
$num* .
). /
;/ 0
Loaded 
+= 
OnLoaded 
; 
} 	
private 
void 
OnLoaded 
( 
object $
sender% +
,+ ,
RoutedEventArgs- <
e= >
)> ?
{ 	
try 
{ 
if   
(   
Loader   
.   
	Resources   $
[  $ %
$str  % 8
]  8 9
is  : <

Storyboard  = G

storyboard  H R
)  R S
{!! 

storyboard"" 
."" 
Begin"" $
(""$ %
)""% &
;""& '
}## 
}$$ 
catch%% 
(%% 
	Exception%% 
ex%% 
)%%  
{&& 
Debug'' 
.'' 
	WriteLine'' 
(''  
$"''  "
$str''" ;
{''; <
ex''< >
.''> ?
Message''? F
}''F G
"''G H
)''H I
;''I J
})) 
}** 	
public// 
Task// 
WaitMinimumAsync// $
(//$ %
)//% &
{00 	
return11 
_minDurationTask11 #
;11# $
}22 	
}33 
}44 ñ
`C:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Utilities\Hasher.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
	Utilities  )
{ 
public 

static 
class 
Hasher 
{ 
public

 
static

 
string

 
HashPassword

 )
(

) *
string

* 0
plainPassword

1 >
)

> ?
{ 	
if 
( 
string 
. 
IsNullOrWhiteSpace )
() *
plainPassword* 7
)7 8
)8 9
{ 
throw 
new 
ArgumentException +
(+ ,
$str, Q
)Q R
;R S
} 
using 
( 
var 
sha 
= 
SHA256 #
.# $
Create$ *
(* +
)+ ,
), -
{ 
byte 
[ 
] 
bytes 
= 
Encoding '
.' (
UTF8( ,
., -
GetBytes- 5
(5 6
plainPassword6 C
)C D
;D E
byte 
[ 
] 
hash 
= 
sha !
.! "
ComputeHash" -
(- .
bytes. 3
)3 4
;4 5
return 
Convert 
. 
ToBase64String -
(- .
hash. 2
)2 3
;3 4
} 
} 	
} 
} ¶
dC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Utilities\FriendList.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
	Utilities  )
{ 
public 
class 

FriendList 
{ 
public 
string	 
Username 
{ 
get 
; 
set  #
;# $
}% &
public 
bool	 
EnLinea 
{ 
get 
; 
set  
;  !
}" #
public 
string	 
Avatar 
{ 
get 
; 
set !
;! "
}# $
} 
}		 ∫
rC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\PopUps\VerificationCodeWindow.xaml.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
PopUps  &
{ 
public 

partial 
class "
VerificationCodeWindow /
:0 1
Window2 8
{ 
public "
VerificationCodeWindow %
(% &
)& '
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
private   
void   
OnVerifyClick   "
(  " #
object  # )
sender  * 0
,  0 1
RoutedEventArgs  2 A
e  B C
)  C D
{!! 	
try"" 
{## 
string$$ 
code$$ 
=$$ 
txtVerificationCode$$ 1
.$$1 2
Text$$2 6
.$$6 7
Trim$$7 ;
($$; <
)$$< =
;$$= >
if'' 
('' 
string'' 
.'' 
IsNullOrWhiteSpace'' -
(''- .
code''. 2
)''2 3
)''3 4
{(( 
MessageHelper)) !
.))! "
	ShowPopup))" +
())+ ,
MessageTranslator** )
.**) *
GetLocalizedMessage*** =
(**= >
$str**> Y
)**Y Z
,**Z [
$str++ !
),, 
;,, 
return-- 
;-- 
}.. 
bool11 
isValid11 
=11 
code11 #
==11$ &
$str11' -
;11- .
if33 
(33 
!33 
isValid33 
)33 
{44 
MessageHelper55 !
.55! "
	ShowPopup55" +
(55+ ,
MessageTranslator66 )
.66) *
GetLocalizedMessage66* =
(66= >
$str66> [
)66[ \
,66\ ]
$str77 
)88 
;88 
return99 
;99 
}:: 
MessageHelper== 
.== 
	ShowPopup== '
(==' (
MessageTranslator>> %
.>>% &
GetLocalizedMessage>>& 9
(>>9 :
$str>>: S
)>>S T
,>>T U
$str?? 
)@@ 
;@@ 
thisCC 
.CC 
DialogResultCC !
=CC" #
trueCC$ (
;CC( )
thisDD 
.DD 
CloseDD 
(DD 
)DD 
;DD 
}EE 
catchFF 
(FF 
	ExceptionFF 
exFF 
)FF  
{GG 
DebugHH 
.HH 
	WriteLineHH 
(HH  
$"HH  "
$strHH" I
{HHI J
exHHJ L
.HHL M
MessageHHM T
}HHT U
"HHU V
)HHV W
;HHW X
MessageHelperJJ 
.JJ 
	ShowPopupJJ '
(JJ' (
MessageTranslatorKK %
.KK% &
GetLocalizedMessageKK& 9
(KK9 :
$strKK: L
)KKL M
,KKM N
$strLL 
)MM 
;MM 
}NN 
}OO 	
privateSS 
voidSS 
OnExitClickSS  
(SS  !
objectSS! '
senderSS( .
,SS. /
RoutedEventArgsSS0 ?
eSS@ A
)SSA B
{TT 	
thisVV 
.VV 
DialogResultVV 
=VV 
falseVV  %
;VV% &
thisWW 
.WW 
CloseWW 
(WW 
)WW 
;WW 
}XX 	
}YY 
}ZZ œ
hC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Utilities\MessageHerlper.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
	Utilities  )
{		 
public

 

static

 
class

 
MessageHelper

 %
{ 
public 
static 
void 
	ShowPopup $
($ %
string% +
message, 3
,3 4
string5 ;
type< @
=A B
$strC I
,I J
boolK O
	autoCloseP Y
=Z [
false\ a
)a b
{ 	
var 
popup 
= 
new 
MessagePopupWindow .
(. /
message/ 6
,6 7
type8 <
,< =
	autoClose> G
)G H
{ 
Owner 
= 
Application #
.# $
Current$ +
.+ ,

MainWindow, 6
} 
; 
popup 
. 

ShowDialog 
( 
) 
; 
} 	
public 
static 
void 
ShowFromCode '
(' (
Enum( ,
code- 1
,1 2
string3 9
type: >
=? @
$strA G
)G H
{ 	
string 
message 
= 
MessageTranslator .
.. /
GetLocalizedMessage/ B
(B C
codeC G
)G H
;H I
	ShowPopup 
( 
message 
, 
type #
)# $
;$ %
} 	
public 
static 
bool 
ShowConfirmLogout ,
(, -
)- .
{ 	
var 
popup 
= 
new 
ConfirmPopupWindow .
{   
Owner!! 
=!! 
Application!! #
.!!# $
Current!!$ +
.!!+ ,

MainWindow!!, 6
}"" 
;"" 
popup$$ 
.$$ 

ShowDialog$$ 
($$ 
)$$ 
;$$ 
return%% 
popup%% 
.%% 
Result%% 
;%%  
}&& 	
public** 
static** 
void** 
ShowFromResult** )
(**) *
dynamic*** 1
result**2 8
)**8 9
{++ 	
if,, 
(,, 
result,, 
==,, 
null,, 
),, 
{-- 
	ShowPopup.. 
(.. 
MessageTranslator// %
.//% &
GetLocalizedMessage//& 9
(//9 :
$str//: L
)//L M
,//M N
$str00 
)11 
;11 
return22 
;22 
}33 
string55 
msg55 
=55 
MessageTranslator55 *
.55* +
GetLocalizedMessage55+ >
(55> ?
result55? E
.55E F
Code55F J
)55J K
;55K L
if77 
(77 
result77 
.77 
Success77 
)77 
{88 
	ShowPopup99 
(99 
msg99 
,99 
$str99 (
)99( )
;99) *
}:: 
else;; 
{<< 
	ShowPopup== 
(== 
msg== 
,== 
$str== &
)==& '
;==' (
}>> 
}?? 	
}@@ 
}AA ‹*
nC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\PopUps\MessagePopupWindow.xaml.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
PopUps  &
{ 
public 

partial 
class 
MessagePopupWindow +
:, -
Window. 4
{ 
private 
readonly 
bool 

_autoClose (
;( )
public 
MessagePopupWindow !
(! "
string" (
message) 0
,0 1
string2 8
type9 =
=> ?
$str@ F
,F G
boolH L
	autoCloseM V
=W X
falseY ^
)^ _
{ 	
InitializeComponent 
(  
)  !
;! "
MessageText 
. 
Text 
= 
message &
;& '

_autoClose 
= 
	autoClose "
;" #
ConfigureVisuals!! 
(!! 
type!! !
)!!! "
;!!" #
}"" 	
private$$ 
void$$ 
ConfigureVisuals$$ %
($$% &
string$$& ,
type$$- 1
)$$1 2
{%% 	
type&& 
=&& 
type&& 
?&& 
.&& 
ToLower&&  
(&&  !
)&&! "
??&&# %
$str&&& ,
;&&, -
string)) 
titleKey)) 
;)) 
if++ 
(++ 
type++ 
==++ 
$str++ !
)++! "
titleKey,, 
=,, 
$str,, *
;,,* +
else-- 
if-- 
(-- 
type-- 
==-- 
$str-- $
)--$ %
titleKey.. 
=.. 
$str.. (
;..( )
else// 
if// 
(// 
type// 
==// 
$str// &
)//& '
titleKey00 
=00 
$str00 *
;00* +
else11 
titleKey22 
=22 
$str22 .
;22. /
	TitleText55 
.55 
Text55 
=55 
MessageTranslator55 .
.55. /
GetLocalizedMessage55/ B
(55B C
titleKey55C K
)55K L
;55L M
switch99 
(99 
type99 
)99 
{:: 
case;; 
$str;; 
:;; 

IconCircle<< 
.<< 

Background<< )
=<<* +
new<<, /
SolidColorBrush<<0 ?
(<<? @
Color<<@ E
.<<E F
FromRgb<<F M
(<<M N
$num<<N O
,<<O P
$num<<Q T
,<<T U
$num<<V X
)<<X Y
)<<Y Z
;<<Z [
	IconGlyph== 
.== 
Text== "
===# $
$str==% (
;==( )
break>> 
;>> 
case@@ 
$str@@ 
:@@ 

IconCircleAA 
.AA 

BackgroundAA )
=AA* +
newAA, /
SolidColorBrushAA0 ?
(AA? @
ColorAA@ E
.AAE F
FromRgbAAF M
(AAM N
$numAAN Q
,AAQ R
$numAAS U
,AAU V
$numAAW Y
)AAY Z
)AAZ [
;AA[ \
	IconGlyphBB 
.BB 
TextBB "
=BB# $
$strBB% (
;BB( )
breakCC 
;CC 
caseEE 
$strEE 
:EE 

IconCircleFF 
.FF 

BackgroundFF )
=FF* +
newFF, /
SolidColorBrushFF0 ?
(FF? @
ColorFF@ E
.FFE F
FromRgbFFF M
(FFM N
$numFFN Q
,FFQ R
$numFFS V
,FFV W
$numFFX Y
)FFY Z
)FFZ [
;FF[ \
	IconGlyphGG 
.GG 
TextGG "
=GG# $
$strGG% (
;GG( )
breakHH 
;HH 
defaultJJ 
:JJ 

IconCircleKK 
.KK 

BackgroundKK )
=KK* +
newKK, /
SolidColorBrushKK0 ?
(KK? @
ColorKK@ E
.KKE F
FromRgbKKF M
(KKM N
$numKKN O
,KKO P
$numKKQ T
,KKT U
$numKKV Y
)KKY Z
)KKZ [
;KK[ \
	IconGlyphLL 
.LL 
TextLL "
=LL# $
$strLL% (
;LL( )
breakMM 
;MM 
}NN 
}OO 	
privateQQ 
asyncQQ 
voidQQ 
Window_LoadedQQ (
(QQ( )
objectQQ) /
senderQQ0 6
,QQ6 7
RoutedEventArgsQQ8 G
eQQH I
)QQI J
{RR 	
ifSS 
(SS 

_autoCloseSS 
)SS 
{TT 
awaitUU 
TaskUU 
.UU 
DelayUU  
(UU  !
$numUU! %
)UU% &
;UU& '
CloseVV 
(VV 
)VV 
;VV 
}WW 
}XX 	
privateZZ 
voidZZ 
	OnOkClickZZ 
(ZZ 
objectZZ %
senderZZ& ,
,ZZ, -
RoutedEventArgsZZ. =
eZZ> ?
)ZZ? @
{[[ 	
Close\\ 
(\\ 
)\\ 
;\\ 
}]] 	
}^^ 
}__ Õ
nC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\PopUps\ConfirmPopupWindow.xaml.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
PopUps  &
{ 
public 

partial 
class 
ConfirmPopupWindow +
:, -
Window. 4
{ 
public 
bool 
Result 
{ 
get  
;  !
private" )
set* -
;- .
}/ 0
public 
ConfirmPopupWindow !
(! "
)" #
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
private 
void 

OnYesClick 
(  
object  &
sender' -
,- .
RoutedEventArgs/ >
e? @
)@ A
{ 	
Result 
= 
true 
; 
Close 
( 
) 
; 
} 	
private!! 
void!! 
	OnNoClick!! 
(!! 
object!! %
sender!!& ,
,!!, -
RoutedEventArgs!!. =
e!!> ?
)!!? @
{"" 	
Result## 
=## 
false## 
;## 
Close$$ 
($$ 
)$$ 
;$$ 
}%% 	
}&& 
}(( ≤
gC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Utilities\ClientSession.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
	Utilities  )
{ 
public

 
static

 
class

 
ClientSession

 "
{ 
private 	
static
 
PublicProfile 
_currentProfile .
;. /
public 
static	 
PublicProfile 
CurrentProfile ,
{ 
get 
{ 
if 
( 
_currentProfile 
== 
null 
)  
{ 
throw 

new %
InvalidOperationException (
(( )
$str) [
)[ \
;\ ]
} 
return 

_currentProfile 
; 
} 
} 
public!! 
static!!	 
bool!! 

IsLoggedIn!! 
=>!!  "
_currentProfile!!# 2
!=!!3 5
null!!6 :
;!!: ;
public(( 
static((	 
void(( 

Initialize(( 
(((  
PublicProfile((  -
profile((. 5
)((5 6
{)) 
_currentProfile** 
=** 
profile** 
??** 
throw**  %
new**& )!
ArgumentNullException*** ?
(**? @
nameof**@ F
(**F G
profile**G N
)**N O
)**O P
;**P Q
}++ 
public00 
static00	 
void00 
Clear00 
(00 
)00 
{11 
_currentProfile22 
=22 
null22 
;22 
}33 
}44 
}55 °
mC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\PopUps\FriendRequestSent.xaml.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
PopUps  &
{ 
public 

partial 
class 
FriendRequestSent *
:+ ,
Window- 3
{ 
public 
FriendRequestSent  
(  !
bool! %
success& -
)- .
{ 	
InitializeComponent 
(  
)  !
;! "
	Configure 
( 
success 
) 
; 
} 	
private 
void 
	Configure 
( 
bool #
success$ +
)+ ,
{ 	
string 
iconPath 
; 
string   

messageKey   
;   
if"" 
("" 
success"" 
)"" 
{## 
iconPath$$ 
=$$ 
$str$$ o
;$$o p

messageKey%% 
=%% 
$str%% 2
;%%2 3
}&& 
else'' 
{(( 
iconPath)) 
=)) 
$str)) m
;))m n

messageKey** 
=** 
$str** 5
;**5 6
}++ 

StatusIcon-- 
.-- 
Source-- 
=-- 
new--  #
BitmapImage--$ /
(--/ 0
new--0 3
Uri--4 7
(--7 8
iconPath--8 @
,--@ A
UriKind--B I
.--I J
Absolute--J R
)--R S
)--S T
;--T U
StatusMessage.. 
... 
Text.. 
=..  
MessageTranslator..! 2
...2 3
GetLocalizedMessage..3 F
(..F G

messageKey..G Q
)..Q R
;..R S
}// 	
private11 
void11 
	OnOkClick11 
(11 
object11 %
sender11& ,
,11, -
RoutedEventArgs11. =
e11> ?
)11? @
{22 	
DialogResult33 
=33 
true33 
;33  
Close44 
(44 
)44 
;44 
}55 	
}66 
}77 øØ
cC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Pages\PreLobby.xaml.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
Pages  %
{ 
public 

partial 
class 
PreLobby !
:" #
Page$ (
{ 
private 
readonly 
LobbyManager %
_lobbyManager& 3
;3 4
private 
readonly 
Lobby 
_lobby %
;% &
private 
readonly 
string 
	_username  )
;) *
private 
readonly 
int 
_currentUserId +
;+ ,
public 
PreLobby 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
_lobbyManager 
= 
new 
LobbyManager  ,
(, -
)- .
;. /

HookEvents 
( 
) 
; 
lblLobbyCode 
. 
Text 
= 
$str  .
;. /
txtLobbyPlayers 
. 
Text  
=! "
$str# (
;( )
} 	
public!! 
PreLobby!! 
(!! 
Lobby!! 
lobby!! #
,!!# $
int!!% (
userId!!) /
,!!/ 0
string!!1 7
username!!8 @
)!!@ A
{"" 	
InitializeComponent## 
(##  
)##  !
;##! "
_lobby%% 
=%% 
lobby%% 
;%% 
	_username&& 
=&& 
username&&  
;&&  !
_currentUserId'' 
='' 
userId'' #
;''# $
_lobbyManager)) 
=)) 
new)) 
LobbyManager))  ,
()), -
)))- .
;)). /

HookEvents** 
(** 
)** 
;** 
lblLobbyCode,, 
.,, 
Text,, 
=,, 
lobby,,  %
.,,% &
Code,,& *
;,,* +
var.. 
count.. 
=.. 
lobby.. 
... 
Members.. %
?..% &
...& '
Length..' -
??... 0
$num..1 2
;..2 3
txtLobbyPlayers// 
.// 
Text//  
=//! "
$"//# %
{//% &
count//& +
}//+ ,
$str//, .
"//. /
;/// 0
membersList11 
.11 
Items11 
.11 
Clear11 #
(11# $
)11$ %
;11% &
if33 
(33 
lobby33 
.33 
Members33 
!=33  
null33! %
)33% &
{44 
foreach55 
(55 
var55 
m55 
in55 !
lobby55" '
.55' (
Members55( /
)55/ 0
{66 
membersList77 
.77  
Items77  %
.77% &
Add77& )
(77) *
m77* +
)77+ ,
;77, -
}88 
}99 
}:: 	
private== 
void== 

HookEvents== 
(==  
)==  !
{>> 	
_lobbyManager?? 
.?? 
MessageReceived?? )
+=??* ,
OnMessageReceived??- >
;??> ?
_lobbyManager@@ 
.@@ 
MemberJoined@@ &
+=@@' )
OnMemberJoined@@* 8
;@@8 9
_lobbyManagerAA 
.AA 

MemberLeftAA $
+=AA% '
OnMemberLeftAA( 4
;AA4 5
_lobbyManagerBB 
.BB 
LobbyClosedBB %
+=BB& (
OnLobbyClosedBB) 6
;BB6 7
_lobbyManagerCC 
.CC 
GameStartedCC %
+=CC& (
OnGameStartedCC) 6
;CC6 7
}DD 	
privateHH 
voidHH 
OnMessageReceivedHH &
(HH& '
intHH' *
userIdHH+ 1
,HH1 2
stringHH3 9
usernameHH: B
,HHB C
stringHHD J
messageHHK R
,HHR S
stringHHT Z
utcHH[ ^
)HH^ _
{II 	

DispatcherJJ 
.JJ 
InvokeJJ 
(JJ 
(JJ 
)JJ  
=>JJ! #
{KK 
varLL 
tbLL 
=LL 
newLL 
	TextBlockLL &
{MM 
TextNN 
=NN 
$"NN 
$strNN 
{NN 
utcNN "
}NN" #
$strNN# %
{NN% &
usernameNN& .
}NN. /
$strNN/ 1
{NN1 2
messageNN2 9
}NN9 :
"NN: ;
,NN; <

ForegroundOO 
=OO  
BrushesOO! (
.OO( )
WhiteOO) .
,OO. /
TextWrappingPP  
=PP! "
TextWrappingPP# /
.PP/ 0
WrapPP0 4
}QQ 
;QQ 
chatContainerSS 
.SS 
ChildrenSS &
.SS& '
AddSS' *
(SS* +
tbSS+ -
)SS- .
;SS. /
}TT 
)TT 
;TT 
}UU 	
privateYY 
voidYY 
OnInviteFriendClickYY (
(YY( )
objectYY) /
senderYY0 6
,YY6 7
RoutedEventArgsYY8 G
eYYH I
)YYI J
{ZZ 	
if[[ 
([[ 
sender[[ 
is[[ 
Button[[  
btn[[! $
&&[[% '
btn[[( +
.[[+ ,
DataContext[[, 7
is[[8 :
string[[; A

friendName[[B L
)[[L M
{\\ 
MessageHelper]] 
.]] 
	ShowPopup]] '
(]]' (
MessageTranslator^^ %
.^^% &
GetLocalizedMessage^^& 9
(^^9 :
$str^^: J
)^^J K
.__ 
Replace__  
(__  !
$str__! +
,__+ ,

friendName__- 7
)__7 8
,__8 9
$str`` 
)aa 
;aa 
}bb 
}cc 	
privategg 
voidgg 
OnMemberJoinedgg #
(gg# $
LobbyMembergg$ /
membergg0 6
)gg6 7
{hh 	

Dispatcherii 
.ii 
Invokeii 
(ii 
(ii 
)ii  
=>ii! #
{jj 
ifkk 
(kk 
!kk 
membersListkk  
.kk  !
Itemskk! &
.kk& '
OfTypekk' -
<kk- .
LobbyMemberkk. 9
>kk9 :
(kk: ;
)kk; <
.kk< =
Anykk= @
(kk@ A
mkkA B
=>kkC E
mkkF G
.kkG H
UserIdkkH N
==kkO Q
memberkkR X
.kkX Y
UserIdkkY _
)kk_ `
)kk` a
{ll 
membersListmm 
.mm  
Itemsmm  %
.mm% &
Addmm& )
(mm) *
membermm* 0
)mm0 1
;mm1 2
}nn 
txtLobbyPlayerspp 
.pp  
Textpp  $
=pp% &
$"pp' )
{pp) *
membersListpp* 5
.pp5 6
Itemspp6 ;
.pp; <
Countpp< A
}ppA B
$strppB D
"ppD E
;ppE F
}qq 
)qq 
;qq 
}rr 	
privateuu 
voiduu 
OnMemberLeftuu !
(uu! "
intuu" %
userIduu& ,
)uu, -
{vv 	

Dispatcherww 
.ww 
Invokeww 
(ww 
(ww 
)ww  
=>ww! #
{xx 
varyy 
targetyy 
=yy 
membersListyy (
.yy( )
Itemsyy) .
.yy. /
OfTypeyy/ 5
<yy5 6
LobbyMemberyy6 A
>yyA B
(yyB C
)yyC D
.yyD E
FirstOrDefaultyyE S
(yyS T
myyT U
=>yyV X
myyY Z
.yyZ [
UserIdyy[ a
==yyb d
userIdyye k
)yyk l
;yyl m
if{{ 
({{ 
target{{ 
!={{ 
null{{ "
){{" #
{|| 
membersList}} 
.}}  
Items}}  %
.}}% &
Remove}}& ,
(}}, -
target}}- 3
)}}3 4
;}}4 5
}~~ 
txtLobbyPlayers
ÄÄ 
.
ÄÄ  
Text
ÄÄ  $
=
ÄÄ% &
$"
ÄÄ' )
{
ÄÄ) *
membersList
ÄÄ* 5
.
ÄÄ5 6
Items
ÄÄ6 ;
.
ÄÄ; <
Count
ÄÄ< A
}
ÄÄA B
$str
ÄÄB D
"
ÄÄD E
;
ÄÄE F
}
ÅÅ 
)
ÅÅ 
;
ÅÅ 
}
ÇÇ 	
private
ÖÖ 
void
ÖÖ 
OnLobbyClosed
ÖÖ "
(
ÖÖ" #
string
ÖÖ# )
reason
ÖÖ* 0
)
ÖÖ0 1
{
ÜÜ 	

Dispatcher
áá 
.
áá 
Invoke
áá 
(
áá 
(
áá 
)
áá  
=>
áá! #
{
àà 
MessageHelper
ââ 
.
ââ 
	ShowPopup
ââ '
(
ââ' (
MessageTranslator
ää %
.
ää% &!
GetLocalizedMessage
ää& 9
(
ää9 :
$str
ää: G
)
ääG H
+
ääI J
$"
ãã 
$str
ãã 
{
ãã 
reason
ãã 
}
ãã  
$str
ãã  !
"
ãã! "
,
ãã" #
$str
åå 
)
çç 
;
çç 
NavigationService
èè !
?
èè! "
.
èè" #
GoBack
èè# )
(
èè) *
)
èè* +
;
èè+ ,
}
êê 
)
êê 
;
êê 
}
ëë 	
private
ïï 
void
ïï 
OnGameStarted
ïï "
(
ïï" #
string
ïï# )
code
ïï* .
)
ïï. /
{
ññ 	

Dispatcher
óó 
.
óó 
Invoke
óó 
(
óó 
(
óó 
)
óó  
=>
óó! #
{
òò 
MessageHelper
ôô 
.
ôô 
	ShowPopup
ôô '
(
ôô' (
MessageTranslator
öö %
.
öö% &!
GetLocalizedMessage
öö& 9
(
öö9 :
$str
öö: H
)
ööH I
+
ööJ K
$"
ööL N
$str
ööN O
{
ööO P
code
ööP T
}
ööT U
"
ööU V
,
ööV W
$str
õõ 
)
úú 
;
úú 
}
ùù 
)
ùù 
;
ùù 
}
ûû 	
private
¢¢ 
void
¢¢  
OnSendMessageClick
¢¢ '
(
¢¢' (
object
¢¢( .
sender
¢¢/ 5
,
¢¢5 6
RoutedEventArgs
¢¢7 F
e
¢¢G H
)
¢¢H I
{
££ 	
var
§§ 
text
§§ 
=
§§ 
txtChatMessage
§§ %
.
§§% &
Text
§§& *
.
§§* +
Trim
§§+ /
(
§§/ 0
)
§§0 1
;
§§1 2
if
¶¶ 
(
¶¶ 
string
¶¶ 
.
¶¶  
IsNullOrWhiteSpace
¶¶ )
(
¶¶) *
text
¶¶* .
)
¶¶. /
)
¶¶/ 0
{
ßß 
return
®® 
;
®® 
}
©© 
var
´´ 
tb
´´ 
=
´´ 
new
´´ 
	TextBlock
´´ "
{
¨¨ 
Text
≠≠ 
=
≠≠ 
$"
≠≠ 
$str
≠≠ 
{
≠≠ 
DateTime
≠≠ #
.
≠≠# $
Now
≠≠$ '
:
≠≠' (
$str
≠≠( 0
}
≠≠0 1
$str
≠≠1 3
{
≠≠3 4
	_username
≠≠4 =
}
≠≠= >
$str
≠≠> @
{
≠≠@ A
text
≠≠A E
}
≠≠E F
"
≠≠F G
,
≠≠G H

Foreground
ÆÆ 
=
ÆÆ 
Brushes
ÆÆ $
.
ÆÆ$ %
White
ÆÆ% *
,
ÆÆ* +
TextWrapping
ØØ 
=
ØØ 
TextWrapping
ØØ +
.
ØØ+ ,
Wrap
ØØ, 0
}
∞∞ 
;
∞∞ 
chatContainer
≤≤ 
.
≤≤ 
Children
≤≤ "
.
≤≤" #
Add
≤≤# &
(
≤≤& '
tb
≤≤' )
)
≤≤) *
;
≤≤* +
txtChatMessage
≥≥ 
.
≥≥ 
Clear
≥≥  
(
≥≥  !
)
≥≥! "
;
≥≥" #
}
¥¥ 	
private
∂∂ 
void
∂∂ 
OnChatTextChanged
∂∂ &
(
∂∂& '
object
∂∂' -
sender
∂∂. 4
,
∂∂4 5"
TextChangedEventArgs
∂∂6 J
e
∂∂K L
)
∂∂L M
{
∑∑ 	 
txtChatPlaceholder
∏∏ 
.
∏∏ 

Visibility
∏∏ )
=
∏∏* +
string
ππ 
.
ππ  
IsNullOrWhiteSpace
ππ )
(
ππ) *
txtChatMessage
ππ* 8
.
ππ8 9
Text
ππ9 =
)
ππ= >
?
ππ? @

Visibility
ππA K
.
ππK L
Visible
ππL S
:
ππT U

Visibility
ππV `
.
ππ` a
	Collapsed
ππa j
;
ππj k
}
∫∫ 	
private
ææ 
void
ææ 
OnStartGameClick
ææ %
(
ææ% &
object
ææ& ,
sender
ææ- 3
,
ææ3 4
RoutedEventArgs
ææ5 D
e
ææE F
)
ææF G
{
øø 	
try
¿¿ 
{
¡¡ 
var
¬¬ 
me
¬¬ 
=
¬¬ 
_lobby
¬¬ 
?
¬¬  
.
¬¬  !
Members
¬¬! (
?
¬¬( )
.
¬¬) *
FirstOrDefault
¬¬* 8
(
¬¬8 9
m
¬¬9 :
=>
¬¬; =
m
¬¬> ?
.
¬¬? @
UserId
¬¬@ F
==
¬¬G I
_currentUserId
¬¬J X
)
¬¬X Y
;
¬¬Y Z
if
ƒƒ 
(
ƒƒ 
me
ƒƒ 
==
ƒƒ 
null
ƒƒ 
||
ƒƒ !
!
ƒƒ" #
me
ƒƒ# %
.
ƒƒ% &
IsHost
ƒƒ& ,
)
ƒƒ, -
{
≈≈ 
MessageHelper
∆∆ !
.
∆∆! "
	ShowPopup
∆∆" +
(
∆∆+ ,
MessageTranslator
«« )
.
««) *!
GetLocalizedMessage
««* =
(
««= >
$str
««> P
)
««P Q
,
««Q R
$str
»» !
)
…… 
;
…… 
return
ÀÀ 
;
ÀÀ 
}
ÃÃ 
NavigationService
ŒŒ !
?
ŒŒ! "
.
ŒŒ" #
Navigate
ŒŒ# +
(
ŒŒ+ ,
new
ŒŒ, /
	MatchRoom
ŒŒ0 9
(
ŒŒ9 :
)
ŒŒ: ;
)
ŒŒ; <
;
ŒŒ< =
}
œœ 
catch
–– 
(
–– '
InvalidOperationException
–– ,
ex
––- /
)
––/ 0
{
—— 
Debug
““ 
.
““ 
	WriteLine
““ 
(
““  
$"
““  "
$str
““" Q
{
““Q R
ex
““R T
.
““T U
Message
““U \
}
““\ ]
"
““] ^
)
““^ _
;
““_ `
MessageHelper
‘‘ 
.
‘‘ 
	ShowPopup
‘‘ '
(
‘‘' (
MessageTranslator
’’ %
.
’’% &!
GetLocalizedMessage
’’& 9
(
’’9 :
$str
’’: O
)
’’O P
,
’’P Q
$str
÷÷ 
)
◊◊ 
;
◊◊ 
}
ÿÿ 
catch
ŸŸ 
(
ŸŸ 
	Exception
ŸŸ 
ex
ŸŸ 
)
ŸŸ  
{
⁄⁄ 
Debug
€€ 
.
€€ 
	WriteLine
€€ 
(
€€  
$"
€€  "
$str
€€" H
{
€€H I
ex
€€I K
.
€€K L
Message
€€L S
}
€€S T
"
€€T U
)
€€U V
;
€€V W
MessageHelper
›› 
.
›› 
	ShowPopup
›› '
(
››' (
MessageTranslator
ﬁﬁ %
.
ﬁﬁ% &!
GetLocalizedMessage
ﬁﬁ& 9
(
ﬁﬁ9 :
$str
ﬁﬁ: M
)
ﬁﬁM N
,
ﬁﬁN O
$str
ﬂﬂ 
)
‡‡ 
;
‡‡ 
}
·· 
}
‚‚ 	
private
ÂÂ 
void
ÂÂ 
OnExitClick
ÂÂ  
(
ÂÂ  !
object
ÂÂ! '
sender
ÂÂ( .
,
ÂÂ. /
RoutedEventArgs
ÂÂ0 ?
e
ÂÂ@ A
)
ÂÂA B
{
ÊÊ 	
try
ÁÁ 
{
ËË 
MessageHelper
ÈÈ 
.
ÈÈ 
	ShowPopup
ÈÈ '
(
ÈÈ' (
MessageTranslator
ÍÍ %
.
ÍÍ% &!
GetLocalizedMessage
ÍÍ& 9
(
ÍÍ9 :
$str
ÍÍ: L
)
ÍÍL M
,
ÍÍM N
$str
ÎÎ 
)
ÏÏ 
;
ÏÏ 
_lobbyManager
ÓÓ 
.
ÓÓ 

LeaveLobby
ÓÓ (
(
ÓÓ( )
)
ÓÓ) *
;
ÓÓ* +
MessageHelper
 
.
 
	ShowPopup
 '
(
' (
MessageTranslator
ÒÒ %
.
ÒÒ% &!
GetLocalizedMessage
ÒÒ& 9
(
ÒÒ9 :
$str
ÒÒ: E
)
ÒÒE F
,
ÒÒF G
$str
ÚÚ 
)
ÛÛ 
;
ÛÛ 
NavigationService
ıı !
?
ıı! "
.
ıı" #
GoBack
ıı# )
(
ıı) *
)
ıı* +
;
ıı+ ,
}
ˆˆ 
catch
˜˜ 
(
˜˜ '
InvalidOperationException
˜˜ ,
ex
˜˜- /
)
˜˜/ 0
{
¯¯ 
Debug
˘˘ 
.
˘˘ 
	WriteLine
˘˘ 
(
˘˘  
$"
˘˘  "
$str
˘˘" L
{
˘˘L M
ex
˘˘M O
.
˘˘O P
Message
˘˘P W
}
˘˘W X
"
˘˘X Y
)
˘˘Y Z
;
˘˘Z [
MessageHelper
˚˚ 
.
˚˚ 
	ShowPopup
˚˚ '
(
˚˚' (
MessageTranslator
¸¸ %
.
¸¸% &!
GetLocalizedMessage
¸¸& 9
(
¸¸9 :
$str
¸¸: O
)
¸¸O P
,
¸¸P Q
$str
˝˝ 
)
˛˛ 
;
˛˛ 
}
ˇˇ 
catch
ÄÄ 
(
ÄÄ 
	Exception
ÄÄ 
ex
ÄÄ 
)
ÄÄ  
{
ÅÅ 
Debug
ÇÇ 
.
ÇÇ 
	WriteLine
ÇÇ 
(
ÇÇ  
$"
ÇÇ  "
$str
ÇÇ" C
{
ÇÇC D
ex
ÇÇD F
.
ÇÇF G
Message
ÇÇG N
}
ÇÇN O
"
ÇÇO P
)
ÇÇP Q
;
ÇÇQ R
MessageHelper
ÑÑ 
.
ÑÑ 
	ShowPopup
ÑÑ '
(
ÑÑ' (
MessageTranslator
ÖÖ %
.
ÖÖ% &!
GetLocalizedMessage
ÖÖ& 9
(
ÖÖ9 :
$str
ÖÖ: L
)
ÖÖL M
,
ÖÖM N
$str
ÜÜ 
)
áá 
;
áá 
}
àà 
}
ââ 	
private
çç 
void
çç 
OnInviteClick
çç "
(
çç" #
object
çç# )
sender
çç* 0
,
çç0 1
RoutedEventArgs
çç2 A
e
ççB C
)
ççC D
{
éé 	
if
èè 
(
èè 
sender
èè 
is
èè 
Button
èè  
b
èè! "
&&
èè# %
b
èè& '
.
èè' (
DataContext
èè( 3
is
èè4 6
string
èè7 =
friend
èè> D
)
èèD E
{
êê 
MessageHelper
ëë 
.
ëë 
	ShowPopup
ëë '
(
ëë' (
MessageTranslator
íí %
.
íí% &!
GetLocalizedMessage
íí& 9
(
íí9 :
$str
íí: J
)
ííJ K
.
ìì 
Replace
ìì  
(
ìì  !
$str
ìì! +
,
ìì+ ,
friend
ìì- 3
)
ìì3 4
,
ìì4 5
$str
îî 
)
ïï 
;
ïï 
}
ññ 
}
óó 	
private
ôô 
void
ôô 
OnBanMemberClick
ôô %
(
ôô% &
object
ôô& ,
sender
ôô- 3
,
ôô3 4
RoutedEventArgs
ôô5 D
e
ôôE F
)
ôôF G
{
öö 	
if
õõ 
(
õõ 
sender
õõ 
is
õõ 
Button
õõ  
btn
õõ! $
&&
õõ% '
btn
õõ( +
.
õõ+ ,
Tag
õõ, /
is
õõ0 2
LobbyMember
õõ3 >
m
õõ? @
)
õõ@ A
{
úú 
MessageHelper
ùù 
.
ùù 
	ShowPopup
ùù '
(
ùù' (
MessageTranslator
ûû %
.
ûû% &!
GetLocalizedMessage
ûû& 9
(
ûû9 :
$str
ûû: L
)
ûûL M
.
üü 
Replace
üü  
(
üü  !
$str
üü! -
,
üü- .
m
üü/ 0
.
üü0 1
Username
üü1 9
)
üü9 :
,
üü: ;
$str
†† 
)
°° 
;
°° 
}
¢¢ 
}
££ 	
private
ßß 
void
ßß 
OnBackClick
ßß  
(
ßß  !
object
ßß! '
sender
ßß( .
,
ßß. /
RoutedEventArgs
ßß0 ?
e
ßß@ A
)
ßßA B
{
®® 	
try
©© 
{
™™ 
NavigationService
´´ !
?
´´! "
.
´´" #
GoBack
´´# )
(
´´) *
)
´´* +
;
´´+ ,
}
¨¨ 
catch
≠≠ 
(
≠≠ '
InvalidOperationException
≠≠ ,
ex
≠≠- /
)
≠≠/ 0
{
ÆÆ 
Debug
ØØ 
.
ØØ 
	WriteLine
ØØ 
(
ØØ  
$"
ØØ  "
$str
ØØ" L
{
ØØL M
ex
ØØM O
.
ØØO P
Message
ØØP W
}
ØØW X
"
ØØX Y
)
ØØY Z
;
ØØZ [
MessageHelper
±± 
.
±± 
	ShowPopup
±± '
(
±±' (
MessageTranslator
≤≤ %
.
≤≤% &!
GetLocalizedMessage
≤≤& 9
(
≤≤9 :
$str
≤≤: O
)
≤≤O P
,
≤≤P Q
$str
≥≥ 
)
¥¥ 
;
¥¥ 
}
µµ 
catch
∂∂ 
(
∂∂ 
	Exception
∂∂ 
ex
∂∂ 
)
∂∂  
{
∑∑ 
Debug
∏∏ 
.
∏∏ 
	WriteLine
∏∏ 
(
∏∏  
$"
∏∏  "
$str
∏∏" C
{
∏∏C D
ex
∏∏D F
.
∏∏F G
Message
∏∏G N
}
∏∏N O
"
∏∏O P
)
∏∏P Q
;
∏∏Q R
MessageHelper
∫∫ 
.
∫∫ 
	ShowPopup
∫∫ '
(
∫∫' (
MessageTranslator
ªª %
.
ªª% &!
GetLocalizedMessage
ªª& 9
(
ªª9 :
$str
ªª: L
)
ªªL M
,
ªªM N
$str
ºº 
)
ΩΩ 
;
ΩΩ 
}
ææ 
}
øø 	
}
¿¿ 
}¡¡ Ö$
pC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Pages\PendingFriendRequests.xaml.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
Pages  %
{ 
public 

partial 
class !
PendingFriendRequests .
:/ 0
Page1 5
{		 
public

  
ObservableCollection

 #
<

# $
PendingRequest

$ 2
>

2 3
Requests

4 <
{

= >
get

? B
;

B C
}

D E
=

F G
new  
ObservableCollection $
<$ %
PendingRequest% 3
>3 4
(4 5
)5 6
;6 7
public !
PendingFriendRequests $
($ %
)% &
{ 	
InitializeComponent 
(  
)  !
;! "
DataContext 
= 
this 
; 
LoadSampleData 
( 
) 
; 
} 	
private 
void 
LoadSampleData #
(# $
)$ %
{ 	
Requests 
. 
Add 
( 
new 
PendingRequest +
{, -
Username. 6
=7 8
$str9 C
}D E
)E F
;F G
Requests 
. 
Add 
( 
new 
PendingRequest +
{, -
Username. 6
=7 8
$str9 C
}D E
)E F
;F G
Requests 
. 
Add 
( 
new 
PendingRequest +
{, -
Username. 6
=7 8
$str9 F
}G H
)H I
;I J
} 	
private 
void 
OnBackClick  
(  !
object! '
sender( .
,. /
RoutedEventArgs0 ?
e@ A
)A B
{ 	
try 
{   
NavigationService!! !
?!!! "
.!!" #
GoBack!!# )
(!!) *
)!!* +
;!!+ ,
}"" 
catch## 
{$$ 
MessageHelper%% 
.%% 
	ShowPopup%% '
(%%' (
MessageTranslator&& %
.&&% &
GetLocalizedMessage&&& 9
(&&9 :
$str&&: O
)&&O P
,&&P Q
$str'' 
)'' 
;'' 
}(( 
})) 	
private++ 
void++ 
OnAcceptClick++ "
(++" #
object++# )
sender++* 0
,++0 1
RoutedEventArgs++2 A
e++B C
)++C D
{,, 	
if-- 
(-- 
sender-- 
is-- 
FrameworkElement-- *
element--+ 2
&&--3 5
element--6 =
.--= >
DataContext--> I
is--J L
PendingRequest--M [
req--\ _
)--_ `
{.. 
MessageHelper00 
.00 
	ShowPopup00 '
(00' (
MessageTranslator11 %
.11% &
GetLocalizedMessage11& 9
(119 :
$str11: R
)11R S
,11S T
$str22 
)22 
;22 
}33 
}44 	
private66 
void66 
OnRejectClick66 "
(66" #
object66# )
sender66* 0
,660 1
RoutedEventArgs662 A
e66B C
)66C D
{77 	
if88 
(88 
sender88 
is88 
FrameworkElement88 *
element88+ 2
&&883 5
element886 =
.88= >
DataContext88> I
is88J L
PendingRequest88M [
req88\ _
)88_ `
{99 
Requests== 
.== 
Remove== 
(==  
req==  #
)==# $
;==$ %
MessageHelper?? 
.?? 
	ShowPopup?? '
(??' (
MessageTranslator@@ %
.@@% &
GetLocalizedMessage@@& 9
(@@9 :
$str@@: R
)@@R S
,@@S T
$strAA 
)AA 
;AA 
}BB 
}CC 	
publicEE 
classEE 
PendingRequestEE #
{FF 	
publicGG 
stringGG 
UsernameGG "
{GG# $
getGG% (
;GG( )
setGG* -
;GG- .
}GG/ 0
}HH 	
}II 
}JJ Ω
dC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Pages\MatchRoom.xaml.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
Pages  %
{ 
public 

partial 
class 
	MatchRoom "
:# $
Page% )
{ 
public 
	MatchRoom 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
} 
} îí
dC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Pages\JoinParty.xaml.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
Pages  %
{ 
public 

partial 
class 
	JoinParty "
:# $
Page% )
{ 
private 
readonly 
LobbyManager %
_lobbyManager& 3
;3 4
private 
readonly 
string 
	_username  )
;) *
private 
readonly 
int 
_userId $
;$ %
public 
	JoinParty 
( 
int 
userId #
,# $
string% +
username, 4
)4 5
{   	
InitializeComponent!! 
(!!  
)!!  !
;!!! "
_lobbyManager"" 
="" 
new"" 
LobbyManager""  ,
("", -
)""- .
;"". /
_userId## 
=## 
userId## 
;## 
	_username$$ 
=$$ 
username$$  
;$$  !
LoadPublicLobbies&& 
(&& 
)&& 
;&&  
}'' 	
private-- 
void-- 
LoadPublicLobbies-- &
(--& '
)--' (
{.. 	
try// 
{00 
var11 
publicLobbies11 !
=11" #
_lobbyManager11$ 1
.111 2
GetPublicLobbies112 B
(11B C
)11C D
??11E G
new11H K
List11L P
<11P Q
Lobby11Q V
>11V W
(11W X
)11X Y
;11Y Z
var33 
activeLobbies33 !
=33" #
publicLobbies33$ 1
.44 
Where44 
(44 
l44 
=>44 
l44  !
.44! "
Members44" )
!=44* ,
null44- 1
&&442 4
l445 6
.446 7
Members447 >
.44> ?
Length44? E
>44F G
$num44H I
)44I J
.55 
ToList55 
(55 
)55 
;55 
var77 
list77 
=77 
new77 
List77 #
<77# $
LobbySummary77$ 0
>770 1
(771 2
)772 3
;773 4
foreach99 
(99 
var99 
lobby99 "
in99# %
activeLobbies99& 3
)993 4
{:: 
int;; 
playerCount;; #
=;;$ %
lobby;;& +
.;;+ ,
Members;;, 3
?;;3 4
.;;4 5
Length;;5 ;
??;;< >
$num;;? @
;;;@ A
string== 
hostUsername== '
===( )
$"==* ,
$str==, 1
{==1 2
lobby==2 7
.==7 8

HostUserId==8 B
}==B C
"==C D
;==D E
var>> 
host>> 
=>> 
lobby>> $
.>>$ %
Members>>% ,
?>>, -
.>>- .
FirstOrDefault>>. <
(>>< =
m>>= >
=>>>? A
m>>B C
.>>C D
IsHost>>D J
)>>J K
;>>K L
if@@ 
(@@ 
host@@ 
!=@@ 
null@@  $
&&@@% '
!@@( )
string@@) /
.@@/ 0
IsNullOrWhiteSpace@@0 B
(@@B C
host@@C G
.@@G H
Username@@H P
)@@P Q
)@@Q R
{AA 
hostUsernameBB $
=BB% &
hostBB' +
.BB+ ,
UsernameBB, 4
;BB4 5
}CC 
listEE 
.EE 
AddEE 
(EE 
newEE  
LobbySummaryEE! -
{FF 
CodeGG 
=GG 
lobbyGG $
.GG$ %
CodeGG% )
,GG) *
HostUsernameHH $
=HH% &
hostUsernameHH' 3
,HH3 4
PlayerCountII #
=II$ %
$"II& (
{II( )
playerCountII) 4
}II4 5
$strII5 7
"II7 8
,II8 9
	IsPrivateJJ !
=JJ" #
lobbyJJ$ )
.JJ) *
	IsPrivateJJ* 3
?KK 
MessageTranslatorKK /
.KK/ 0
GetLocalizedMessageKK0 C
(KKC D
$strKKD M
)KKM N
:LL 
MessageTranslatorLL /
.LL/ 0
GetLocalizedMessageLL0 C
(LLC D
$strLLD L
)LLL M
}MM 
)MM 
;MM 
}NN 
lstPublicLobbiesPP  
.PP  !
ItemsSourcePP! ,
=PP- .
nullPP/ 3
;PP3 4
lstPublicLobbiesQQ  
.QQ  !
ItemsSourceQQ! ,
=QQ- .
listQQ/ 3
;QQ3 4
lstPublicLobbiesRR  
.RR  !
ItemsRR! &
.RR& '
RefreshRR' .
(RR. /
)RR/ 0
;RR0 1
}SS 
catchTT 
(TT "
CommunicationExceptionTT )
exTT* ,
)TT, -
{UU 
DebugVV 
.VV 
	WriteLineVV 
(VV  
$"VV  "
$strVV" P
{VVP Q
exVVQ S
.VVS T
MessageVVT [
}VV[ \
"VV\ ]
)VV] ^
;VV^ _
MessageHelperXX 
.XX 
	ShowPopupXX '
(XX' (
MessageTranslatorYY %
.YY% &
GetLocalizedMessageYY& 9
(YY9 :
$strYY: Q
)YYQ R
,YYR S
$strZZ 
)[[ 
;[[ 
}\\ 
catch]] 
(]] 
TimeoutException]] #
ex]]$ &
)]]& '
{^^ 
Debug__ 
.__ 
	WriteLine__ 
(__  
$"__  "
$str__" J
{__J K
ex__K M
.__M N
Message__N U
}__U V
"__V W
)__W X
;__X Y
MessageHelperaa 
.aa 
	ShowPopupaa '
(aa' (
MessageTranslatorbb %
.bb% &
GetLocalizedMessagebb& 9
(bb9 :
$strbb: N
)bbN O
,bbO P
$strcc 
)dd 
;dd 
}ee 
catchff 
(ff 
	Exceptionff 
exff 
)ff  
{gg 
Debughh 
.hh 
	WriteLinehh 
(hh  
$"hh  "
$strhh" J
{hhJ K
exhhK M
.hhM N
MessagehhN U
}hhU V
"hhV W
)hhW X
;hhX Y
MessageHelperjj 
.jj 
	ShowPopupjj '
(jj' (
MessageTranslatorkk %
.kk% &
GetLocalizedMessagekk& 9
(kk9 :
$strkk: L
)kkL M
,kkM N
$strll 
)mm 
;mm 
}nn 
}oo 	
privateqq 
voidqq 
OnRefreshClickqq #
(qq# $
objectqq$ *
senderqq+ 1
,qq1 2
RoutedEventArgsqq3 B
eqqC D
)qqD E
{rr 	
LoadPublicLobbiesss 
(ss 
)ss 
;ss  
}tt 	
privatezz 
voidzz 
OnJoinSelectedClickzz (
(zz( )
objectzz) /
senderzz0 6
,zz6 7
RoutedEventArgszz8 G
ezzH I
)zzI J
{{{ 	
try|| 
{}} 
if~~ 
(~~ 
lstPublicLobbies~~ $
.~~$ %
SelectedItem~~% 1
is~~2 4
LobbySummary~~5 A
selected~~B J
)~~J K
{ 
TryJoinLobby
ÄÄ  
(
ÄÄ  !
selected
ÄÄ! )
.
ÄÄ) *
Code
ÄÄ* .
)
ÄÄ. /
;
ÄÄ/ 0
}
ÅÅ 
else
ÇÇ 
{
ÉÉ 
MessageHelper
ÑÑ !
.
ÑÑ! "
	ShowPopup
ÑÑ" +
(
ÑÑ+ ,
MessageTranslator
ÖÖ )
.
ÖÖ) *!
GetLocalizedMessage
ÖÖ* =
(
ÖÖ= >
$str
ÖÖ> O
)
ÖÖO P
,
ÖÖP Q
$str
ÜÜ !
)
áá 
;
áá 
}
àà 
}
ââ 
catch
ää 
(
ää 
	Exception
ää 
ex
ää 
)
ää  
{
ãã 
Debug
åå 
.
åå 
	WriteLine
åå 
(
åå  
$"
åå  "
$str
åå" B
{
ååB C
ex
ååC E
.
ååE F
Message
ååF M
}
ååM N
"
ååN O
)
ååO P
;
ååP Q
MessageHelper
éé 
.
éé 
	ShowPopup
éé '
(
éé' (
MessageTranslator
èè %
.
èè% &!
GetLocalizedMessage
èè& 9
(
èè9 :
$str
èè: L
)
èèL M
,
èèM N
$str
êê 
)
ëë 
;
ëë 
}
íí 
}
ìì 	
private
ôô 
void
ôô 
OnJoinByCodeClick
ôô &
(
ôô& '
object
ôô' -
sender
ôô. 4
,
ôô4 5
RoutedEventArgs
ôô6 E
e
ôôF G
)
ôôG H
{
öö 	
try
õõ 
{
úú 
string
ùù 
code
ùù 
=
ùù 
txtLobbyCode
ùù *
.
ùù* +
Text
ùù+ /
.
ùù/ 0
Trim
ùù0 4
(
ùù4 5
)
ùù5 6
;
ùù6 7
if
üü 
(
üü 
string
üü 
.
üü  
IsNullOrWhiteSpace
üü -
(
üü- .
code
üü. 2
)
üü2 3
)
üü3 4
{
†† 
MessageHelper
°° !
.
°°! "
	ShowPopup
°°" +
(
°°+ ,
MessageTranslator
¢¢ )
.
¢¢) *!
GetLocalizedMessage
¢¢* =
(
¢¢= >
$str
¢¢> R
)
¢¢R S
,
¢¢S T
$str
££ !
)
§§ 
;
§§ 
return
•• 
;
•• 
}
¶¶ 
TryJoinLobby
®® 
(
®® 
code
®® !
)
®®! "
;
®®" #
}
©© 
catch
™™ 
(
™™ 
	Exception
™™ 
ex
™™ 
)
™™  
{
´´ 
Debug
¨¨ 
.
¨¨ 
	WriteLine
¨¨ 
(
¨¨  
$"
¨¨  "
$str
¨¨" @
{
¨¨@ A
ex
¨¨A C
.
¨¨C D
Message
¨¨D K
}
¨¨K L
"
¨¨L M
)
¨¨M N
;
¨¨N O
MessageHelper
ÆÆ 
.
ÆÆ 
	ShowPopup
ÆÆ '
(
ÆÆ' (
MessageTranslator
ØØ %
.
ØØ% &!
GetLocalizedMessage
ØØ& 9
(
ØØ9 :
$str
ØØ: L
)
ØØL M
,
ØØM N
$str
∞∞ 
)
±± 
;
±± 
}
≤≤ 
}
≥≥ 	
private
ππ 
void
ππ 
TryJoinLobby
ππ !
(
ππ! "
string
ππ" (
code
ππ) -
)
ππ- .
{
∫∫ 	
try
ªª 
{
ºº 
var
ΩΩ 
lobby
ΩΩ 
=
ΩΩ 
_lobbyManager
ΩΩ )
.
ΩΩ) *
	JoinLobby
ΩΩ* 3
(
ΩΩ3 4
code
ΩΩ4 8
,
ΩΩ8 9
_userId
ΩΩ: A
,
ΩΩA B
	_username
ΩΩC L
)
ΩΩL M
;
ΩΩM N
if
øø 
(
øø 
lobby
øø 
==
øø 
null
øø !
)
øø! "
{
¿¿ 
MessageHelper
¡¡ !
.
¡¡! "
	ShowPopup
¡¡" +
(
¡¡+ ,
MessageTranslator
¬¬ )
.
¬¬) *!
GetLocalizedMessage
¬¬* =
(
¬¬= >
$str
¬¬> Q
)
¬¬Q R
,
¬¬R S
$str
√√ 
)
ƒƒ 
;
ƒƒ 
return
≈≈ 
;
≈≈ 
}
∆∆ 
NavigationService
»» !
?
»»! "
.
»»" #
Navigate
»»# +
(
»»+ ,
new
»», /
PreLobby
»»0 8
(
»»8 9
lobby
»»9 >
,
»»> ?
_userId
»»@ G
,
»»G H
	_username
»»I R
)
»»R S
)
»»S T
;
»»T U
}
…… 
catch
   
(
   
TimeoutException
   #
ex
  $ &
)
  & '
{
ÀÀ 
Debug
ÃÃ 
.
ÃÃ 
	WriteLine
ÃÃ 
(
ÃÃ  
$"
ÃÃ  "
$str
ÃÃ" E
{
ÃÃE F
ex
ÃÃF H
.
ÃÃH I
Message
ÃÃI P
}
ÃÃP Q
"
ÃÃQ R
)
ÃÃR S
;
ÃÃS T
MessageHelper
ŒŒ 
.
ŒŒ 
	ShowPopup
ŒŒ '
(
ŒŒ' (
MessageTranslator
œœ %
.
œœ% &!
GetLocalizedMessage
œœ& 9
(
œœ9 :
$str
œœ: N
)
œœN O
,
œœO P
$str
–– 
)
—— 
;
—— 
LoadPublicLobbies
”” !
(
””! "
)
””" #
;
””# $
}
‘‘ 
catch
’’ 
(
’’ 
FaultException
’’ !
ex
’’" $
)
’’$ %
{
÷÷ 
Debug
◊◊ 
.
◊◊ 
	WriteLine
◊◊ 
(
◊◊  
$"
◊◊  "
$str
◊◊" C
{
◊◊C D
ex
◊◊D F
.
◊◊F G
Message
◊◊G N
}
◊◊N O
"
◊◊O P
)
◊◊P Q
;
◊◊Q R
MessageHelper
ŸŸ 
.
ŸŸ 
	ShowPopup
ŸŸ '
(
ŸŸ' (
MessageTranslator
⁄⁄ %
.
⁄⁄% &!
GetLocalizedMessage
⁄⁄& 9
(
⁄⁄9 :
$str
⁄⁄: M
)
⁄⁄M N
,
⁄⁄N O
$str
€€ 
)
‹‹ 
;
‹‹ 
LoadPublicLobbies
ﬁﬁ !
(
ﬁﬁ! "
)
ﬁﬁ" #
;
ﬁﬁ# $
}
ﬂﬂ 
catch
‡‡ 
(
‡‡ $
CommunicationException
‡‡ )
ex
‡‡* ,
)
‡‡, -
{
·· 
Debug
‚‚ 
.
‚‚ 
	WriteLine
‚‚ 
(
‚‚  
$"
‚‚  "
$str
‚‚" K
{
‚‚K L
ex
‚‚L N
.
‚‚N O
Message
‚‚O V
}
‚‚V W
"
‚‚W X
)
‚‚X Y
;
‚‚Y Z
MessageHelper
‰‰ 
.
‰‰ 
	ShowPopup
‰‰ '
(
‰‰' (
MessageTranslator
ÂÂ %
.
ÂÂ% &!
GetLocalizedMessage
ÂÂ& 9
(
ÂÂ9 :
$str
ÂÂ: Q
)
ÂÂQ R
,
ÂÂR S
$str
ÊÊ 
)
ÁÁ 
;
ÁÁ 
}
ËË 
catch
ÈÈ 
(
ÈÈ '
InvalidOperationException
ÈÈ ,
ex
ÈÈ- /
)
ÈÈ/ 0
{
ÍÍ 
Debug
ÎÎ 
.
ÎÎ 
	WriteLine
ÎÎ 
(
ÎÎ  
$"
ÎÎ  "
$str
ÎÎ" N
{
ÎÎN O
ex
ÎÎO Q
.
ÎÎQ R
Message
ÎÎR Y
}
ÎÎY Z
"
ÎÎZ [
)
ÎÎ[ \
;
ÎÎ\ ]
MessageHelper
ÌÌ 
.
ÌÌ 
	ShowPopup
ÌÌ '
(
ÌÌ' (
MessageTranslator
ÓÓ %
.
ÓÓ% &!
GetLocalizedMessage
ÓÓ& 9
(
ÓÓ9 :
$str
ÓÓ: O
)
ÓÓO P
,
ÓÓP Q
$str
ÔÔ 
)
 
;
 
}
ÒÒ 
catch
ÚÚ 
(
ÚÚ 
	Exception
ÚÚ 
ex
ÚÚ 
)
ÚÚ  
{
ÛÛ 
Debug
ÙÙ 
.
ÙÙ 
	WriteLine
ÙÙ 
(
ÙÙ  
$"
ÙÙ  "
$str
ÙÙ" E
{
ÙÙE F
ex
ÙÙF H
.
ÙÙH I
Message
ÙÙI P
}
ÙÙP Q
"
ÙÙQ R
)
ÙÙR S
;
ÙÙS T
MessageHelper
ˆˆ 
.
ˆˆ 
	ShowPopup
ˆˆ '
(
ˆˆ' (
MessageTranslator
˜˜ %
.
˜˜% &!
GetLocalizedMessage
˜˜& 9
(
˜˜9 :
$str
˜˜: M
)
˜˜M N
,
˜˜N O
$str
¯¯ 
)
˘˘ 
;
˘˘ 
}
˙˙ 
}
˚˚ 	
private
ÅÅ 
void
ÅÅ 
OnCodeBoxGotFocus
ÅÅ &
(
ÅÅ& '
object
ÅÅ' -
sender
ÅÅ. 4
,
ÅÅ4 5
RoutedEventArgs
ÅÅ6 E
e
ÅÅF G
)
ÅÅG H
{
ÇÇ 	 
txtCodePlaceholder
ÉÉ 
.
ÉÉ 

Visibility
ÉÉ )
=
ÉÉ* +

Visibility
ÉÉ, 6
.
ÉÉ6 7
	Collapsed
ÉÉ7 @
;
ÉÉ@ A
}
ÑÑ 	
private
ÜÜ 
void
ÜÜ  
OnCodeBoxLostFocus
ÜÜ '
(
ÜÜ' (
object
ÜÜ( .
sender
ÜÜ/ 5
,
ÜÜ5 6
RoutedEventArgs
ÜÜ7 F
e
ÜÜG H
)
ÜÜH I
{
áá 	
if
àà 
(
àà 
string
àà 
.
àà  
IsNullOrWhiteSpace
àà )
(
àà) *
txtLobbyCode
àà* 6
.
àà6 7
Text
àà7 ;
)
àà; <
)
àà< =
{
ââ  
txtCodePlaceholder
ää "
.
ää" #

Visibility
ää# -
=
ää. /

Visibility
ää0 :
.
ää: ;
Visible
ää; B
;
ääB C
}
ãã 
}
åå 	
private
íí 
void
íí 
OnBackClick
íí  
(
íí  !
object
íí! '
sender
íí( .
,
íí. /
RoutedEventArgs
íí0 ?
e
íí@ A
)
ííA B
{
ìì 	
try
îî 
{
ïï 
NavigationService
ññ !
?
ññ! "
.
ññ" #
GoBack
ññ# )
(
ññ) *
)
ññ* +
;
ññ+ ,
}
óó 
catch
òò 
(
òò '
InvalidOperationException
òò ,
ex
òò- /
)
òò/ 0
{
ôô 
Debug
öö 
.
öö 
	WriteLine
öö 
(
öö  
$"
öö  "
$str
öö" M
{
ööM N
ex
ööN P
.
ööP Q
Message
ööQ X
}
ööX Y
"
ööY Z
)
ööZ [
;
öö[ \
MessageHelper
úú 
.
úú 
	ShowPopup
úú '
(
úú' (
MessageTranslator
ùù %
.
ùù% &!
GetLocalizedMessage
ùù& 9
(
ùù9 :
$str
ùù: O
)
ùùO P
,
ùùP Q
$str
ûû 
)
üü 
;
üü 
}
†† 
catch
°° 
(
°° 
	Exception
°° 
ex
°° 
)
°°  
{
¢¢ 
Debug
££ 
.
££ 
	WriteLine
££ 
(
££  
$"
££  "
$str
££" D
{
££D E
ex
££E G
.
££G H
Message
££H O
}
££O P
"
££P Q
)
££Q R
;
££R S
MessageHelper
•• 
.
•• 
	ShowPopup
•• '
(
••' (
MessageTranslator
¶¶ %
.
¶¶% &!
GetLocalizedMessage
¶¶& 9
(
¶¶9 :
$str
¶¶: L
)
¶¶L M
,
¶¶M N
$str
ßß 
)
®® 
;
®® 
}
©© 
}
™™ 	
}
´´ 
}¨¨ óq
iC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Pages\ForgotPassword.xaml.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
Pages  %
{ 
public 

partial 
class 
ForgotPassword '
:( )
Page* .
{ 
public 
ForgotPassword 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "!
DisablePasswordFields !
(! "
)" #
;# $
} 	
private"" 
void"" 
OnSendCodeClick"" $
(""$ %
object""% +
sender"", 2
,""2 3
RoutedEventArgs""4 C
e""D E
)""E F
{## 	
try$$ 
{%% 
string&& 
email&& 
=&& 
txtEmail&& '
.&&' (
Text&&( ,
.&&, -
Trim&&- 1
(&&1 2
)&&2 3
;&&3 4
	Validator)) 
.)) 
ValidateEmail)) '
())' (
email))( -
)))- .
;)). /
var,, 

codeWindow,, 
=,,  
new,,! $"
VerificationCodeWindow,,% ;
{-- 
Owner.. 
=.. 
Application.. '
...' (
Current..( /
.../ 0

MainWindow..0 :
}// 
;// 
bool11 
?11 
dialogResult11 "
=11# $

codeWindow11% /
.11/ 0

ShowDialog110 :
(11: ;
)11; <
;11< =
if33 
(33 
dialogResult33  
==33! #
true33$ (
)33( )
{44  
EnablePasswordFields55 (
(55( )
)55) *
;55* +
}66 
}77 
catch88 
(88 
ArgumentException88 $
ex88% '
)88' (
{99 
Debug:: 
.:: 
	WriteLine:: 
(::  
$"::  "
$str::" R
{::R S
ex::S U
.::U V
Message::V ]
}::] ^
"::^ _
)::_ `
;::` a
MessageHelper;; 
.;; 
	ShowPopup;; '
(;;' (
MessageTranslator<< %
.<<% &
GetLocalizedMessage<<& 9
(<<9 :
$str<<: L
)<<L M
,<<M N
$str== 
)>> 
;>> 
}?? 
catch@@ 
(@@ %
InvalidOperationException@@ ,
ex@@- /
)@@/ 0
{AA 
DebugBB 
.BB 
	WriteLineBB 
(BB  
$"BB  "
$strBB" V
{BBV W
exBBW Y
.BBY Z
MessageBBZ a
}BBa b
"BBb c
)BBc d
;BBd e
MessageHelperCC 
.CC 
	ShowPopupCC '
(CC' (
MessageTranslatorDD %
.DD% &
GetLocalizedMessageDD& 9
(DD9 :
$strDD: O
)DDO P
,DDP Q
$strEE 
)FF 
;FF 
}GG 
catchHH 
(HH 
	ExceptionHH 
exHH 
)HH  
{II 
DebugJJ 
.JJ 
	WriteLineJJ 
(JJ  
$"JJ  "
$strJJ" M
{JJM N
exJJN P
.JJP Q
MessageJJQ X
}JJX Y
"JJY Z
)JJZ [
;JJ[ \
MessageHelperKK 
.KK 
	ShowPopupKK '
(KK' (
MessageTranslatorLL %
.LL% &
GetLocalizedMessageLL& 9
(LL9 :
$strLL: L
)LLL M
,LLM N
$strMM 
)NN 
;NN 
}OO 
}PP 	
privateVV 
asyncVV 
voidVV !
OnChangePasswordClickVV 0
(VV0 1
objectVV1 7
senderVV8 >
,VV> ?
RoutedEventArgsVV@ O
eVVP Q
)VVQ R
{WW 	
tryXX 
{YY 
stringZZ 
newPassZZ 
=ZZ  
txtNewPasswordZZ! /
.ZZ/ 0
PasswordZZ0 8
.ZZ8 9
TrimZZ9 =
(ZZ= >
)ZZ> ?
;ZZ? @
string[[ 
confirmPass[[ "
=[[# $
txtConfirmPassword[[% 7
.[[7 8
Password[[8 @
.[[@ A
Trim[[A E
([[E F
)[[F G
;[[G H
if]] 
(]] 
string]] 
.]] 
IsNullOrWhiteSpace]] -
(]]- .
newPass]]. 5
)]]5 6
||]]7 9
string]]: @
.]]@ A
IsNullOrWhiteSpace]]A S
(]]S T
confirmPass]]T _
)]]_ `
)]]` a
{^^ 
MessageHelper__ !
.__! "
	ShowPopup__" +
(__+ ,
MessageTranslator`` )
.``) *
GetLocalizedMessage``* =
(``= >
$str``> T
)``T U
,``U V
$straa !
)bb 
;bb 
returncc 
;cc 
}dd 
ifff 
(ff 
newPassff 
!=ff 
confirmPassff *
)ff* +
{gg 
MessageHelperhh !
.hh! "
	ShowPopuphh" +
(hh+ ,
MessageTranslatorii )
.ii) *
GetLocalizedMessageii* =
(ii= >
$strii> V
)iiV W
,iiW X
$strjj 
)kk 
;kk 
returnll 
;ll 
}mm 
	Validatoroo 
.oo 
ValidatePasswordoo *
(oo* +
newPassoo+ 2
)oo2 3
;oo3 4
varrr 
loadingrr 
=rr 
newrr !
LoadingWindowrr" /
{ss 
Ownertt 
=tt 
Applicationtt '
.tt' (
Currenttt( /
.tt/ 0

MainWindowtt0 :
}uu 
;uu 
loadingww 
.ww 
Showww 
(ww 
)ww 
;ww 
awaitxx 
loadingxx 
.xx 
WaitMinimumAsyncxx .
(xx. /
)xx/ 0
;xx0 1
loadingyy 
.yy 
Closeyy 
(yy 
)yy 
;yy  
MessageHelper}} 
.}} 
	ShowPopup}} '
(}}' (
MessageTranslator~~ %
.~~% &
GetLocalizedMessage~~& 9
(~~9 :
$str~~: O
)~~O P
,~~P Q
$str 
)
ÄÄ 
;
ÄÄ 
NavigationService
ÉÉ !
?
ÉÉ! "
.
ÉÉ" #
Navigate
ÉÉ# +
(
ÉÉ+ ,
new
ÉÉ, /
Login
ÉÉ0 5
(
ÉÉ5 6
)
ÉÉ6 7
)
ÉÉ7 8
;
ÉÉ8 9
}
ÑÑ 
catch
ÖÖ 
(
ÖÖ 
ArgumentException
ÖÖ $
ex
ÖÖ% '
)
ÖÖ' (
{
ÜÜ 
Debug
áá 
.
áá 
	WriteLine
áá 
(
áá  
$"
áá  "
$str
áá" [
{
áá[ \
ex
áá\ ^
.
áá^ _
Message
áá_ f
}
ááf g
"
áág h
)
ááh i
;
áái j
MessageHelper
àà 
.
àà 
	ShowPopup
àà '
(
àà' (
MessageTranslator
ââ %
.
ââ% &!
GetLocalizedMessage
ââ& 9
(
ââ9 :
$str
ââ: O
)
ââO P
,
ââP Q
$str
ää 
)
ãã 
;
ãã 
}
åå 
catch
çç 
(
çç '
InvalidOperationException
çç ,
ex
çç- /
)
çç/ 0
{
éé 
Debug
èè 
.
èè 
	WriteLine
èè 
(
èè  
$"
èè  "
$str
èè" \
{
èè\ ]
ex
èè] _
.
èè_ `
Message
èè` g
}
èèg h
"
èèh i
)
èèi j
;
èèj k
MessageHelper
êê 
.
êê 
	ShowPopup
êê '
(
êê' (
MessageTranslator
ëë %
.
ëë% &!
GetLocalizedMessage
ëë& 9
(
ëë9 :
$str
ëë: O
)
ëëO P
,
ëëP Q
$str
íí 
)
ìì 
;
ìì 
}
îî 
catch
ïï 
(
ïï 
	Exception
ïï 
ex
ïï 
)
ïï  
{
ññ 
Debug
óó 
.
óó 
	WriteLine
óó 
(
óó  
$"
óó  "
$str
óó" S
{
óóS T
ex
óóT V
.
óóV W
Message
óóW ^
}
óó^ _
"
óó_ `
)
óó` a
;
óóa b
MessageHelper
òò 
.
òò 
	ShowPopup
òò '
(
òò' (
MessageTranslator
ôô %
.
ôô% &!
GetLocalizedMessage
ôô& 9
(
ôô9 :
$str
ôô: L
)
ôôL M
,
ôôM N
$str
öö 
)
õõ 
;
õõ 
}
úú 
}
ùù 	
private
¢¢ 
void
¢¢ #
DisablePasswordFields
¢¢ *
(
¢¢* +
)
¢¢+ ,
{
££ 	
txtNewPassword
§§ 
.
§§ 
	IsEnabled
§§ $
=
§§% &
false
§§' ,
;
§§, - 
txtConfirmPassword
•• 
.
•• 
	IsEnabled
•• (
=
••) *
false
••+ 0
;
••0 1
btnChangePassword
¶¶ 
.
¶¶ 
	IsEnabled
¶¶ '
=
¶¶( )
false
¶¶* /
;
¶¶/ 0
}
ßß 	
private
©© 
void
©© "
EnablePasswordFields
©© )
(
©©) *
)
©©* +
{
™™ 	
txtNewPassword
´´ 
.
´´ 
	IsEnabled
´´ $
=
´´% &
true
´´' +
;
´´+ , 
txtConfirmPassword
¨¨ 
.
¨¨ 
	IsEnabled
¨¨ (
=
¨¨) *
true
¨¨+ /
;
¨¨/ 0
btnChangePassword
≠≠ 
.
≠≠ 
	IsEnabled
≠≠ '
=
≠≠( )
true
≠≠* .
;
≠≠. /
}
ÆÆ 	
private
≥≥ 
void
≥≥ 
OnBackClick
≥≥  
(
≥≥  !
object
≥≥! '
sender
≥≥( .
,
≥≥. /
RoutedEventArgs
≥≥0 ?
e
≥≥@ A
)
≥≥A B
{
¥¥ 	
try
µµ 
{
∂∂ 
if
∑∑ 
(
∑∑ 
NavigationService
∑∑ %
?
∑∑% &
.
∑∑& '
	CanGoBack
∑∑' 0
==
∑∑1 3
true
∑∑4 8
)
∑∑8 9
{
∏∏ 
NavigationService
ππ %
.
ππ% &
GoBack
ππ& ,
(
ππ, -
)
ππ- .
;
ππ. /
}
∫∫ 
}
ªª 
catch
ºº 
(
ºº 
	Exception
ºº 
ex
ºº 
)
ºº  
{
ΩΩ 
Debug
ææ 
.
ææ 
	WriteLine
ææ 
(
ææ  
$"
ææ  "
$str
ææ" ?
{
ææ? @
ex
ææ@ B
.
ææB C
Message
ææC J
}
ææJ K
"
ææK L
)
ææL M
;
ææM N
MessageHelper
øø 
.
øø 
	ShowPopup
øø '
(
øø' (
MessageTranslator
¿¿ %
.
¿¿% &!
GetLocalizedMessage
¿¿& 9
(
¿¿9 :
$str
¿¿: O
)
¿¿O P
,
¿¿P Q
$str
¡¡ 
)
¬¬ 
;
¬¬ 
}
√√ 
}
ƒƒ 	
private
…… 
void
…… 
OnSoundClick
…… !
(
……! "
object
……" (
sender
……) /
,
……/ 0
RoutedEventArgs
……1 @
e
……A B
)
……B C
{
   	
try
ÀÀ 
{
ÃÃ 
NavigationService
ÕÕ !
?
ÕÕ! "
.
ÕÕ" #
Navigate
ÕÕ# +
(
ÕÕ+ ,
new
ÕÕ, /

ConfiSound
ÕÕ0 :
(
ÕÕ: ;
)
ÕÕ; <
)
ÕÕ< =
;
ÕÕ= >
}
ŒŒ 
catch
œœ 
(
œœ '
InvalidOperationException
œœ ,
ex
œœ- /
)
œœ/ 0
{
–– 
Debug
—— 
.
—— 
	WriteLine
—— 
(
——  
$"
——  "
$str
——" Y
{
——Y Z
ex
——Z \
.
——\ ]
Message
——] d
}
——d e
"
——e f
)
——f g
;
——g h
MessageHelper
”” 
.
”” 
	ShowPopup
”” '
(
””' (
MessageTranslator
‘‘ %
.
‘‘% &!
GetLocalizedMessage
‘‘& 9
(
‘‘9 :
$str
‘‘: O
)
‘‘O P
,
‘‘P Q
$str
’’ 
)
÷÷ 
;
÷÷ 
}
◊◊ 
catch
ÿÿ 
(
ÿÿ 
	Exception
ÿÿ 
ex
ÿÿ 
)
ÿÿ  
{
ŸŸ 
Debug
⁄⁄ 
.
⁄⁄ 
	WriteLine
⁄⁄ 
(
⁄⁄  
$"
⁄⁄  "
$str
⁄⁄" P
{
⁄⁄P Q
ex
⁄⁄Q S
.
⁄⁄S T
Message
⁄⁄T [
}
⁄⁄[ \
"
⁄⁄\ ]
)
⁄⁄] ^
;
⁄⁄^ _
MessageHelper
‹‹ 
.
‹‹ 
	ShowPopup
‹‹ '
(
‹‹' (
MessageTranslator
›› %
.
››% &!
GetLocalizedMessage
››& 9
(
››9 :
$str
››: L
)
››L M
,
››M N
$str
ﬁﬁ 
)
ﬂﬂ 
;
ﬂﬂ 
}
‡‡ 
}
·· 	
private
„„ 
void
„„ 
OnLanguageClick
„„ $
(
„„$ %
object
„„% +
sender
„„, 2
,
„„2 3
RoutedEventArgs
„„4 C
e
„„D E
)
„„E F
{
‰‰ 	
try
ÂÂ 
{
ÊÊ 
NavigationService
ÁÁ !
?
ÁÁ! "
.
ÁÁ" #
Navigate
ÁÁ# +
(
ÁÁ+ ,
new
ÁÁ, /
SelectLanguage
ÁÁ0 >
(
ÁÁ> ?
)
ÁÁ? @
)
ÁÁ@ A
;
ÁÁA B
}
ËË 
catch
ÈÈ 
(
ÈÈ 
	Exception
ÈÈ 
ex
ÈÈ 
)
ÈÈ  
{
ÍÍ 
Debug
ÎÎ 
.
ÎÎ 
	WriteLine
ÎÎ 
(
ÎÎ  
$"
ÎÎ  "
$str
ÎÎ" C
{
ÎÎC D
ex
ÎÎD F
.
ÎÎF G
Message
ÎÎG N
}
ÎÎN O
"
ÎÎO P
)
ÎÎP Q
;
ÎÎQ R
MessageHelper
ÏÏ 
.
ÏÏ 
	ShowPopup
ÏÏ '
(
ÏÏ' (
MessageTranslator
ÌÌ %
.
ÌÌ% &!
GetLocalizedMessage
ÌÌ& 9
(
ÌÌ9 :
$str
ÌÌ: O
)
ÌÌO P
,
ÌÌP Q
$str
ÓÓ 
)
ÔÔ 
;
ÔÔ 
}
 
}
ÒÒ 	
}
ÚÚ 
}ÛÛ ÆF
eC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Pages\ChatWindow.xaml.cs
	namespace

 	
DamasChinas_Client


 
.

 
UI

 
.

  
Pages

  %
{ 
public 
partial 
class 

ChatWindow  
:! "
Window# )
{ 
private 	
readonly
 
string 
_friendUsername )
;) *
private 	
readonly
 
string 
_myUsername %
;% &
private 	
readonly
 
IChatService 
_client  '
;' (
public  
ObservableCollection	 
< 
Message %
>% &
Messages' /
{0 1
get2 5
;5 6
}7 8
=9 :
new; > 
ObservableCollection? S
<S T
MessageT [
>[ \
(\ ]
)] ^
;^ _
public 

ChatWindow	 
( 
PublicProfile !
currentUser" -
,- .
string/ 5
friendUsername6 D
)D E
{ 
InitializeComponent 
( 
) 
; 
_friendUsername 
= 
friendUsername #
??$ &
throw' ,
new- 0!
ArgumentNullException1 F
(F G
nameofG M
(M N
friendUsernameN \
)\ ]
)] ^
;^ _
_myUsername 
= 
currentUser 
? 
. 
Username &
??' )
throw* /
new0 3!
ArgumentNullException4 I
(I J
nameofJ P
(P Q
currentUserQ \
)\ ]
)] ^
;^ _
DataContext 
= 
this 
; 
try 
{ 
var 
callback 
= 
new 
ChatCallback #
(# $
ReceiveMessage$ 2
)2 3
;3 4
var   
context   
=   
new   
InstanceContext   %
(  % &
callback  & .
)  . /
;  / 0
var"" 
binding"" 
="" 
new"" 
NetTcpBinding"" #
{## 
Security$$ 
=$$ 
{$$ 
Mode$$ 
=$$ 
SecurityMode$$ %
.$$% &
None$$& *
}$$+ ,
,$$, -
ReceiveTimeout%% 
=%% 
TimeSpan%% 
.%% 
MaxValue%% '
}&& 
;&& 
var(( 
endpoint(( 
=(( 
new(( 
EndpointAddress(( &
(((& '
$str((' N
)((N O
;((O P
var** 
factory** 
=** 
new**  
DuplexChannelFactory** *
<*** +
IChatService**+ 7
>**7 8
(**8 9
context**9 @
,**@ A
binding**B I
,**I J
endpoint**K S
)**S T
;**T U
_client++ 
=++ 
factory++ 
.++ 
CreateChannel++ #
(++# $
)++$ %
;++% &
_client-- 
.-- 
RegistrateClient-- 
(-- 
_myUsername-- (
)--( )
;--) *
_// 
=// 
LoadHistoryAsync// 
(// 
)// 
;// 
}00 
catch11 
(11	 

	Exception11
 
ex11 
)11 
{22 

MessageBox33 
.33 
Show33 
(33 
$"33 
$str33 4
{334 5
ex335 7
.337 8
Message338 ?
}33? @
"33@ A
,33A B
$str33C J
,33J K
MessageBoxButton33L \
.33\ ]
OK33] _
,33_ `
MessageBoxImage33a p
.33p q
Error33q v
)33v w
;33w x
}44 
}55 
private77 	
async77
 
Task77 
LoadHistoryAsync77 %
(77% &
)77& '
{88 
try99 
{:: 
Messages;; 
.;; 
Clear;; 
(;; 
);; 
;;; 
var<< 
history<< 
=<< 
await<< 
Task<< 
.<< 
Run<<  
(<<  !
(<<! "
)<<" #
=><<$ &
_client<<' .
.<<. /!
GetHistoricalMessages<</ D
(<<D E
_myUsername<<E P
,<<P Q
_friendUsername<<R a
)<<a b
)<<b c
;<<c d
foreach>> 
(>> 
var>> 
message>> 
in>> 
history>> #
)>># $
{?? 
Messages@@ 
.@@ 
Add@@ 
(@@ 
message@@ 
)@@ 
;@@ 
}AA 
ifCC 
(CC 
MessagesListCC 
.CC 
ItemsCC 
.CC 
CountCC  
>CC! "
$numCC# $
)CC$ %
{DD 
MessagesListEE 
.EE 
ScrollIntoViewEE  
(EE  !
MessagesListEE! -
.EE- .
ItemsEE. 3
[EE3 4
MessagesListEE4 @
.EE@ A
ItemsEEA F
.EEF G
CountEEG L
-EEM N
$numEEO P
]EEP Q
)EEQ R
;EER S
}FF 
}GG 
catchHH 
(HH	 

	ExceptionHH
 
exHH 
)HH 
{II 

MessageBoxJJ 
.JJ 
ShowJJ 
(JJ 
$"JJ 
$strJJ 1
{JJ1 2
exJJ2 4
.JJ4 5
MessageJJ5 <
}JJ< =
"JJ= >
,JJ> ?
$strJJ@ G
,JJG H
MessageBoxButtonJJI Y
.JJY Z
OKJJZ \
,JJ\ ]
MessageBoxImageJJ^ m
.JJm n
WarningJJn u
)JJu v
;JJv w
}KK 
}LL 
privateNN 	
voidNN
 
OnSendClickNN 
(NN 
objectNN !
senderNN" (
,NN( )
RoutedEventArgsNN* 9
eNN: ;
)NN; <
{OO 
varPP 
textPP 
=PP 
InputMessagePP 
.PP 
TextPP 
.PP  
TrimPP  $
(PP$ %
)PP% &
;PP& '
ifQQ 
(QQ 
stringQQ 
.QQ 
IsNullOrEmptyQQ 
(QQ 
textQQ  
)QQ  !
)QQ! "
{RR 
returnSS 

;SS
 
}TT 
varVV 
messageVV 
=VV 
newVV 
MessageVV 
{WW 
UsarnameSenderXX 
=XX 
_myUsernameXX  
,XX  !
DestinationUsernameYY 
=YY 
_friendUsernameYY )
,YY) *
TextZZ 
=ZZ	 

textZZ 
,ZZ 
SendDate[[ 
=[[ 
DateTime[[ 
.[[ 
Now[[ 
}\\ 
;\\ 
try^^ 
{__ 
_client`` 
.`` 
SendMessage`` 
(`` 
message`` 
)``  
;``  !
Messagesaa 
.aa 
Addaa 
(aa 
messageaa 
)aa 
;aa 
MessagesListbb 
.bb 
ScrollIntoViewbb 
(bb  
MessagesListbb  ,
.bb, -
Itemsbb- 2
[bb2 3
MessagesListbb3 ?
.bb? @
Itemsbb@ E
.bbE F
CountbbF K
-bbL M
$numbbN O
]bbO P
)bbP Q
;bbQ R
InputMessagecc 
.cc 
Clearcc 
(cc 
)cc 
;cc 
}dd 
catchee 
(ee	 

	Exceptionee
 
exee 
)ee 
{ff 

MessageBoxgg 
.gg 
Showgg 
(gg 
$strgg /
+gg0 1
exgg2 4
.gg4 5
Messagegg5 <
)gg< =
;gg= >
}hh 
}ii 
publickk 
voidkk	 
ReceiveMessagekk 
(kk 
Messagekk $
messagekk% ,
)kk, -
{ll 
Messagesmm 
.mm 
Addmm 
(mm 
messagemm 
)mm 
;mm 
MessagesListnn 
.nn 
ScrollIntoViewnn 
(nn 
MessagesListnn +
.nn+ ,
Itemsnn, 1
[nn1 2
MessagesListnn2 >
.nn> ?
Itemsnn? D
.nnD E
CountnnE J
-nnK L
$numnnM N
]nnN O
)nnO P
;nnP Q
}oo 
}pp 
}qq ⁄
dC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Pages\AddFriend.xaml.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
Pages  %
{ 
public		 

partial		 
class		 
	AddFriend		 "
:		# $
Page		% )
{

 
public 
	AddFriend 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
private 
void 
OnCancelClick "
(" #
object# )
sender* 0
,0 1
RoutedEventArgs2 A
eB C
)C D
{ 	
try 
{ 
NavigationService !
?! "
." #
GoBack# )
() *
)* +
;+ ,
} 
catch 
( 
	Exception 
) 
{ 
MessageHelper 
. 
	ShowPopup '
(' (
MessageTranslator %
.% &
GetLocalizedMessage& 9
(9 :
$str: O
)O P
,P Q
$str 
) 
; 
} 
} 	
private 
void 
OnSendClick  
(  !
object! '
sender( .
,. /
RoutedEventArgs0 ?
e@ A
)A B
{ 	
string   
username   
=   
txtFriendUsername   /
.  / 0
Text  0 4
.  4 5
Trim  5 9
(  9 :
)  : ;
;  ; <
if"" 
("" 
string"" 
."" 
IsNullOrWhiteSpace"" )
("") *
username""* 2
)""2 3
)""3 4
{## 
MessageHelper$$ 
.$$ 
	ShowPopup$$ '
($$' (
MessageTranslator%% %
.%%% &
GetLocalizedMessage%%& 9
(%%9 :
$str%%: P
)%%P Q
,%%Q R
$str&& 
)&& 
;&& 
return'' 
;'' 
}(( 
bool++ 
	userFound++ 
=++ 
!++ 
username++ &
.++& '
Equals++' -
(++- .
$str++. 8
,++8 9
StringComparison++: J
.++J K
OrdinalIgnoreCase++K \
)++\ ]
;++] ^
var-- 
popup-- 
=-- 
new-- 
FriendRequestSent-- -
(--- .
	userFound--. 7
)--7 8
;--8 9
Window// 
owner// 
=// 
Window// !
.//! "
	GetWindow//" +
(//+ ,
this//, 0
)//0 1
;//1 2
if00 
(00 
owner00 
!=00 
null00 
)00 
popup11 
.11 
Owner11 
=11 
owner11 #
;11# $
popup33 
.33 

ShowDialog33 
(33 
)33 
;33 
if66 
(66 
	userFound66 
)66 
{77 
NavigationService88 !
?88! "
.88" #
GoBack88# )
(88) *
)88* +
;88+ ,
}99 
}:: 	
};; 
}<< 

cC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Models\LobbySummary.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
Models  &
{ 
public		 

class		 
LobbySummary		 
{

 
public 
string 
Code 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
HostUsername "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
PlayerCount !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
	IsPrivate 
{  !
get" %
;% &
set' *
;* +
}, -
public 
override 
string 
ToString '
(' (
)( )
{ 	
return 
$" 
{ 
Code 
} 
$str 
{ 
HostUsername +
}+ ,
$str, .
{. /
PlayerCount/ :
}: ;
$str; <
"< =
;= >
} 	
} 
} è

dC:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\LoginCallbackHandler.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
{		 
public

 

class

  
LoginCallbackHandler

 %
:

& '!
ILoginServiceCallback

( =
{ 
public 
event 
Action 
< 
PublicProfile )
>) *
LoginSuccess+ 7
;7 8
public 
event 
Action 
< 
MessageCode '
>' (

LoginError) 3
;3 4
public 
void 
OnLoginSuccess "
(" #
PublicProfile# 0
profile1 8
)8 9
{ 	
LoginSuccess 
? 
. 
Invoke  
(  !
profile! (
)( )
;) *
} 	
public 
void 
OnLoginError  
(  !
MessageCode! ,
code- 1
)1 2
{ 	

LoginError 
? 
. 
Invoke 
( 
code #
)# $
;$ %
} 	
} 
} Î
[C:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\Dto\UserDto.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
Dto  #
{		 
} å
\C:\Projects\DamasChinas\DamasChinas\DamasChinas_Client\DamasChinas_Client.UI\ChatCallback.cs
	namespace 	
DamasChinas_Client
 
. 
UI 
.  
	Callbacks  )
{ 
public 

class 
ChatCallback 
:  
IChatServiceCallback  4
{ 
private		 
readonly		 
Action		 
<		  
Message		  '
>		' (
_onMessageReceived		) ;
;		; <
public 
ChatCallback 
( 
Action "
<" #
Message# *
>* +
onMessageReceived, =
)= >
{ 	
_onMessageReceived 
=  
onMessageReceived! 2
;2 3
} 	
public 
void 
ReceiveMessage "
(" #
Message# *
message+ 2
)2 3
{ 	
Application 
. 
Current 
.  

Dispatcher  *
.* +
Invoke+ 1
(1 2
(2 3
)3 4
=>5 7
{ 
_onMessageReceived "
?" #
.# $
Invoke$ *
(* +
message+ 2
)2 3
;3 4
} 
) 
; 
} 	
} 
} 